function G2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function K2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q2={exports:{}},Oh={},Y2={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc=Symbol.for("react.element"),AC=Symbol.for("react.portal"),CC=Symbol.for("react.fragment"),PC=Symbol.for("react.strict_mode"),kC=Symbol.for("react.profiler"),NC=Symbol.for("react.provider"),DC=Symbol.for("react.context"),LC=Symbol.for("react.forward_ref"),MC=Symbol.for("react.suspense"),jC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),y1=Symbol.iterator;function OC(t){return t===null||typeof t!="object"?null:(t=y1&&t[y1]||t["@@iterator"],typeof t=="function"?t:null)}var X2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J2=Object.assign,Z2={};function Da(t,e,n){this.props=t,this.context=e,this.refs=Z2,this.updater=n||X2}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ex(){}ex.prototype=Da.prototype;function u0(t,e,n){this.props=t,this.context=e,this.refs=Z2,this.updater=n||X2}var d0=u0.prototype=new ex;d0.constructor=u0;J2(d0,Da.prototype);d0.isPureReactComponent=!0;var v1=Array.isArray,tx=Object.prototype.hasOwnProperty,h0={current:null},nx={key:!0,ref:!0,__self:!0,__source:!0};function rx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tx.call(e,r)&&!nx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Dc,type:t,key:s,ref:o,props:i,_owner:h0.current}}function FC(t,e){return{$$typeof:Dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function f0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dc}function UC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var w1=/\/+/g;function om(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UC(""+t.key):e.toString(36)}function sd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dc:case AC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+om(o,0):r,v1(i)?(n="",t!=null&&(n=t.replace(w1,"$&/")+"/"),sd(i,e,n,"",function(c){return c})):i!=null&&(f0(i)&&(i=FC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(w1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",v1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+om(s,a);o+=sd(s,e,n,l,i)}else if(l=OC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+om(s,a++),o+=sd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tu(t,e,n){if(t==null)return t;var r=[],i=0;return sd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function BC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},od={transition:null},$C={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:od,ReactCurrentOwner:h0};function ix(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Tu,forEach:function(t,e,n){Tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tu(t,function(){e++}),e},toArray:function(t){return Tu(t,function(e){return e})||[]},only:function(t){if(!f0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Da;be.Fragment=CC;be.Profiler=kC;be.PureComponent=u0;be.StrictMode=PC;be.Suspense=MC;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$C;be.act=ix;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J2({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=h0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tx.call(e,l)&&!nx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Dc,type:t.type,key:i,ref:s,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:DC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NC,_context:t},t.Consumer=t};be.createElement=rx;be.createFactory=function(t){var e=rx.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:LC,render:t}};be.isValidElement=f0;be.lazy=function(t){return{$$typeof:VC,_payload:{_status:-1,_result:t},_init:BC}};be.memo=function(t,e){return{$$typeof:jC,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=od.transition;od.transition={};try{t()}finally{od.transition=e}};be.unstable_act=ix;be.useCallback=function(t,e){return ln.current.useCallback(t,e)};be.useContext=function(t){return ln.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};be.useEffect=function(t,e){return ln.current.useEffect(t,e)};be.useId=function(){return ln.current.useId()};be.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return ln.current.useMemo(t,e)};be.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};be.useRef=function(t){return ln.current.useRef(t)};be.useState=function(t){return ln.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return ln.current.useTransition()};be.version="18.3.1";Y2.exports=be;var g=Y2.exports;const ca=K2(g),zC=G2({__proto__:null,default:ca},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WC=g,HC=Symbol.for("react.element"),qC=Symbol.for("react.fragment"),GC=Object.prototype.hasOwnProperty,KC=WC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QC={key:!0,ref:!0,__self:!0,__source:!0};function sx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)GC.call(e,r)&&!QC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:HC,type:t,key:s,ref:o,props:i,_owner:KC.current}}Oh.Fragment=qC;Oh.jsx=sx;Oh.jsxs=sx;Q2.exports=Oh;var f=Q2.exports,wp={},ox={exports:{}},Ln={},ax={exports:{}},lx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var ie=$.length;$.push(Q);e:for(;0<ie;){var ne=ie-1>>>1,pe=$[ne];if(0<i(pe,Q))$[ne]=Q,$[ie]=pe,ie=ne;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],ie=$.pop();if(ie!==Q){$[0]=ie;e:for(var ne=0,pe=$.length,Ee=pe>>>1;ne<Ee;){var Le=2*(ne+1)-1,Ye=$[Le],rt=Le+1,Dt=$[rt];if(0>i(Ye,ie))rt<pe&&0>i(Dt,Ye)?($[ne]=Dt,$[rt]=ie,ne=rt):($[ne]=Ye,$[Le]=ie,ne=Le);else if(rt<pe&&0>i(Dt,ie))$[ne]=Dt,$[rt]=ie,ne=rt;else break e}}return Q}function i($,Q){var ie=$.sortIndex-Q.sortIndex;return ie!==0?ie:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,y=!1,_=!1,x=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=$)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function P($){if(x=!1,E($),!_)if(n(l)!==null)_=!0,G(j);else{var Q=n(c);Q!==null&&J(P,Q.startTime-$)}}function j($,Q){_=!1,x&&(x=!1,b(T),T=-1),y=!0;var ie=m;try{for(E(Q),h=n(l);h!==null&&(!(h.expirationTime>Q)||$&&!D());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,m=h.priorityLevel;var pe=ne(h.expirationTime<=Q);Q=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===n(l)&&r(l),E(Q)}else r(l);h=n(l)}if(h!==null)var Ee=!0;else{var Le=n(c);Le!==null&&J(P,Le.startTime-Q),Ee=!1}return Ee}finally{h=null,m=ie,y=!1}}var k=!1,S=null,T=-1,I=5,C=-1;function D(){return!(t.unstable_now()-C<I)}function L(){if(S!==null){var $=t.unstable_now();C=$;var Q=!0;try{Q=S(!0,$)}finally{Q?N():(k=!1,S=null)}}else k=!1}var N;if(typeof w=="function")N=function(){w(L)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,we=X.port2;X.port1.onmessage=L,N=function(){we.postMessage(null)}}else N=function(){R(L,0)};function G($){S=$,k||(k=!0,N())}function J($,Q){T=R(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,G(j))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var ie=m;m=Q;try{return $()}finally{m=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ie=m;m=$;try{return Q()}finally{m=ie}},t.unstable_scheduleCallback=function($,Q,ie){var ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,$){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ie+pe,$={id:d++,callback:Q,priorityLevel:$,startTime:ie,expirationTime:pe,sortIndex:-1},ie>ne?($.sortIndex=ie,e(c,$),n(l)===null&&$===n(c)&&(x?(b(T),T=-1):x=!0,J(P,ie-ne))):($.sortIndex=pe,e(l,$),_||y||(_=!0,G(j))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var Q=m;return function(){var ie=m;m=Q;try{return $.apply(this,arguments)}finally{m=ie}}}})(lx);ax.exports=lx;var YC=ax.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=g,kn=YC;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cx=new Set,nc={};function oo(t,e){ua(t,e),ua(t+"Capture",e)}function ua(t,e){for(nc[t]=e,t=0;t<e.length;t++)cx.add(e[t])}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_p=Object.prototype.hasOwnProperty,JC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_1={},E1={};function ZC(t){return _p.call(E1,t)?!0:_p.call(_1,t)?!1:JC.test(t)?E1[t]=!0:(_1[t]=!0,!1)}function eP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tP(t,e,n,r){if(e===null||typeof e>"u"||eP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var m0=/[\-:]([a-z])/g;function p0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(m0,p0);Ut[e]=new cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(m0,p0);Ut[e]=new cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(m0,p0);Ut[e]=new cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new cn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function g0(t,e,n,r){var i=Ut.hasOwnProperty(e)?Ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tP(e,n,i,r)&&(n=null),r||i===null?ZC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pi=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),Mo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),y0=Symbol.for("react.strict_mode"),Ep=Symbol.for("react.profiler"),ux=Symbol.for("react.provider"),dx=Symbol.for("react.context"),v0=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),Tp=Symbol.for("react.suspense_list"),w0=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),hx=Symbol.for("react.offscreen"),x1=Symbol.iterator;function ll(t){return t===null||typeof t!="object"?null:(t=x1&&t[x1]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,am;function Tl(t){if(am===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);am=e&&e[1]||""}return`
`+am+t}var lm=!1;function cm(t,e){if(!t||lm)return"";lm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tl(t):""}function nP(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=cm(t.type,!1),t;case 11:return t=cm(t.type.render,!1),t;case 1:return t=cm(t.type,!0),t;default:return""}}function bp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Mo:return"Portal";case Ep:return"Profiler";case y0:return"StrictMode";case xp:return"Suspense";case Tp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dx:return(t.displayName||"Context")+".Consumer";case ux:return(t._context.displayName||"Context")+".Provider";case v0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w0:return e=t.displayName||null,e!==null?e:bp(t.type)||"Memo";case Ai:e=t._payload,t=t._init;try{return bp(t(e))}catch{}}return null}function rP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bp(e);case 8:return e===y0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iP(t){var e=fx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Iu(t){t._valueTracker||(t._valueTracker=iP(t))}function mx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ip(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function T1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function px(t,e){e=e.checked,e!=null&&g0(t,"checked",e,!1)}function Sp(t,e){px(t,e);var n=Zi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rp(t,e.type,Zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rp(t,e,n){(e!=="number"||Nd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bl=Array.isArray;function Jo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ap(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(bl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zi(n)}}function gx(t,e){var n=Zi(e.value),r=Zi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function S1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Su,vx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Su=Su||document.createElement("div"),Su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sP=["Webkit","ms","Moz","O"];Object.keys(Ml).forEach(function(t){sP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ml[e]=Ml[t]})});function wx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ml.hasOwnProperty(t)&&Ml[t]?(""+e).trim():e+"px"}function _x(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oP=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pp(t,e){if(e){if(oP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function kp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Np=null;function _0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dp=null,Zo=null,ea=null;function R1(t){if(t=jc(t)){if(typeof Dp!="function")throw Error(q(280));var e=t.stateNode;e&&(e=zh(e),Dp(t.stateNode,t.type,e))}}function Ex(t){Zo?ea?ea.push(t):ea=[t]:Zo=t}function xx(){if(Zo){var t=Zo,e=ea;if(ea=Zo=null,R1(t),e)for(t=0;t<e.length;t++)R1(e[t])}}function Tx(t,e){return t(e)}function bx(){}var um=!1;function Ix(t,e,n){if(um)return t(e,n);um=!0;try{return Tx(t,e,n)}finally{um=!1,(Zo!==null||ea!==null)&&(bx(),xx())}}function ic(t,e){var n=t.stateNode;if(n===null)return null;var r=zh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Lp=!1;if(oi)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Lp=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Lp=!1}function aP(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var jl=!1,Dd=null,Ld=!1,Mp=null,lP={onError:function(t){jl=!0,Dd=t}};function cP(t,e,n,r,i,s,o,a,l){jl=!1,Dd=null,aP.apply(lP,arguments)}function uP(t,e,n,r,i,s,o,a,l){if(cP.apply(this,arguments),jl){if(jl){var c=Dd;jl=!1,Dd=null}else throw Error(q(198));Ld||(Ld=!0,Mp=c)}}function ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A1(t){if(ao(t)!==t)throw Error(q(188))}function dP(t){var e=t.alternate;if(!e){if(e=ao(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return A1(i),t;if(s===r)return A1(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function Rx(t){return t=dP(t),t!==null?Ax(t):null}function Ax(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ax(t);if(e!==null)return e;t=t.sibling}return null}var Cx=kn.unstable_scheduleCallback,C1=kn.unstable_cancelCallback,hP=kn.unstable_shouldYield,fP=kn.unstable_requestPaint,pt=kn.unstable_now,mP=kn.unstable_getCurrentPriorityLevel,E0=kn.unstable_ImmediatePriority,Px=kn.unstable_UserBlockingPriority,Md=kn.unstable_NormalPriority,pP=kn.unstable_LowPriority,kx=kn.unstable_IdlePriority,Fh=null,br=null;function gP(t){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(Fh,t,void 0,(t.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:wP,yP=Math.log,vP=Math.LN2;function wP(t){return t>>>=0,t===0?32:31-(yP(t)/vP|0)|0}var Ru=64,Au=4194304;function Il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Il(a):(s&=o,s!==0&&(r=Il(s)))}else o=n&~i,o!==0?r=Il(o):s!==0&&(r=Il(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-lr(e),i=1<<n,r|=t[n],e&=~i;return r}function _P(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-lr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_P(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nx(){var t=Ru;return Ru<<=1,!(Ru&4194240)&&(Ru=64),t}function dm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lr(e),t[e]=n}function xP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-lr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function x0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-lr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function Dx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lx,T0,Mx,jx,Vx,Vp=!1,Cu=[],Bi=null,$i=null,zi=null,sc=new Map,oc=new Map,ki=[],TP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P1(t,e){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(e.pointerId)}}function ul(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=jc(e),e!==null&&T0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bP(t,e,n,r,i){switch(e){case"focusin":return Bi=ul(Bi,t,e,n,r,i),!0;case"dragenter":return $i=ul($i,t,e,n,r,i),!0;case"mouseover":return zi=ul(zi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return sc.set(s,ul(sc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,oc.set(s,ul(oc.get(s)||null,t,e,n,r,i)),!0}return!1}function Ox(t){var e=Ms(t.target);if(e!==null){var n=ao(e);if(n!==null){if(e=n.tag,e===13){if(e=Sx(n),e!==null){t.blockedOn=e,Vx(t.priority,function(){Mx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ad(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Op(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Np=r,n.target.dispatchEvent(r),Np=null}else return e=jc(n),e!==null&&T0(e),t.blockedOn=n,!1;e.shift()}return!0}function k1(t,e,n){ad(t)&&n.delete(e)}function IP(){Vp=!1,Bi!==null&&ad(Bi)&&(Bi=null),$i!==null&&ad($i)&&($i=null),zi!==null&&ad(zi)&&(zi=null),sc.forEach(k1),oc.forEach(k1)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Vp||(Vp=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,IP)))}function ac(t){function e(i){return dl(i,t)}if(0<Cu.length){dl(Cu[0],t);for(var n=1;n<Cu.length;n++){var r=Cu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bi!==null&&dl(Bi,t),$i!==null&&dl($i,t),zi!==null&&dl(zi,t),sc.forEach(e),oc.forEach(e),n=0;n<ki.length;n++)r=ki[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ki.length&&(n=ki[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&ki.shift()}var ta=pi.ReactCurrentBatchConfig,Vd=!0;function SP(t,e,n,r){var i=je,s=ta.transition;ta.transition=null;try{je=1,b0(t,e,n,r)}finally{je=i,ta.transition=s}}function RP(t,e,n,r){var i=je,s=ta.transition;ta.transition=null;try{je=4,b0(t,e,n,r)}finally{je=i,ta.transition=s}}function b0(t,e,n,r){if(Vd){var i=Op(t,e,n,r);if(i===null)Em(t,e,r,Od,n),P1(t,r);else if(bP(i,t,e,n,r))r.stopPropagation();else if(P1(t,r),e&4&&-1<TP.indexOf(t)){for(;i!==null;){var s=jc(i);if(s!==null&&Lx(s),s=Op(t,e,n,r),s===null&&Em(t,e,r,Od,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Em(t,e,r,null,n)}}var Od=null;function Op(t,e,n,r){if(Od=null,t=_0(r),t=Ms(t),t!==null)if(e=ao(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Od=t,null}function Fx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mP()){case E0:return 1;case Px:return 4;case Md:case pP:return 16;case kx:return 536870912;default:return 16}default:return 16}}var Vi=null,I0=null,ld=null;function Ux(){if(ld)return ld;var t,e=I0,n=e.length,r,i="value"in Vi?Vi.value:Vi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ld=i.slice(t,1<r?1-r:void 0)}function cd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pu(){return!0}function N1(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pu:N1,this.isPropagationStopped=N1,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pu)},persist:function(){},isPersistent:Pu}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S0=Mn(La),Mc=lt({},La,{view:0,detail:0}),AP=Mn(Mc),hm,fm,hl,Uh=lt({},Mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(hm=t.screenX-hl.screenX,fm=t.screenY-hl.screenY):fm=hm=0,hl=t),hm)},movementY:function(t){return"movementY"in t?t.movementY:fm}}),D1=Mn(Uh),CP=lt({},Uh,{dataTransfer:0}),PP=Mn(CP),kP=lt({},Mc,{relatedTarget:0}),mm=Mn(kP),NP=lt({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),DP=Mn(NP),LP=lt({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MP=Mn(LP),jP=lt({},La,{data:0}),L1=Mn(jP),VP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FP[t])?!!e[t]:!1}function R0(){return UP}var BP=lt({},Mc,{key:function(t){if(t.key){var e=VP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R0,charCode:function(t){return t.type==="keypress"?cd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$P=Mn(BP),zP=lt({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M1=Mn(zP),WP=lt({},Mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R0}),HP=Mn(WP),qP=lt({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),GP=Mn(qP),KP=lt({},Uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QP=Mn(KP),YP=[9,13,27,32],A0=oi&&"CompositionEvent"in window,Vl=null;oi&&"documentMode"in document&&(Vl=document.documentMode);var XP=oi&&"TextEvent"in window&&!Vl,Bx=oi&&(!A0||Vl&&8<Vl&&11>=Vl),j1=" ",V1=!1;function $x(t,e){switch(t){case"keyup":return YP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function JP(t,e){switch(t){case"compositionend":return zx(e);case"keypress":return e.which!==32?null:(V1=!0,j1);case"textInput":return t=e.data,t===j1&&V1?null:t;default:return null}}function ZP(t,e){if(Vo)return t==="compositionend"||!A0&&$x(t,e)?(t=Ux(),ld=I0=Vi=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bx&&e.locale!=="ko"?null:e.data;default:return null}}var ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ek[t.type]:e==="textarea"}function Wx(t,e,n,r){Ex(r),e=Fd(e,"onChange"),0<e.length&&(n=new S0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ol=null,lc=null;function tk(t){tT(t,0)}function Bh(t){var e=Uo(t);if(mx(e))return t}function nk(t,e){if(t==="change")return e}var Hx=!1;if(oi){var pm;if(oi){var gm="oninput"in document;if(!gm){var F1=document.createElement("div");F1.setAttribute("oninput","return;"),gm=typeof F1.oninput=="function"}pm=gm}else pm=!1;Hx=pm&&(!document.documentMode||9<document.documentMode)}function U1(){Ol&&(Ol.detachEvent("onpropertychange",qx),lc=Ol=null)}function qx(t){if(t.propertyName==="value"&&Bh(lc)){var e=[];Wx(e,lc,t,_0(t)),Ix(tk,e)}}function rk(t,e,n){t==="focusin"?(U1(),Ol=e,lc=n,Ol.attachEvent("onpropertychange",qx)):t==="focusout"&&U1()}function ik(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bh(lc)}function sk(t,e){if(t==="click")return Bh(e)}function ok(t,e){if(t==="input"||t==="change")return Bh(e)}function ak(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:ak;function cc(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_p.call(e,i)||!ur(t[i],e[i]))return!1}return!0}function B1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $1(t,e){var n=B1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B1(n)}}function Gx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kx(){for(var t=window,e=Nd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nd(t.document)}return e}function C0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lk(t){var e=Kx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gx(n.ownerDocument.documentElement,n)){if(r!==null&&C0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$1(n,s);var o=$1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ck=oi&&"documentMode"in document&&11>=document.documentMode,Oo=null,Fp=null,Fl=null,Up=!1;function z1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Up||Oo==null||Oo!==Nd(r)||(r=Oo,"selectionStart"in r&&C0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fl&&cc(Fl,r)||(Fl=r,r=Fd(Fp,"onSelect"),0<r.length&&(e=new S0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oo)))}function ku(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fo={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},ym={},Qx={};oi&&(Qx=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function $h(t){if(ym[t])return ym[t];if(!Fo[t])return t;var e=Fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qx)return ym[t]=e[n];return t}var Yx=$h("animationend"),Xx=$h("animationiteration"),Jx=$h("animationstart"),Zx=$h("transitionend"),eT=new Map,W1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(t,e){eT.set(t,e),oo(e,[t])}for(var vm=0;vm<W1.length;vm++){var wm=W1[vm],uk=wm.toLowerCase(),dk=wm[0].toUpperCase()+wm.slice(1);ls(uk,"on"+dk)}ls(Yx,"onAnimationEnd");ls(Xx,"onAnimationIteration");ls(Jx,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(Zx,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function H1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uP(r,e,void 0,t),t.currentTarget=null}function tT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;H1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;H1(i,a,c),s=l}}}if(Ld)throw t=Mp,Ld=!1,Mp=null,t}function Ke(t,e){var n=e[Hp];n===void 0&&(n=e[Hp]=new Set);var r=t+"__bubble";n.has(r)||(nT(e,t,2,!1),n.add(r))}function _m(t,e,n){var r=0;e&&(r|=4),nT(n,t,r,e)}var Nu="_reactListening"+Math.random().toString(36).slice(2);function uc(t){if(!t[Nu]){t[Nu]=!0,cx.forEach(function(n){n!=="selectionchange"&&(hk.has(n)||_m(n,!1,t),_m(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nu]||(e[Nu]=!0,_m("selectionchange",!1,e))}}function nT(t,e,n,r){switch(Fx(e)){case 1:var i=SP;break;case 4:i=RP;break;default:i=b0}n=i.bind(null,e,n,t),i=void 0,!Lp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Em(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ix(function(){var c=s,d=_0(n),h=[];e:{var m=eT.get(t);if(m!==void 0){var y=S0,_=t;switch(t){case"keypress":if(cd(n)===0)break e;case"keydown":case"keyup":y=$P;break;case"focusin":_="focus",y=mm;break;case"focusout":_="blur",y=mm;break;case"beforeblur":case"afterblur":y=mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=D1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=PP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=HP;break;case Yx:case Xx:case Jx:y=DP;break;case Zx:y=GP;break;case"scroll":y=AP;break;case"wheel":y=QP;break;case"copy":case"cut":case"paste":y=MP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=M1}var x=(e&4)!==0,R=!x&&t==="scroll",b=x?m!==null?m+"Capture":null:m;x=[];for(var w=c,E;w!==null;){E=w;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,b!==null&&(P=ic(w,b),P!=null&&x.push(dc(w,P,E)))),R)break;w=w.return}0<x.length&&(m=new y(m,_,null,n,d),h.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Np&&(_=n.relatedTarget||n.fromElement)&&(Ms(_)||_[ai]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=c,_=_?Ms(_):null,_!==null&&(R=ao(_),_!==R||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=c),y!==_)){if(x=D1,P="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=M1,P="onPointerLeave",b="onPointerEnter",w="pointer"),R=y==null?m:Uo(y),E=_==null?m:Uo(_),m=new x(P,w+"leave",y,n,d),m.target=R,m.relatedTarget=E,P=null,Ms(d)===c&&(x=new x(b,w+"enter",_,n,d),x.target=E,x.relatedTarget=R,P=x),R=P,y&&_)t:{for(x=y,b=_,w=0,E=x;E;E=Ao(E))w++;for(E=0,P=b;P;P=Ao(P))E++;for(;0<w-E;)x=Ao(x),w--;for(;0<E-w;)b=Ao(b),E--;for(;w--;){if(x===b||b!==null&&x===b.alternate)break t;x=Ao(x),b=Ao(b)}x=null}else x=null;y!==null&&q1(h,m,y,x,!1),_!==null&&R!==null&&q1(h,R,_,x,!0)}}e:{if(m=c?Uo(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=nk;else if(O1(m))if(Hx)j=ok;else{j=ik;var k=rk}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=sk);if(j&&(j=j(t,c))){Wx(h,j,n,d);break e}k&&k(t,m,c),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Rp(m,"number",m.value)}switch(k=c?Uo(c):window,t){case"focusin":(O1(k)||k.contentEditable==="true")&&(Oo=k,Fp=c,Fl=null);break;case"focusout":Fl=Fp=Oo=null;break;case"mousedown":Up=!0;break;case"contextmenu":case"mouseup":case"dragend":Up=!1,z1(h,n,d);break;case"selectionchange":if(ck)break;case"keydown":case"keyup":z1(h,n,d)}var S;if(A0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Vo?$x(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Bx&&n.locale!=="ko"&&(Vo||T!=="onCompositionStart"?T==="onCompositionEnd"&&Vo&&(S=Ux()):(Vi=d,I0="value"in Vi?Vi.value:Vi.textContent,Vo=!0)),k=Fd(c,T),0<k.length&&(T=new L1(T,t,null,n,d),h.push({event:T,listeners:k}),S?T.data=S:(S=zx(n),S!==null&&(T.data=S)))),(S=XP?JP(t,n):ZP(t,n))&&(c=Fd(c,"onBeforeInput"),0<c.length&&(d=new L1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}tT(h,e)})}function dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ic(t,n),s!=null&&r.unshift(dc(t,s,i)),s=ic(t,e),s!=null&&r.push(dc(t,s,i))),t=t.return}return r}function Ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ic(n,s),l!=null&&o.unshift(dc(n,l,a))):i||(l=ic(n,s),l!=null&&o.push(dc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fk=/\r\n?/g,mk=/\u0000|\uFFFD/g;function G1(t){return(typeof t=="string"?t:""+t).replace(fk,`
`).replace(mk,"")}function Du(t,e,n){if(e=G1(e),G1(t)!==e&&n)throw Error(q(425))}function Ud(){}var Bp=null,$p=null;function zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wp=typeof setTimeout=="function"?setTimeout:void 0,pk=typeof clearTimeout=="function"?clearTimeout:void 0,K1=typeof Promise=="function"?Promise:void 0,gk=typeof queueMicrotask=="function"?queueMicrotask:typeof K1<"u"?function(t){return K1.resolve(null).then(t).catch(yk)}:Wp;function yk(t){setTimeout(function(){throw t})}function xm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ac(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ac(e)}function Wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),xr="__reactFiber$"+Ma,hc="__reactProps$"+Ma,ai="__reactContainer$"+Ma,Hp="__reactEvents$"+Ma,vk="__reactListeners$"+Ma,wk="__reactHandles$"+Ma;function Ms(t){var e=t[xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ai]||n[xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Q1(t);t!==null;){if(n=t[xr])return n;t=Q1(t)}return e}t=n,n=t.parentNode}return null}function jc(t){return t=t[xr]||t[ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function zh(t){return t[hc]||null}var qp=[],Bo=-1;function cs(t){return{current:t}}function Qe(t){0>Bo||(t.current=qp[Bo],qp[Bo]=null,Bo--)}function He(t,e){Bo++,qp[Bo]=t.current,t.current=e}var es={},Zt=cs(es),yn=cs(!1),Gs=es;function da(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vn(t){return t=t.childContextTypes,t!=null}function Bd(){Qe(yn),Qe(Zt)}function Y1(t,e,n){if(Zt.current!==es)throw Error(q(168));He(Zt,e),He(yn,n)}function rT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,rP(t)||"Unknown",i));return lt({},n,r)}function $d(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Gs=Zt.current,He(Zt,t),He(yn,yn.current),!0}function X1(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=rT(t,e,Gs),r.__reactInternalMemoizedMergedChildContext=t,Qe(yn),Qe(Zt),He(Zt,t)):Qe(yn),He(yn,n)}var qr=null,Wh=!1,Tm=!1;function iT(t){qr===null?qr=[t]:qr.push(t)}function _k(t){Wh=!0,iT(t)}function us(){if(!Tm&&qr!==null){Tm=!0;var t=0,e=je;try{var n=qr;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qr=null,Wh=!1}catch(i){throw qr!==null&&(qr=qr.slice(t+1)),Cx(E0,us),i}finally{je=e,Tm=!1}}return null}var $o=[],zo=0,zd=null,Wd=0,Bn=[],$n=0,Ks=null,Kr=1,Qr="";function Rs(t,e){$o[zo++]=Wd,$o[zo++]=zd,zd=t,Wd=e}function sT(t,e,n){Bn[$n++]=Kr,Bn[$n++]=Qr,Bn[$n++]=Ks,Ks=t;var r=Kr;t=Qr;var i=32-lr(r)-1;r&=~(1<<i),n+=1;var s=32-lr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Kr=1<<32-lr(e)+i|n<<i|r,Qr=s+t}else Kr=1<<s|n<<i|r,Qr=t}function P0(t){t.return!==null&&(Rs(t,1),sT(t,1,0))}function k0(t){for(;t===zd;)zd=$o[--zo],$o[zo]=null,Wd=$o[--zo],$o[zo]=null;for(;t===Ks;)Ks=Bn[--$n],Bn[$n]=null,Qr=Bn[--$n],Bn[$n]=null,Kr=Bn[--$n],Bn[$n]=null}var Cn=null,Sn=null,et=!1,sr=null;function oT(t,e){var n=zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cn=t,Sn=Wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cn=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ks!==null?{id:Kr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cn=t,Sn=null,!0):!1;default:return!1}}function Gp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kp(t){if(et){var e=Sn;if(e){var n=e;if(!J1(t,e)){if(Gp(t))throw Error(q(418));e=Wi(n.nextSibling);var r=Cn;e&&J1(t,e)?oT(r,n):(t.flags=t.flags&-4097|2,et=!1,Cn=t)}}else{if(Gp(t))throw Error(q(418));t.flags=t.flags&-4097|2,et=!1,Cn=t}}}function Z1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cn=t}function Lu(t){if(t!==Cn)return!1;if(!et)return Z1(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zp(t.type,t.memoizedProps)),e&&(e=Sn)){if(Gp(t))throw aT(),Error(q(418));for(;e;)oT(t,e),e=Wi(e.nextSibling)}if(Z1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=Wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=Cn?Wi(t.stateNode.nextSibling):null;return!0}function aT(){for(var t=Sn;t;)t=Wi(t.nextSibling)}function ha(){Sn=Cn=null,et=!1}function N0(t){sr===null?sr=[t]:sr.push(t)}var Ek=pi.ReactCurrentBatchConfig;function fl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Mu(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ew(t){var e=t._init;return e(t._payload)}function lT(t){function e(b,w){if(t){var E=b.deletions;E===null?(b.deletions=[w],b.flags|=16):E.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=Ki(b,w),b.index=0,b.sibling=null,b}function s(b,w,E){return b.index=E,t?(E=b.alternate,E!==null?(E=E.index,E<w?(b.flags|=2,w):E):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,w,E,P){return w===null||w.tag!==6?(w=Pm(E,b.mode,P),w.return=b,w):(w=i(w,E),w.return=b,w)}function l(b,w,E,P){var j=E.type;return j===jo?d(b,w,E.props.children,P,E.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ai&&ew(j)===w.type)?(P=i(w,E.props),P.ref=fl(b,w,E),P.return=b,P):(P=gd(E.type,E.key,E.props,null,b.mode,P),P.ref=fl(b,w,E),P.return=b,P)}function c(b,w,E,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=km(E,b.mode,P),w.return=b,w):(w=i(w,E.children||[]),w.return=b,w)}function d(b,w,E,P,j){return w===null||w.tag!==7?(w=zs(E,b.mode,P,j),w.return=b,w):(w=i(w,E),w.return=b,w)}function h(b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Pm(""+w,b.mode,E),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bu:return E=gd(w.type,w.key,w.props,null,b.mode,E),E.ref=fl(b,null,w),E.return=b,E;case Mo:return w=km(w,b.mode,E),w.return=b,w;case Ai:var P=w._init;return h(b,P(w._payload),E)}if(bl(w)||ll(w))return w=zs(w,b.mode,E,null),w.return=b,w;Mu(b,w)}return null}function m(b,w,E,P){var j=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return j!==null?null:a(b,w,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bu:return E.key===j?l(b,w,E,P):null;case Mo:return E.key===j?c(b,w,E,P):null;case Ai:return j=E._init,m(b,w,j(E._payload),P)}if(bl(E)||ll(E))return j!==null?null:d(b,w,E,P,null);Mu(b,E)}return null}function y(b,w,E,P,j){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(E)||null,a(w,b,""+P,j);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case bu:return b=b.get(P.key===null?E:P.key)||null,l(w,b,P,j);case Mo:return b=b.get(P.key===null?E:P.key)||null,c(w,b,P,j);case Ai:var k=P._init;return y(b,w,E,k(P._payload),j)}if(bl(P)||ll(P))return b=b.get(E)||null,d(w,b,P,j,null);Mu(w,P)}return null}function _(b,w,E,P){for(var j=null,k=null,S=w,T=w=0,I=null;S!==null&&T<E.length;T++){S.index>T?(I=S,S=null):I=S.sibling;var C=m(b,S,E[T],P);if(C===null){S===null&&(S=I);break}t&&S&&C.alternate===null&&e(b,S),w=s(C,w,T),k===null?j=C:k.sibling=C,k=C,S=I}if(T===E.length)return n(b,S),et&&Rs(b,T),j;if(S===null){for(;T<E.length;T++)S=h(b,E[T],P),S!==null&&(w=s(S,w,T),k===null?j=S:k.sibling=S,k=S);return et&&Rs(b,T),j}for(S=r(b,S);T<E.length;T++)I=y(S,b,T,E[T],P),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?T:I.key),w=s(I,w,T),k===null?j=I:k.sibling=I,k=I);return t&&S.forEach(function(D){return e(b,D)}),et&&Rs(b,T),j}function x(b,w,E,P){var j=ll(E);if(typeof j!="function")throw Error(q(150));if(E=j.call(E),E==null)throw Error(q(151));for(var k=j=null,S=w,T=w=0,I=null,C=E.next();S!==null&&!C.done;T++,C=E.next()){S.index>T?(I=S,S=null):I=S.sibling;var D=m(b,S,C.value,P);if(D===null){S===null&&(S=I);break}t&&S&&D.alternate===null&&e(b,S),w=s(D,w,T),k===null?j=D:k.sibling=D,k=D,S=I}if(C.done)return n(b,S),et&&Rs(b,T),j;if(S===null){for(;!C.done;T++,C=E.next())C=h(b,C.value,P),C!==null&&(w=s(C,w,T),k===null?j=C:k.sibling=C,k=C);return et&&Rs(b,T),j}for(S=r(b,S);!C.done;T++,C=E.next())C=y(S,b,T,C.value,P),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),w=s(C,w,T),k===null?j=C:k.sibling=C,k=C);return t&&S.forEach(function(L){return e(b,L)}),et&&Rs(b,T),j}function R(b,w,E,P){if(typeof E=="object"&&E!==null&&E.type===jo&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case bu:e:{for(var j=E.key,k=w;k!==null;){if(k.key===j){if(j=E.type,j===jo){if(k.tag===7){n(b,k.sibling),w=i(k,E.props.children),w.return=b,b=w;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ai&&ew(j)===k.type){n(b,k.sibling),w=i(k,E.props),w.ref=fl(b,k,E),w.return=b,b=w;break e}n(b,k);break}else e(b,k);k=k.sibling}E.type===jo?(w=zs(E.props.children,b.mode,P,E.key),w.return=b,b=w):(P=gd(E.type,E.key,E.props,null,b.mode,P),P.ref=fl(b,w,E),P.return=b,b=P)}return o(b);case Mo:e:{for(k=E.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(b,w.sibling),w=i(w,E.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=km(E,b.mode,P),w.return=b,b=w}return o(b);case Ai:return k=E._init,R(b,w,k(E._payload),P)}if(bl(E))return _(b,w,E,P);if(ll(E))return x(b,w,E,P);Mu(b,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,E),w.return=b,b=w):(n(b,w),w=Pm(E,b.mode,P),w.return=b,b=w),o(b)):n(b,w)}return R}var fa=lT(!0),cT=lT(!1),Hd=cs(null),qd=null,Wo=null,D0=null;function L0(){D0=Wo=qd=null}function M0(t){var e=Hd.current;Qe(Hd),t._currentValue=e}function Qp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function na(t,e){qd=t,D0=Wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function Hn(t){var e=t._currentValue;if(D0!==t)if(t={context:t,memoizedValue:e,next:null},Wo===null){if(qd===null)throw Error(q(308));Wo=t,qd.dependencies={lanes:0,firstContext:t}}else Wo=Wo.next=t;return e}var js=null;function j0(t){js===null?js=[t]:js.push(t)}function uT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,j0(e)):(n.next=i.next,i.next=n),e.interleaved=n,li(t,r)}function li(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ci=!1;function V0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,li(t,n)}return i=r.interleaved,i===null?(e.next=e,j0(r)):(e.next=i.next,i.next=e),r.interleaved=e,li(t,n)}function ud(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,x0(t,n)}}function tw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gd(t,e,n,r){var i=t.updateQueue;Ci=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,x=a;switch(m=e,y=n,x.tag){case 1:if(_=x.payload,typeof _=="function"){h=_.call(y,h,m);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,m=typeof _=="function"?_.call(y,h,m):_,m==null)break e;h=lt({},h,m);break e;case 2:Ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=h):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ys|=o,t.lanes=o,t.memoizedState=h}}function nw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Vc={},Ir=cs(Vc),fc=cs(Vc),mc=cs(Vc);function Vs(t){if(t===Vc)throw Error(q(174));return t}function O0(t,e){switch(He(mc,e),He(fc,t),He(Ir,Vc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cp(e,t)}Qe(Ir),He(Ir,e)}function ma(){Qe(Ir),Qe(fc),Qe(mc)}function hT(t){Vs(mc.current);var e=Vs(Ir.current),n=Cp(e,t.type);e!==n&&(He(fc,t),He(Ir,n))}function F0(t){fc.current===t&&(Qe(Ir),Qe(fc))}var st=cs(0);function Kd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bm=[];function U0(){for(var t=0;t<bm.length;t++)bm[t]._workInProgressVersionPrimary=null;bm.length=0}var dd=pi.ReactCurrentDispatcher,Im=pi.ReactCurrentBatchConfig,Qs=0,at=null,bt=null,Pt=null,Qd=!1,Ul=!1,pc=0,xk=0;function Wt(){throw Error(q(321))}function B0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function $0(t,e,n,r,i,s){if(Qs=s,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dd.current=t===null||t.memoizedState===null?Sk:Rk,t=n(r,i),Ul){s=0;do{if(Ul=!1,pc=0,25<=s)throw Error(q(301));s+=1,Pt=bt=null,e.updateQueue=null,dd.current=Ak,t=n(r,i)}while(Ul)}if(dd.current=Yd,e=bt!==null&&bt.next!==null,Qs=0,Pt=bt=at=null,Qd=!1,e)throw Error(q(300));return t}function z0(){var t=pc!==0;return pc=0,t}function Er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?at.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function qn(){if(bt===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var e=Pt===null?at.memoizedState:Pt.next;if(e!==null)Pt=e,bt=t;else{if(t===null)throw Error(q(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Pt===null?at.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function gc(t,e){return typeof e=="function"?e(t):e}function Sm(t){var e=qn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=bt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Qs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,at.lanes|=d,Ys|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ur(r,e.memoizedState)||(gn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,at.lanes|=s,Ys|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rm(t){var e=qn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ur(s,e.memoizedState)||(gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fT(){}function mT(t,e){var n=at,r=qn(),i=e(),s=!ur(r.memoizedState,i);if(s&&(r.memoizedState=i,gn=!0),r=r.queue,W0(yT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,yc(9,gT.bind(null,n,r,i,e),void 0,null),Nt===null)throw Error(q(349));Qs&30||pT(n,e,i)}return i}function pT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gT(t,e,n,r){e.value=n,e.getSnapshot=r,vT(e)&&wT(t)}function yT(t,e,n){return n(function(){vT(e)&&wT(t)})}function vT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function wT(t){var e=li(t,1);e!==null&&cr(e,t,1,-1)}function rw(t){var e=Er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gc,lastRenderedState:t},e.queue=t,t=t.dispatch=Ik.bind(null,at,t),[e.memoizedState,t]}function yc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _T(){return qn().memoizedState}function hd(t,e,n,r){var i=Er();at.flags|=t,i.memoizedState=yc(1|e,n,void 0,r===void 0?null:r)}function Hh(t,e,n,r){var i=qn();r=r===void 0?null:r;var s=void 0;if(bt!==null){var o=bt.memoizedState;if(s=o.destroy,r!==null&&B0(r,o.deps)){i.memoizedState=yc(e,n,s,r);return}}at.flags|=t,i.memoizedState=yc(1|e,n,s,r)}function iw(t,e){return hd(8390656,8,t,e)}function W0(t,e){return Hh(2048,8,t,e)}function ET(t,e){return Hh(4,2,t,e)}function xT(t,e){return Hh(4,4,t,e)}function TT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bT(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4,4,TT.bind(null,e,t),n)}function H0(){}function IT(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ST(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RT(t,e,n){return Qs&21?(ur(n,e)||(n=Nx(),at.lanes|=n,Ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function Tk(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Im.transition;Im.transition={};try{t(!1),e()}finally{je=n,Im.transition=r}}function AT(){return qn().memoizedState}function bk(t,e,n){var r=Gi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CT(t))PT(e,n);else if(n=uT(t,e,n,r),n!==null){var i=sn();cr(n,t,r,i),kT(n,e,r)}}function Ik(t,e,n){var r=Gi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CT(t))PT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ur(a,o)){var l=e.interleaved;l===null?(i.next=i,j0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uT(t,e,i,r),n!==null&&(i=sn(),cr(n,t,r,i),kT(n,e,r))}}function CT(t){var e=t.alternate;return t===at||e!==null&&e===at}function PT(t,e){Ul=Qd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,x0(t,n)}}var Yd={readContext:Hn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},Sk={readContext:Hn,useCallback:function(t,e){return Er().memoizedState=[t,e===void 0?null:e],t},useContext:Hn,useEffect:iw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hd(4194308,4,TT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hd(4194308,4,t,e)},useInsertionEffect:function(t,e){return hd(4,2,t,e)},useMemo:function(t,e){var n=Er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bk.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=Er();return t={current:t},e.memoizedState=t},useState:rw,useDebugValue:H0,useDeferredValue:function(t){return Er().memoizedState=t},useTransition:function(){var t=rw(!1),e=t[0];return t=Tk.bind(null,t[1]),Er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,i=Er();if(et){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Nt===null)throw Error(q(349));Qs&30||pT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,iw(yT.bind(null,r,s,t),[t]),r.flags|=2048,yc(9,gT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Er(),e=Nt.identifierPrefix;if(et){var n=Qr,r=Kr;n=(r&~(1<<32-lr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rk={readContext:Hn,useCallback:IT,useContext:Hn,useEffect:W0,useImperativeHandle:bT,useInsertionEffect:ET,useLayoutEffect:xT,useMemo:ST,useReducer:Sm,useRef:_T,useState:function(){return Sm(gc)},useDebugValue:H0,useDeferredValue:function(t){var e=qn();return RT(e,bt.memoizedState,t)},useTransition:function(){var t=Sm(gc)[0],e=qn().memoizedState;return[t,e]},useMutableSource:fT,useSyncExternalStore:mT,useId:AT,unstable_isNewReconciler:!1},Ak={readContext:Hn,useCallback:IT,useContext:Hn,useEffect:W0,useImperativeHandle:bT,useInsertionEffect:ET,useLayoutEffect:xT,useMemo:ST,useReducer:Rm,useRef:_T,useState:function(){return Rm(gc)},useDebugValue:H0,useDeferredValue:function(t){var e=qn();return bt===null?e.memoizedState=t:RT(e,bt.memoizedState,t)},useTransition:function(){var t=Rm(gc)[0],e=qn().memoizedState;return[t,e]},useMutableSource:fT,useSyncExternalStore:mT,useId:AT,unstable_isNewReconciler:!1};function nr(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qh={isMounted:function(t){return(t=t._reactInternals)?ao(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Gi(t),s=ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(cr(e,t,i,r),ud(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Gi(t),s=ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hi(t,s,i),e!==null&&(cr(e,t,i,r),ud(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),r=Gi(t),i=ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hi(t,i,r),e!==null&&(cr(e,t,r,n),ud(e,t,r))}};function sw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!cc(n,r)||!cc(i,s):!0}function NT(t,e,n){var r=!1,i=es,s=e.contextType;return typeof s=="object"&&s!==null?s=Hn(s):(i=vn(e)?Gs:Zt.current,r=e.contextTypes,s=(r=r!=null)?da(t,i):es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ow(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qh.enqueueReplaceState(e,e.state,null)}function Xp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},V0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Hn(s):(s=vn(e)?Gs:Zt.current,i.context=da(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qh.enqueueReplaceState(i,i.state,null),Gd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function pa(t,e){try{var n="",r=e;do n+=nP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Am(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ck=typeof WeakMap=="function"?WeakMap:Map;function DT(t,e,n){n=ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jd||(Jd=!0,lg=r),Jp(t,e)},n}function LT(t,e,n){n=ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jp(t,e),typeof r!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function aw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ck;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zk.bind(null,t,e,n),e.then(t,t))}function lw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ei(-1,1),e.tag=2,Hi(n,e,1))),n.lanes|=1),t)}var Pk=pi.ReactCurrentOwner,gn=!1;function nn(t,e,n,r){e.child=t===null?cT(e,null,n,r):fa(e,t.child,n,r)}function uw(t,e,n,r,i){n=n.render;var s=e.ref;return na(e,i),r=$0(t,e,n,r,s,i),n=z0(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(et&&n&&P0(e),e.flags|=1,nn(t,e,r,i),e.child)}function dw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Z0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,MT(t,e,s,r,i)):(t=gd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:cc,n(o,r)&&t.ref===e.ref)return ci(t,e,i)}return e.flags|=1,t=Ki(s,r),t.ref=e.ref,t.return=e,e.child=t}function MT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(cc(s,r)&&t.ref===e.ref)if(gn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,ci(t,e,i)}return Zp(t,e,n,r,i)}function jT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(qo,bn),bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(qo,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,He(qo,bn),bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,He(qo,bn),bn|=r;return nn(t,e,i,n),e.child}function VT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zp(t,e,n,r,i){var s=vn(n)?Gs:Zt.current;return s=da(e,s),na(e,i),n=$0(t,e,n,r,s,i),r=z0(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ci(t,e,i)):(et&&r&&P0(e),e.flags|=1,nn(t,e,n,i),e.child)}function hw(t,e,n,r,i){if(vn(n)){var s=!0;$d(e)}else s=!1;if(na(e,i),e.stateNode===null)fd(t,e),NT(e,n,r),Xp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Hn(c):(c=vn(n)?Gs:Zt.current,c=da(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ow(e,o,r,c),Ci=!1;var m=e.memoizedState;o.state=m,Gd(e,r,o,i),l=e.memoizedState,a!==r||m!==l||yn.current||Ci?(typeof d=="function"&&(Yp(e,n,d,r),l=e.memoizedState),(a=Ci||sw(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:nr(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Hn(l):(l=vn(n)?Gs:Zt.current,l=da(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&ow(e,o,r,l),Ci=!1,m=e.memoizedState,o.state=m,Gd(e,r,o,i);var _=e.memoizedState;a!==h||m!==_||yn.current||Ci?(typeof y=="function"&&(Yp(e,n,y,r),_=e.memoizedState),(c=Ci||sw(e,n,c,r,m,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return eg(t,e,n,r,s,i)}function eg(t,e,n,r,i,s){VT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&X1(e,n,!1),ci(t,e,s);r=e.stateNode,Pk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fa(e,t.child,null,s),e.child=fa(e,null,a,s)):nn(t,e,a,s),e.memoizedState=r.state,i&&X1(e,n,!0),e.child}function OT(t){var e=t.stateNode;e.pendingContext?Y1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y1(t,e.context,!1),O0(t,e.containerInfo)}function fw(t,e,n,r,i){return ha(),N0(i),e.flags|=256,nn(t,e,n,r),e.child}var tg={dehydrated:null,treeContext:null,retryLane:0};function ng(t){return{baseLanes:t,cachePool:null,transitions:null}}function FT(t,e,n){var r=e.pendingProps,i=st.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(st,i&1),t===null)return Kp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qh(o,r,0,null),t=zs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ng(n),e.memoizedState=tg,t):q0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ki(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ki(a,s):(s=zs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ng(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tg,r}return s=t.child,t=s.sibling,r=Ki(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function q0(t,e){return e=Qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ju(t,e,n,r){return r!==null&&N0(r),fa(e,t.child,null,n),t=q0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Am(Error(q(422))),ju(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qh({mode:"visible",children:r.children},i,0,null),s=zs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fa(e,t.child,null,o),e.child.memoizedState=ng(o),e.memoizedState=tg,s);if(!(e.mode&1))return ju(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Am(s,r,void 0),ju(t,e,o,r)}if(a=(o&t.childLanes)!==0,gn||a){if(r=Nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,li(t,i),cr(r,t,i,-1))}return J0(),r=Am(Error(q(421))),ju(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Wk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Sn=Wi(i.nextSibling),Cn=e,et=!0,sr=null,t!==null&&(Bn[$n++]=Kr,Bn[$n++]=Qr,Bn[$n++]=Ks,Kr=t.id,Qr=t.overflow,Ks=e),e=q0(e,r.children),e.flags|=4096,e)}function mw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qp(t.return,e,n)}function Cm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function UT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nn(t,e,r.children,n),r=st.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mw(t,n,e);else if(t.tag===19)mw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(st,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cm(e,!0,n,null,s);break;case"together":Cm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Ki(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ki(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nk(t,e,n){switch(e.tag){case 3:OT(e),ha();break;case 5:hT(e);break;case 1:vn(e.type)&&$d(e);break;case 4:O0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(Hd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?FT(t,e,n):(He(st,st.current&1),t=ci(t,e,n),t!==null?t.sibling:null);He(st,st.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return UT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(st,st.current),r)break;return null;case 22:case 23:return e.lanes=0,jT(t,e,n)}return ci(t,e,n)}var BT,rg,$T,zT;BT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rg=function(){};$T=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vs(Ir.current);var s=null;switch(n){case"input":i=Ip(t,i),r=Ip(t,r),s=[];break;case"select":i=lt({},i,{value:void 0}),r=lt({},r,{value:void 0}),s=[];break;case"textarea":i=Ap(t,i),r=Ap(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ud)}Pp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zT=function(t,e,n,r){n!==r&&(e.flags|=4)};function ml(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Dk(t,e,n){var r=e.pendingProps;switch(k0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return vn(e.type)&&Bd(),Ht(e),null;case 3:return r=e.stateNode,ma(),Qe(yn),Qe(Zt),U0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sr!==null&&(dg(sr),sr=null))),rg(t,e),Ht(e),null;case 5:F0(e);var i=Vs(mc.current);if(n=e.type,t!==null&&e.stateNode!=null)$T(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Ht(e),null}if(t=Vs(Ir.current),Lu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xr]=e,r[hc]=s,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(i=0;i<Sl.length;i++)Ke(Sl[i],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":T1(r,s),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",r);break;case"textarea":I1(r,s),Ke("invalid",r)}Pp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Du(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Du(r.textContent,a,t),i=["children",""+a]):nc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ke("scroll",r)}switch(n){case"input":Iu(r),b1(r,s,!0);break;case"textarea":Iu(r),S1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ud)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xr]=e,t[hc]=r,BT(t,e,!1,!1),e.stateNode=t;e:{switch(o=kp(n,r),n){case"dialog":Ke("cancel",t),Ke("close",t),i=r;break;case"iframe":case"object":case"embed":Ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<Sl.length;i++)Ke(Sl[i],t);i=r;break;case"source":Ke("error",t),i=r;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=r;break;case"details":Ke("toggle",t),i=r;break;case"input":T1(t,r),i=Ip(t,r),Ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=lt({},r,{value:void 0}),Ke("invalid",t);break;case"textarea":I1(t,r),i=Ap(t,r),Ke("invalid",t);break;default:i=r}Pp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_x(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rc(t,l):typeof l=="number"&&rc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ke("scroll",t):l!=null&&g0(t,s,l,o))}switch(n){case"input":Iu(t),b1(t,r,!1);break;case"textarea":Iu(t),S1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Jo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Jo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ud)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)zT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Vs(mc.current),Vs(Ir.current),Lu(e)){if(r=e.stateNode,n=e.memoizedProps,r[xr]=e,(s=r.nodeValue!==n)&&(t=Cn,t!==null))switch(t.tag){case 3:Du(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Du(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xr]=e,e.stateNode=r}return Ht(e),null;case 13:if(Qe(st),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&Sn!==null&&e.mode&1&&!(e.flags&128))aT(),ha(),e.flags|=98560,s=!1;else if(s=Lu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[xr]=e}else ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),s=!1}else sr!==null&&(dg(sr),sr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?It===0&&(It=3):J0())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return ma(),rg(t,e),t===null&&uc(e.stateNode.containerInfo),Ht(e),null;case 10:return M0(e.type._context),Ht(e),null;case 17:return vn(e.type)&&Bd(),Ht(e),null;case 19:if(Qe(st),s=e.memoizedState,s===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ml(s,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kd(t),o!==null){for(e.flags|=128,ml(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(st,st.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>ga&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304)}else{if(!r)if(t=Kd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ml(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!et)return Ht(e),null}else 2*pt()-s.renderingStartTime>ga&&n!==1073741824&&(e.flags|=128,r=!0,ml(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=st.current,He(st,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return X0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function Lk(t,e){switch(k0(e),e.tag){case 1:return vn(e.type)&&Bd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ma(),Qe(yn),Qe(Zt),U0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return F0(e),null;case 13:if(Qe(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ha()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(st),null;case 4:return ma(),null;case 10:return M0(e.type._context),null;case 22:case 23:return X0(),null;case 24:return null;default:return null}}var Vu=!1,Qt=!1,Mk=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function ig(t,e,n){try{n()}catch(r){dt(t,e,r)}}var pw=!1;function jk(t,e){if(Bp=Vd,t=Kx(),C0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var y;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($p={focusedElem:t,selectionRange:n},Vd=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,R=_.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:nr(e.type,x),R);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(P){dt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return _=pw,pw=!1,_}function Bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ig(e,n,s)}i=i.next}while(i!==r)}}function Gh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WT(t){var e=t.alternate;e!==null&&(t.alternate=null,WT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[hc],delete e[Hp],delete e[vk],delete e[wk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HT(t){return t.tag===5||t.tag===3||t.tag===4}function gw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function og(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ud));else if(r!==4&&(t=t.child,t!==null))for(og(t,e,n),t=t.sibling;t!==null;)og(t,e,n),t=t.sibling}function ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}var jt=null,rr=!1;function bi(t,e,n){for(n=n.child;n!==null;)qT(t,e,n),n=n.sibling}function qT(t,e,n){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(Fh,n)}catch{}switch(n.tag){case 5:Qt||Ho(n,e);case 6:var r=jt,i=rr;jt=null,bi(t,e,n),jt=r,rr=i,jt!==null&&(rr?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(rr?(t=jt,n=n.stateNode,t.nodeType===8?xm(t.parentNode,n):t.nodeType===1&&xm(t,n),ac(t)):xm(jt,n.stateNode));break;case 4:r=jt,i=rr,jt=n.stateNode.containerInfo,rr=!0,bi(t,e,n),jt=r,rr=i;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ig(n,e,o),i=i.next}while(i!==r)}bi(t,e,n);break;case 1:if(!Qt&&(Ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){dt(n,e,a)}bi(t,e,n);break;case 21:bi(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,bi(t,e,n),Qt=r):bi(t,e,n);break;default:bi(t,e,n)}}function yw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Mk),e.forEach(function(r){var i=Hk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,rr=!1;break e;case 3:jt=a.stateNode.containerInfo,rr=!0;break e;case 4:jt=a.stateNode.containerInfo,rr=!0;break e}a=a.return}if(jt===null)throw Error(q(160));qT(s,o,i),jt=null,rr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){dt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GT(e,t),e=e.sibling}function GT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tr(e,t),_r(t),r&4){try{Bl(3,t,t.return),Gh(3,t)}catch(x){dt(t,t.return,x)}try{Bl(5,t,t.return)}catch(x){dt(t,t.return,x)}}break;case 1:tr(e,t),_r(t),r&512&&n!==null&&Ho(n,n.return);break;case 5:if(tr(e,t),_r(t),r&512&&n!==null&&Ho(n,n.return),t.flags&32){var i=t.stateNode;try{rc(i,"")}catch(x){dt(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&px(i,s),kp(a,o);var c=kp(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?_x(i,h):d==="dangerouslySetInnerHTML"?vx(i,h):d==="children"?rc(i,h):g0(i,d,h,c)}switch(a){case"input":Sp(i,s);break;case"textarea":gx(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Jo(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Jo(i,!!s.multiple,s.defaultValue,!0):Jo(i,!!s.multiple,s.multiple?[]:"",!1))}i[hc]=s}catch(x){dt(t,t.return,x)}}break;case 6:if(tr(e,t),_r(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){dt(t,t.return,x)}}break;case 3:if(tr(e,t),_r(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ac(e.containerInfo)}catch(x){dt(t,t.return,x)}break;case 4:tr(e,t),_r(t);break;case 13:tr(e,t),_r(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Q0=pt())),r&4&&yw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(c=Qt)||d,tr(e,t),Qt=c):tr(e,t),_r(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(h=se=d;se!==null;){switch(m=se,y=m.child,m.tag){case 0:case 11:case 14:case 15:Bl(4,m,m.return);break;case 1:Ho(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(x){dt(r,n,x)}}break;case 5:Ho(m,m.return);break;case 22:if(m.memoizedState!==null){ww(h);continue}}y!==null?(y.return=m,se=y):ww(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wx("display",o))}catch(x){dt(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){dt(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tr(e,t),_r(t),r&4&&yw(t);break;case 21:break;default:tr(e,t),_r(t)}}function _r(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HT(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rc(i,""),r.flags&=-33);var s=gw(t);ag(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gw(t);og(t,a,o);break;default:throw Error(q(161))}}catch(l){dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vk(t,e,n){se=t,KT(t)}function KT(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Qt;a=Vu;var c=Qt;if(Vu=o,(Qt=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?_w(i):l!==null?(l.return=o,se=l):_w(i);for(;s!==null;)se=s,KT(s),s=s.sibling;se=i,Vu=a,Qt=c}vw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):vw(t)}}function vw(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||Gh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:nr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ac(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Qt||e.flags&512&&sg(e)}catch(m){dt(e,e.return,m)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function ww(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function _w(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gh(4,e)}catch(l){dt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dt(e,i,l)}}var s=e.return;try{sg(e)}catch(l){dt(e,s,l)}break;case 5:var o=e.return;try{sg(e)}catch(l){dt(e,o,l)}}}catch(l){dt(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var Ok=Math.ceil,Xd=pi.ReactCurrentDispatcher,G0=pi.ReactCurrentOwner,Wn=pi.ReactCurrentBatchConfig,ke=0,Nt=null,xt=null,Ft=0,bn=0,qo=cs(0),It=0,vc=null,Ys=0,Kh=0,K0=0,$l=null,mn=null,Q0=0,ga=1/0,Hr=null,Jd=!1,lg=null,qi=null,Ou=!1,Oi=null,Zd=0,zl=0,cg=null,md=-1,pd=0;function sn(){return ke&6?pt():md!==-1?md:md=pt()}function Gi(t){return t.mode&1?ke&2&&Ft!==0?Ft&-Ft:Ek.transition!==null?(pd===0&&(pd=Nx()),pd):(t=je,t!==0||(t=window.event,t=t===void 0?16:Fx(t.type)),t):1}function cr(t,e,n,r){if(50<zl)throw zl=0,cg=null,Error(q(185));Lc(t,n,r),(!(ke&2)||t!==Nt)&&(t===Nt&&(!(ke&2)&&(Kh|=n),It===4&&Ni(t,Ft)),wn(t,r),n===1&&ke===0&&!(e.mode&1)&&(ga=pt()+500,Wh&&us()))}function wn(t,e){var n=t.callbackNode;EP(t,e);var r=jd(t,t===Nt?Ft:0);if(r===0)n!==null&&C1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&C1(n),e===1)t.tag===0?_k(Ew.bind(null,t)):iT(Ew.bind(null,t)),gk(function(){!(ke&6)&&us()}),n=null;else{switch(Dx(r)){case 1:n=E0;break;case 4:n=Px;break;case 16:n=Md;break;case 536870912:n=kx;break;default:n=Md}n=nb(n,QT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QT(t,e){if(md=-1,pd=0,ke&6)throw Error(q(327));var n=t.callbackNode;if(ra()&&t.callbackNode!==n)return null;var r=jd(t,t===Nt?Ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eh(t,r);else{e=r;var i=ke;ke|=2;var s=XT();(Nt!==t||Ft!==e)&&(Hr=null,ga=pt()+500,$s(t,e));do try{Bk();break}catch(a){YT(t,a)}while(!0);L0(),Xd.current=s,ke=i,xt!==null?e=0:(Nt=null,Ft=0,e=It)}if(e!==0){if(e===2&&(i=jp(t),i!==0&&(r=i,e=ug(t,i))),e===1)throw n=vc,$s(t,0),Ni(t,r),wn(t,pt()),n;if(e===6)Ni(t,r);else{if(i=t.current.alternate,!(r&30)&&!Fk(i)&&(e=eh(t,r),e===2&&(s=jp(t),s!==0&&(r=s,e=ug(t,s))),e===1))throw n=vc,$s(t,0),Ni(t,r),wn(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:As(t,mn,Hr);break;case 3:if(Ni(t,r),(r&130023424)===r&&(e=Q0+500-pt(),10<e)){if(jd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wp(As.bind(null,t,mn,Hr),e);break}As(t,mn,Hr);break;case 4:if(Ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-lr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ok(r/1960))-r,10<r){t.timeoutHandle=Wp(As.bind(null,t,mn,Hr),r);break}As(t,mn,Hr);break;case 5:As(t,mn,Hr);break;default:throw Error(q(329))}}}return wn(t,pt()),t.callbackNode===n?QT.bind(null,t):null}function ug(t,e){var n=$l;return t.current.memoizedState.isDehydrated&&($s(t,e).flags|=256),t=eh(t,e),t!==2&&(e=mn,mn=n,e!==null&&dg(e)),t}function dg(t){mn===null?mn=t:mn.push.apply(mn,t)}function Fk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ur(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ni(t,e){for(e&=~K0,e&=~Kh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-lr(e),r=1<<n;t[n]=-1,e&=~r}}function Ew(t){if(ke&6)throw Error(q(327));ra();var e=jd(t,0);if(!(e&1))return wn(t,pt()),null;var n=eh(t,e);if(t.tag!==0&&n===2){var r=jp(t);r!==0&&(e=r,n=ug(t,r))}if(n===1)throw n=vc,$s(t,0),Ni(t,e),wn(t,pt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,mn,Hr),wn(t,pt()),null}function Y0(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(ga=pt()+500,Wh&&us())}}function Xs(t){Oi!==null&&Oi.tag===0&&!(ke&6)&&ra();var e=ke;ke|=1;var n=Wn.transition,r=je;try{if(Wn.transition=null,je=1,t)return t()}finally{je=r,Wn.transition=n,ke=e,!(ke&6)&&us()}}function X0(){bn=qo.current,Qe(qo)}function $s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pk(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(k0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bd();break;case 3:ma(),Qe(yn),Qe(Zt),U0();break;case 5:F0(r);break;case 4:ma();break;case 13:Qe(st);break;case 19:Qe(st);break;case 10:M0(r.type._context);break;case 22:case 23:X0()}n=n.return}if(Nt=t,xt=t=Ki(t.current,null),Ft=bn=e,It=0,vc=null,K0=Kh=Ys=0,mn=$l=null,js!==null){for(e=0;e<js.length;e++)if(n=js[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}js=null}return t}function YT(t,e){do{var n=xt;try{if(L0(),dd.current=Yd,Qd){for(var r=at.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qd=!1}if(Qs=0,Pt=bt=at=null,Ul=!1,pc=0,G0.current=null,n===null||n.return===null){It=1,vc=e,xt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=lw(o);if(y!==null){y.flags&=-257,cw(y,o,a,s,e),y.mode&1&&aw(s,c,e),e=y,l=c;var _=e.updateQueue;if(_===null){var x=new Set;x.add(l),e.updateQueue=x}else _.add(l);break e}else{if(!(e&1)){aw(s,c,e),J0();break e}l=Error(q(426))}}else if(et&&a.mode&1){var R=lw(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),cw(R,o,a,s,e),N0(pa(l,a));break e}}s=l=pa(l,a),It!==4&&(It=2),$l===null?$l=[s]:$l.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=DT(s,l,e);tw(s,b);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(qi===null||!qi.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=LT(s,a,e);tw(s,P);break e}}s=s.return}while(s!==null)}ZT(n)}catch(j){e=j,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function XT(){var t=Xd.current;return Xd.current=Yd,t===null?Yd:t}function J0(){(It===0||It===3||It===2)&&(It=4),Nt===null||!(Ys&268435455)&&!(Kh&268435455)||Ni(Nt,Ft)}function eh(t,e){var n=ke;ke|=2;var r=XT();(Nt!==t||Ft!==e)&&(Hr=null,$s(t,e));do try{Uk();break}catch(i){YT(t,i)}while(!0);if(L0(),ke=n,Xd.current=r,xt!==null)throw Error(q(261));return Nt=null,Ft=0,It}function Uk(){for(;xt!==null;)JT(xt)}function Bk(){for(;xt!==null&&!hP();)JT(xt)}function JT(t){var e=tb(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?ZT(t):xt=e,G0.current=null}function ZT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Lk(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,xt=null;return}}else if(n=Dk(n,e,bn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);It===0&&(It=5)}function As(t,e,n){var r=je,i=Wn.transition;try{Wn.transition=null,je=1,$k(t,e,n,r)}finally{Wn.transition=i,je=r}return null}function $k(t,e,n,r){do ra();while(Oi!==null);if(ke&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(xP(t,s),t===Nt&&(xt=Nt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ou||(Ou=!0,nb(Md,function(){return ra(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wn.transition,Wn.transition=null;var o=je;je=1;var a=ke;ke|=4,G0.current=null,jk(t,n),GT(n,t),lk($p),Vd=!!Bp,$p=Bp=null,t.current=n,Vk(n),fP(),ke=a,je=o,Wn.transition=s}else t.current=n;if(Ou&&(Ou=!1,Oi=t,Zd=i),s=t.pendingLanes,s===0&&(qi=null),gP(n.stateNode),wn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jd)throw Jd=!1,t=lg,lg=null,t;return Zd&1&&t.tag!==0&&ra(),s=t.pendingLanes,s&1?t===cg?zl++:(zl=0,cg=t):zl=0,us(),null}function ra(){if(Oi!==null){var t=Dx(Zd),e=Wn.transition,n=je;try{if(Wn.transition=null,je=16>t?16:t,Oi===null)var r=!1;else{if(t=Oi,Oi=null,Zd=0,ke&6)throw Error(q(331));var i=ke;for(ke|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Bl(8,d,s)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var m=d.sibling,y=d.return;if(WT(d),d===c){se=null;break}if(m!==null){m.return=y,se=m;break}se=y}}}var _=s.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var R=x.sibling;x.sibling=null,x=R}while(x!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bl(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,se=b;break e}se=s.return}}var w=t.current;for(se=w;se!==null;){o=se;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,se=E;else e:for(o=w;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gh(9,a)}}catch(j){dt(a,a.return,j)}if(a===o){se=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,se=P;break e}se=a.return}}if(ke=i,us(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(Fh,t)}catch{}r=!0}return r}finally{je=n,Wn.transition=e}}return!1}function xw(t,e,n){e=pa(n,e),e=DT(t,e,1),t=Hi(t,e,1),e=sn(),t!==null&&(Lc(t,1,e),wn(t,e))}function dt(t,e,n){if(t.tag===3)xw(t,t,n);else for(;e!==null;){if(e.tag===3){xw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))){t=pa(n,t),t=LT(e,t,1),e=Hi(e,t,1),t=sn(),e!==null&&(Lc(e,1,t),wn(e,t));break}}e=e.return}}function zk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(Ft&n)===n&&(It===4||It===3&&(Ft&130023424)===Ft&&500>pt()-Q0?$s(t,0):K0|=n),wn(t,e)}function eb(t,e){e===0&&(t.mode&1?(e=Au,Au<<=1,!(Au&130023424)&&(Au=4194304)):e=1);var n=sn();t=li(t,e),t!==null&&(Lc(t,e,n),wn(t,n))}function Wk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eb(t,n)}function Hk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),eb(t,n)}var tb;tb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,Nk(t,e,n);gn=!!(t.flags&131072)}else gn=!1,et&&e.flags&1048576&&sT(e,Wd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fd(t,e),t=e.pendingProps;var i=da(e,Zt.current);na(e,n),i=$0(null,e,r,t,i,n);var s=z0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(s=!0,$d(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,V0(e),i.updater=qh,e.stateNode=i,i._reactInternals=e,Xp(e,r,t,n),e=eg(null,e,r,!0,s,n)):(e.tag=0,et&&s&&P0(e),nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Gk(r),t=nr(r,t),i){case 0:e=Zp(null,e,r,t,n);break e;case 1:e=hw(null,e,r,t,n);break e;case 11:e=uw(null,e,r,t,n);break e;case 14:e=dw(null,e,r,nr(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nr(r,i),Zp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nr(r,i),hw(t,e,r,i,n);case 3:e:{if(OT(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dT(t,e),Gd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=pa(Error(q(423)),e),e=fw(t,e,r,n,i);break e}else if(r!==i){i=pa(Error(q(424)),e),e=fw(t,e,r,n,i);break e}else for(Sn=Wi(e.stateNode.containerInfo.firstChild),Cn=e,et=!0,sr=null,n=cT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ha(),r===i){e=ci(t,e,n);break e}nn(t,e,r,n)}e=e.child}return e;case 5:return hT(e),t===null&&Kp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zp(r,i)?o=null:s!==null&&zp(r,s)&&(e.flags|=32),VT(t,e),nn(t,e,o,n),e.child;case 6:return t===null&&Kp(e),null;case 13:return FT(t,e,n);case 4:return O0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fa(e,null,r,n):nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nr(r,i),uw(t,e,r,i,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,He(Hd,r._currentValue),r._currentValue=o,s!==null)if(ur(s.value,o)){if(s.children===i.children&&!yn.current){e=ci(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ei(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,na(e,n),i=Hn(i),r=r(i),e.flags|=1,nn(t,e,r,n),e.child;case 14:return r=e.type,i=nr(r,e.pendingProps),i=nr(r.type,i),dw(t,e,r,i,n);case 15:return MT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:nr(r,i),fd(t,e),e.tag=1,vn(r)?(t=!0,$d(e)):t=!1,na(e,n),NT(e,r,i),Xp(e,r,i,n),eg(null,e,r,!0,t,n);case 19:return UT(t,e,n);case 22:return jT(t,e,n)}throw Error(q(156,e.tag))};function nb(t,e){return Cx(t,e)}function qk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,r){return new qk(t,e,n,r)}function Z0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gk(t){if(typeof t=="function")return Z0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v0)return 11;if(t===w0)return 14}return 2}function Ki(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Z0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jo:return zs(n.children,i,s,e);case y0:o=8,i|=8;break;case Ep:return t=zn(12,n,e,i|2),t.elementType=Ep,t.lanes=s,t;case xp:return t=zn(13,n,e,i),t.elementType=xp,t.lanes=s,t;case Tp:return t=zn(19,n,e,i),t.elementType=Tp,t.lanes=s,t;case hx:return Qh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ux:o=10;break e;case dx:o=9;break e;case v0:o=11;break e;case w0:o=14;break e;case Ai:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=zn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zs(t,e,n,r){return t=zn(7,t,r,e),t.lanes=n,t}function Qh(t,e,n,r){return t=zn(22,t,r,e),t.elementType=hx,t.lanes=n,t.stateNode={isHidden:!1},t}function Pm(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function km(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dm(0),this.expirationTimes=dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ey(t,e,n,r,i,s,o,a,l){return t=new Kk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},V0(s),t}function Qk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rb(t){if(!t)return es;t=t._reactInternals;e:{if(ao(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(vn(n))return rT(t,n,e)}return e}function ib(t,e,n,r,i,s,o,a,l){return t=ey(n,r,!0,t,i,s,o,a,l),t.context=rb(null),n=t.current,r=sn(),i=Gi(n),s=ei(r,i),s.callback=e??null,Hi(n,s,i),t.current.lanes=i,Lc(t,i,r),wn(t,r),t}function Yh(t,e,n,r){var i=e.current,s=sn(),o=Gi(i);return n=rb(n),e.context===null?e.context=n:e.pendingContext=n,e=ei(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hi(i,e,o),t!==null&&(cr(t,i,o,s),ud(t,i,o)),o}function th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ty(t,e){Tw(t,e),(t=t.alternate)&&Tw(t,e)}function Yk(){return null}var sb=typeof reportError=="function"?reportError:function(t){console.error(t)};function ny(t){this._internalRoot=t}Xh.prototype.render=ny.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Yh(t,e,null,null)};Xh.prototype.unmount=ny.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xs(function(){Yh(null,t,null,null)}),e[ai]=null}};function Xh(t){this._internalRoot=t}Xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=jx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ki.length&&e!==0&&e<ki[n].priority;n++);ki.splice(n,0,t),n===0&&Ox(t)}};function ry(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bw(){}function Xk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=th(o);s.call(c)}}var o=ib(e,r,t,0,null,!1,!1,"",bw);return t._reactRootContainer=o,t[ai]=o.current,uc(t.nodeType===8?t.parentNode:t),Xs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=th(l);a.call(c)}}var l=ey(t,0,!1,null,null,!1,!1,"",bw);return t._reactRootContainer=l,t[ai]=l.current,uc(t.nodeType===8?t.parentNode:t),Xs(function(){Yh(e,l,n,r)}),l}function Zh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=th(o);a.call(l)}}Yh(e,o,t,i)}else o=Xk(n,e,t,i,r);return th(o)}Lx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Il(e.pendingLanes);n!==0&&(x0(e,n|1),wn(e,pt()),!(ke&6)&&(ga=pt()+500,us()))}break;case 13:Xs(function(){var r=li(t,1);if(r!==null){var i=sn();cr(r,t,1,i)}}),ty(t,1)}};T0=function(t){if(t.tag===13){var e=li(t,134217728);if(e!==null){var n=sn();cr(e,t,134217728,n)}ty(t,134217728)}};Mx=function(t){if(t.tag===13){var e=Gi(t),n=li(t,e);if(n!==null){var r=sn();cr(n,t,e,r)}ty(t,e)}};jx=function(){return je};Vx=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};Dp=function(t,e,n){switch(e){case"input":if(Sp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zh(r);if(!i)throw Error(q(90));mx(r),Sp(r,i)}}}break;case"textarea":gx(t,n);break;case"select":e=n.value,e!=null&&Jo(t,!!n.multiple,e,!1)}};Tx=Y0;bx=Xs;var Jk={usingClientEntryPoint:!1,Events:[jc,Uo,zh,Ex,xx,Y0]},pl={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zk={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rx(t),t===null?null:t.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||Yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{Fh=Fu.inject(Zk),br=Fu}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jk;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ry(e))throw Error(q(200));return Qk(t,e,null,n)};Ln.createRoot=function(t,e){if(!ry(t))throw Error(q(299));var n=!1,r="",i=sb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ey(t,1,!1,null,null,n,!1,r,i),t[ai]=e.current,uc(t.nodeType===8?t.parentNode:t),new ny(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=Rx(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return Xs(t)};Ln.hydrate=function(t,e,n){if(!Jh(e))throw Error(q(200));return Zh(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!ry(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ib(e,null,t,1,n??null,i,!1,s,o),t[ai]=e.current,uc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xh(e)};Ln.render=function(t,e,n){if(!Jh(e))throw Error(q(200));return Zh(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!Jh(t))throw Error(q(40));return t._reactRootContainer?(Xs(function(){Zh(null,null,t,!1,function(){t._reactRootContainer=null,t[ai]=null})}),!0):!1};Ln.unstable_batchedUpdates=Y0;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jh(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Zh(t,e,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function ob(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ob)}catch(t){console.error(t)}}ob(),ox.exports=Ln;var iy=ox.exports;const e5=K2(iy),t5=G2({__proto__:null,default:e5},[iy]);var Iw=iy;wp.createRoot=Iw.createRoot,wp.hydrateRoot=Iw.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ze(){return Ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ze.apply(this,arguments)}var Et;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Et||(Et={}));const Sw="popstate";function n5(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return wc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Js(i)}return i5(e,n,null,t)}function Te(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ya(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r5(){return Math.random().toString(36).substr(2,8)}function Rw(t,e){return{usr:t.state,key:t.key,idx:e}}function wc(t,e,n,r){return n===void 0&&(n=null),Ze({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ds(e):e,{state:n,key:e&&e.key||r||r5()})}function Js(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ds(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function i5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Et.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ze({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Et.Pop;let R=d(),b=R==null?null:R-c;c=R,l&&l({action:a,location:x.location,delta:b})}function m(R,b){a=Et.Push;let w=wc(x.location,R,b);c=d()+1;let E=Rw(w,c),P=x.createHref(w);try{o.pushState(E,"",P)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(P)}s&&l&&l({action:a,location:x.location,delta:1})}function y(R,b){a=Et.Replace;let w=wc(x.location,R,b);c=d();let E=Rw(w,c),P=x.createHref(w);o.replaceState(E,"",P),s&&l&&l({action:a,location:x.location,delta:0})}function _(R){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof R=="string"?R:Js(R);return w=w.replace(/ $/,"%20"),Te(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let x={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Sw,h),l=R,()=>{i.removeEventListener(Sw,h),l=null}},createHref(R){return e(i,R)},createURL:_,encodeLocation(R){let b=_(R);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:y,go(R){return o.go(R)}};return x}var Oe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Oe||(Oe={}));const s5=new Set(["lazy","caseSensitive","path","id","index","children"]);function o5(t){return t.index===!0}function nh(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Te(i.index!==!0||!i.children,"Cannot specify children on an index route"),Te(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),o5(i)){let l=Ze({},i,e(i),{id:a});return r[a]=l,l}else{let l=Ze({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=nh(i.children,e,o,r)),l}})}function Ds(t,e,n){return n===void 0&&(n="/"),yd(t,e,n,!1)}function yd(t,e,n,r){let i=typeof e=="string"?ds(e):e,s=ja(i.pathname||"/",n);if(s==null)return null;let o=ab(t);l5(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=w5(s);a=y5(o[l],c,r)}return a}function a5(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function ab(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Te(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ti([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Te(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ab(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:p5(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of lb(s.path))i(s,o,l)}),e}function lb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=lb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function l5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:g5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const c5=/^:[\w-]+$/,u5=3,d5=2,h5=1,f5=10,m5=-2,Aw=t=>t==="*";function p5(t,e){let n=t.split("/"),r=n.length;return n.some(Aw)&&(r+=m5),e&&(r+=d5),n.filter(i=>!Aw(i)).reduce((i,s)=>i+(c5.test(s)?u5:s===""?h5:f5),r)}function g5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function y5(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Cw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Cw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:ti([s,h.pathname]),pathnameBase:x5(ti([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=ti([s,h.pathnameBase]))}return o}function Cw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let x=a[h]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const _=a[h];return y&&!_?c[m]=void 0:c[m]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function v5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ya(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function w5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ya(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ja(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ds(t):t;return{pathname:n?n.startsWith("/")?n:E5(n,e):e,search:T5(r),hash:b5(i)}}function E5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Nm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ef(t,e){let n=cb(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ds(t):(i=Ze({},t),Te(!i.pathname||!i.pathname.includes("?"),Nm("?","pathname","search",i)),Te(!i.pathname||!i.pathname.includes("#"),Nm("#","pathname","hash",i)),Te(!i.search||!i.search.includes("#"),Nm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=_5(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ti=t=>t.join("/").replace(/\/\/+/g,"/"),x5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,b5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class rh{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function nf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ub=["post","put","patch","delete"],I5=new Set(ub),S5=["get",...ub],R5=new Set(S5),A5=new Set([301,302,303,307,308]),C5=new Set([307,308]),Dm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},P5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},sy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k5=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),db="remix-router-transitions";function N5(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Te(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let M=t.detectErrorBoundary;i=V=>({hasErrorBoundary:M(V)})}else i=k5;let s={},o=nh(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.dataStrategy||j5,d=t.patchRoutesOnNavigation,h=Ze({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,y=new Set,_=null,x=null,R=null,b=t.hydrationData!=null,w=Ds(o,t.history.location,l),E=null;if(w==null&&!d){let M=hn(404,{pathname:t.history.location.pathname}),{matches:V,route:F}=Uw(o);w=V,E={[F.id]:M}}w&&!t.hydrationData&&Ur(w,o,t.history.location.pathname).active&&(w=null);let P;if(w)if(w.some(M=>M.route.lazy))P=!1;else if(!w.some(M=>M.route.loader))P=!0;else if(h.v7_partialHydration){let M=t.hydrationData?t.hydrationData.loaderData:null,V=t.hydrationData?t.hydrationData.errors:null;if(V){let F=w.findIndex(W=>V[W.route.id]!==void 0);P=w.slice(0,F+1).every(W=>!fg(W.route,M,V))}else P=w.every(F=>!fg(F.route,M,V))}else P=t.hydrationData!=null;else if(P=!1,w=[],h.v7_partialHydration){let M=Ur(null,o,t.history.location.pathname);M.active&&M.matches&&(w=M.matches)}let j,k={historyAction:t.history.action,location:t.history.location,matches:w,initialized:P,navigation:Dm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||E,fetchers:new Map,blockers:new Map},S=Et.Pop,T=!1,I,C=!1,D=new Map,L=null,N=!1,X=!1,we=[],G=new Set,J=new Map,$=0,Q=-1,ie=new Map,ne=new Set,pe=new Map,Ee=new Map,Le=new Set,Ye=new Map,rt=new Map,Dt;function Ha(){if(m=t.history.listen(M=>{let{action:V,location:F,delta:W}=M;if(Dt){Dt(),Dt=void 0;return}ya(rt.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let re=Ja({currentLocation:k.location,nextLocation:F,historyAction:V});if(re&&W!=null){let ce=new Promise(de=>{Dt=de});t.history.go(W*-1),yi(re,{state:"blocked",location:F,proceed(){yi(re,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),ce.then(()=>t.history.go(W))},reset(){let de=new Map(k.blockers);de.set(re,gl),Ve({blockers:de})}});return}return Xn(V,F)}),n){Y5(e,D);let M=()=>X5(e,D);e.addEventListener("pagehide",M),L=()=>e.removeEventListener("pagehide",M)}return k.initialized||Xn(Et.Pop,k.location,{initialHydration:!0}),j}function _s(){m&&m(),L&&L(),y.clear(),I&&I.abort(),k.fetchers.forEach((M,V)=>Es(V)),k.blockers.forEach((M,V)=>cu(V))}function Qn(M){return y.add(M),()=>y.delete(M)}function Ve(M,V){V===void 0&&(V={}),k=Ze({},k,M);let F=[],W=[];h.v7_fetcherPersist&&k.fetchers.forEach((re,ce)=>{re.state==="idle"&&(Le.has(ce)?W.push(ce):F.push(ce))}),[...y].forEach(re=>re(k,{deletedFetchers:W,viewTransitionOpts:V.viewTransitionOpts,flushSync:V.flushSync===!0})),h.v7_fetcherPersist&&(F.forEach(re=>k.fetchers.delete(re)),W.forEach(re=>Es(re)))}function Yn(M,V,F){var W,re;let{flushSync:ce}=F===void 0?{}:F,de=k.actionData!=null&&k.navigation.formMethod!=null&&ir(k.navigation.formMethod)&&k.navigation.state==="loading"&&((W=M.state)==null?void 0:W._isRedirect)!==!0,oe;V.actionData?Object.keys(V.actionData).length>0?oe=V.actionData:oe=null:de?oe=k.actionData:oe=null;let ae=V.loaderData?Ow(k.loaderData,V.loaderData,V.matches||[],V.errors):k.loaderData,ee=k.blockers;ee.size>0&&(ee=new Map(ee),ee.forEach((xe,$e)=>ee.set($e,gl)));let le=T===!0||k.navigation.formMethod!=null&&ir(k.navigation.formMethod)&&((re=M.state)==null?void 0:re._isRedirect)!==!0;a&&(o=a,a=void 0),N||S===Et.Pop||(S===Et.Push?t.history.push(M,M.state):S===Et.Replace&&t.history.replace(M,M.state));let _e;if(S===Et.Pop){let xe=D.get(k.location.pathname);xe&&xe.has(M.pathname)?_e={currentLocation:k.location,nextLocation:M}:D.has(M.pathname)&&(_e={currentLocation:M,nextLocation:k.location})}else if(C){let xe=D.get(k.location.pathname);xe?xe.add(M.pathname):(xe=new Set([M.pathname]),D.set(k.location.pathname,xe)),_e={currentLocation:k.location,nextLocation:M}}Ve(Ze({},V,{actionData:oe,loaderData:ae,historyAction:S,location:M,initialized:!0,navigation:Dm,revalidation:"idle",restoreScrollPosition:el(M,V.matches||k.matches),preventScrollReset:le,blockers:ee}),{viewTransitionOpts:_e,flushSync:ce===!0}),S=Et.Pop,T=!1,C=!1,N=!1,X=!1,we=[]}async function _o(M,V){if(typeof M=="number"){t.history.go(M);return}let F=hg(k.location,k.matches,l,h.v7_prependBasename,M,h.v7_relativeSplatPath,V==null?void 0:V.fromRouteId,V==null?void 0:V.relative),{path:W,submission:re,error:ce}=Pw(h.v7_normalizeFormMethod,!1,F,V),de=k.location,oe=wc(k.location,W,V&&V.state);oe=Ze({},oe,t.history.encodeLocation(oe));let ae=V&&V.replace!=null?V.replace:void 0,ee=Et.Push;ae===!0?ee=Et.Replace:ae===!1||re!=null&&ir(re.formMethod)&&re.formAction===k.location.pathname+k.location.search&&(ee=Et.Replace);let le=V&&"preventScrollReset"in V?V.preventScrollReset===!0:void 0,_e=(V&&V.flushSync)===!0,xe=Ja({currentLocation:de,nextLocation:oe,historyAction:ee});if(xe){yi(xe,{state:"blocked",location:oe,proceed(){yi(xe,{state:"proceeding",proceed:void 0,reset:void 0,location:oe}),_o(M,V)},reset(){let $e=new Map(k.blockers);$e.set(xe,gl),Ve({blockers:$e})}});return}return await Xn(ee,oe,{submission:re,pendingError:ce,preventScrollReset:le,replace:V&&V.replace,enableViewTransition:V&&V.viewTransition,flushSync:_e})}function qa(){if(vt(),Ve({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Xn(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Xn(S||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:C===!0})}}async function Xn(M,V,F){I&&I.abort(),I=null,S=M,N=(F&&F.startUninterruptedRevalidation)===!0,Fr(k.location,k.matches),T=(F&&F.preventScrollReset)===!0,C=(F&&F.enableViewTransition)===!0;let W=a||o,re=F&&F.overrideNavigation,ce=Ds(W,V,l),de=(F&&F.flushSync)===!0,oe=Ur(ce,W,V.pathname);if(oe.active&&oe.matches&&(ce=oe.matches),!ce){let{error:Me,notFoundMatches:Ce,route:ze}=xo(V.pathname);Yn(V,{matches:Ce,loaderData:{},errors:{[ze.id]:Me}},{flushSync:de});return}if(k.initialized&&!X&&$5(k.location,V)&&!(F&&F.submission&&ir(F.submission.formMethod))){Yn(V,{matches:ce},{flushSync:de});return}I=new AbortController;let ae=Co(t.history,V,I.signal,F&&F.submission),ee;if(F&&F.pendingError)ee=[Ls(ce).route.id,{type:Oe.error,error:F.pendingError}];else if(F&&F.submission&&ir(F.submission.formMethod)){let Me=await su(ae,V,F.submission,ce,oe.active,{replace:F.replace,flushSync:de});if(Me.shortCircuited)return;if(Me.pendingActionResult){let[Ce,ze]=Me.pendingActionResult;if(In(ze)&&nf(ze.error)&&ze.error.status===404){I=null,Yn(V,{matches:Me.matches,loaderData:{},errors:{[Ce]:ze.error}});return}}ce=Me.matches||ce,ee=Me.pendingActionResult,re=Lm(V,F.submission),de=!1,oe.active=!1,ae=Co(t.history,ae.url,ae.signal)}let{shortCircuited:le,matches:_e,loaderData:xe,errors:$e}=await Xf(ae,V,ce,oe.active,re,F&&F.submission,F&&F.fetcherSubmission,F&&F.replace,F&&F.initialHydration===!0,de,ee);le||(I=null,Yn(V,Ze({matches:_e||ce},Fw(ee),{loaderData:xe,errors:$e})))}async function su(M,V,F,W,re,ce){ce===void 0&&(ce={}),vt();let de=K5(V,F);if(Ve({navigation:de},{flushSync:ce.flushSync===!0}),re){let ee=await xs(W,V.pathname,M.signal);if(ee.type==="aborted")return{shortCircuited:!0};if(ee.type==="error"){let le=Ls(ee.partialMatches).route.id;return{matches:ee.partialMatches,pendingActionResult:[le,{type:Oe.error,error:ee.error}]}}else if(ee.matches)W=ee.matches;else{let{notFoundMatches:le,error:_e,route:xe}=xo(V.pathname);return{matches:le,pendingActionResult:[xe.id,{type:Oe.error,error:_e}]}}}let oe,ae=Rl(W,V);if(!ae.route.action&&!ae.route.lazy)oe={type:Oe.error,error:hn(405,{method:M.method,pathname:V.pathname,routeId:ae.route.id})};else if(oe=(await Vr("action",k,M,[ae],W,null))[ae.route.id],M.signal.aborted)return{shortCircuited:!0};if(Os(oe)){let ee;return ce&&ce.replace!=null?ee=ce.replace:ee=Mw(oe.response.headers.get("Location"),new URL(M.url),l)===k.location.pathname+k.location.search,await Jn(M,oe,!0,{submission:F,replace:ee}),{shortCircuited:!0}}if(Fi(oe))throw hn(400,{type:"defer-action"});if(In(oe)){let ee=Ls(W,ae.route.id);return(ce&&ce.replace)!==!0&&(S=Et.Push),{matches:W,pendingActionResult:[ee.route.id,oe]}}return{matches:W,pendingActionResult:[ae.route.id,oe]}}async function Xf(M,V,F,W,re,ce,de,oe,ae,ee,le){let _e=re||Lm(V,ce),xe=ce||de||$w(_e),$e=!N&&(!h.v7_partialHydration||!ae);if(W){if($e){let Je=ou(le);Ve(Ze({navigation:_e},Je!==void 0?{actionData:Je}:{}),{flushSync:ee})}let Ie=await xs(F,V.pathname,M.signal);if(Ie.type==="aborted")return{shortCircuited:!0};if(Ie.type==="error"){let Je=Ls(Ie.partialMatches).route.id;return{matches:Ie.partialMatches,loaderData:{},errors:{[Je]:Ie.error}}}else if(Ie.matches)F=Ie.matches;else{let{error:Je,notFoundMatches:Br,route:Ei}=xo(V.pathname);return{matches:Br,loaderData:{},errors:{[Ei.id]:Je}}}}let Me=a||o,[Ce,ze]=Nw(t.history,k,F,xe,V,h.v7_partialHydration&&ae===!0,h.v7_skipActionErrorRevalidation,X,we,G,Le,pe,ne,Me,l,le);if(Or(Ie=>!(F&&F.some(Je=>Je.route.id===Ie))||Ce&&Ce.some(Je=>Je.route.id===Ie)),Q=++$,Ce.length===0&&ze.length===0){let Ie=Xa();return Yn(V,Ze({matches:F,loaderData:{},errors:le&&In(le[1])?{[le[0]]:le[1].error}:null},Fw(le),Ie?{fetchers:new Map(k.fetchers)}:{}),{flushSync:ee}),{shortCircuited:!0}}if($e){let Ie={};if(!W){Ie.navigation=_e;let Je=ou(le);Je!==void 0&&(Ie.actionData=Je)}ze.length>0&&(Ie.fetchers=au(ze)),Ve(Ie,{flushSync:ee})}ze.forEach(Ie=>{dn(Ie.key),Ie.controller&&J.set(Ie.key,Ie.controller)});let yr=()=>ze.forEach(Ie=>dn(Ie.key));I&&I.signal.addEventListener("abort",yr);let{loaderResults:vi,fetcherResults:jn}=await Ka(k,F,Ce,ze,M);if(M.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",yr),ze.forEach(Ie=>J.delete(Ie.key));let Vn=Uu(vi);if(Vn)return await Jn(M,Vn.result,!0,{replace:oe}),{shortCircuited:!0};if(Vn=Uu(jn),Vn)return ne.add(Vn.key),await Jn(M,Vn.result,!0,{replace:oe}),{shortCircuited:!0};let{loaderData:wi,errors:_i}=Vw(k,F,vi,le,ze,jn,Ye);Ye.forEach((Ie,Je)=>{Ie.subscribe(Br=>{(Br||Ie.done)&&Ye.delete(Je)})}),h.v7_partialHydration&&ae&&k.errors&&(_i=Ze({},k.errors,_i));let Zn=Xa(),vr=Eo(Q),On=Zn||vr||ze.length>0;return Ze({matches:F,loaderData:wi,errors:_i},On?{fetchers:new Map(k.fetchers)}:{})}function ou(M){if(M&&!In(M[1]))return{[M[0]]:M[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function au(M){return M.forEach(V=>{let F=k.fetchers.get(V.key),W=yl(void 0,F?F.data:void 0);k.fetchers.set(V.key,W)}),new Map(k.fetchers)}function Ga(M,V,F,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");dn(M);let re=(W&&W.flushSync)===!0,ce=a||o,de=hg(k.location,k.matches,l,h.v7_prependBasename,F,h.v7_relativeSplatPath,V,W==null?void 0:W.relative),oe=Ds(ce,de,l),ae=Ur(oe,ce,de);if(ae.active&&ae.matches&&(oe=ae.matches),!oe){un(M,V,hn(404,{pathname:de}),{flushSync:re});return}let{path:ee,submission:le,error:_e}=Pw(h.v7_normalizeFormMethod,!0,de,W);if(_e){un(M,V,_e,{flushSync:re});return}let xe=Rl(oe,ee),$e=(W&&W.preventScrollReset)===!0;if(le&&ir(le.formMethod)){lu(M,V,ee,xe,oe,ae.active,re,$e,le);return}pe.set(M,{routeId:V,path:ee}),Jf(M,V,ee,xe,oe,ae.active,re,$e,le)}async function lu(M,V,F,W,re,ce,de,oe,ae){vt(),pe.delete(M);function ee(it){if(!it.route.action&&!it.route.lazy){let wr=hn(405,{method:ae.formMethod,pathname:F,routeId:V});return un(M,V,wr,{flushSync:de}),!0}return!1}if(!ce&&ee(W))return;let le=k.fetchers.get(M);Xe(M,Q5(ae,le),{flushSync:de});let _e=new AbortController,xe=Co(t.history,F,_e.signal,ae);if(ce){let it=await xs(re,F,xe.signal);if(it.type==="aborted")return;if(it.type==="error"){un(M,V,it.error,{flushSync:de});return}else if(it.matches){if(re=it.matches,W=Rl(re,F),ee(W))return}else{un(M,V,hn(404,{pathname:F}),{flushSync:de});return}}J.set(M,_e);let $e=$,Ce=(await Vr("action",k,xe,[W],re,M))[W.route.id];if(xe.signal.aborted){J.get(M)===_e&&J.delete(M);return}if(h.v7_fetcherPersist&&Le.has(M)){if(Os(Ce)||In(Ce)){Xe(M,Si(void 0));return}}else{if(Os(Ce))if(J.delete(M),Q>$e){Xe(M,Si(void 0));return}else return ne.add(M),Xe(M,yl(ae)),Jn(xe,Ce,!1,{fetcherSubmission:ae,preventScrollReset:oe});if(In(Ce)){un(M,V,Ce.error);return}}if(Fi(Ce))throw hn(400,{type:"defer-action"});let ze=k.navigation.location||k.location,yr=Co(t.history,ze,_e.signal),vi=a||o,jn=k.navigation.state!=="idle"?Ds(vi,k.navigation.location,l):k.matches;Te(jn,"Didn't find any matches after fetcher action");let Vn=++$;ie.set(M,Vn);let wi=yl(ae,Ce.data);k.fetchers.set(M,wi);let[_i,Zn]=Nw(t.history,k,jn,ae,ze,!1,h.v7_skipActionErrorRevalidation,X,we,G,Le,pe,ne,vi,l,[W.route.id,Ce]);Zn.filter(it=>it.key!==M).forEach(it=>{let wr=it.key,bo=k.fetchers.get(wr),du=yl(void 0,bo?bo.data:void 0);k.fetchers.set(wr,du),dn(wr),it.controller&&J.set(wr,it.controller)}),Ve({fetchers:new Map(k.fetchers)});let vr=()=>Zn.forEach(it=>dn(it.key));_e.signal.addEventListener("abort",vr);let{loaderResults:On,fetcherResults:Ie}=await Ka(k,jn,_i,Zn,yr);if(_e.signal.aborted)return;_e.signal.removeEventListener("abort",vr),ie.delete(M),J.delete(M),Zn.forEach(it=>J.delete(it.key));let Je=Uu(On);if(Je)return Jn(yr,Je.result,!1,{preventScrollReset:oe});if(Je=Uu(Ie),Je)return ne.add(Je.key),Jn(yr,Je.result,!1,{preventScrollReset:oe});let{loaderData:Br,errors:Ei}=Vw(k,jn,On,void 0,Zn,Ie,Ye);if(k.fetchers.has(M)){let it=Si(Ce.data);k.fetchers.set(M,it)}Eo(Vn),k.navigation.state==="loading"&&Vn>Q?(Te(S,"Expected pending action"),I&&I.abort(),Yn(k.navigation.location,{matches:jn,loaderData:Br,errors:Ei,fetchers:new Map(k.fetchers)})):(Ve({errors:Ei,loaderData:Ow(k.loaderData,Br,jn,Ei),fetchers:new Map(k.fetchers)}),X=!1)}async function Jf(M,V,F,W,re,ce,de,oe,ae){let ee=k.fetchers.get(M);Xe(M,yl(ae,ee?ee.data:void 0),{flushSync:de});let le=new AbortController,_e=Co(t.history,F,le.signal);if(ce){let Ce=await xs(re,F,_e.signal);if(Ce.type==="aborted")return;if(Ce.type==="error"){un(M,V,Ce.error,{flushSync:de});return}else if(Ce.matches)re=Ce.matches,W=Rl(re,F);else{un(M,V,hn(404,{pathname:F}),{flushSync:de});return}}J.set(M,le);let xe=$,Me=(await Vr("loader",k,_e,[W],re,M))[W.route.id];if(Fi(Me)&&(Me=await oy(Me,_e.signal,!0)||Me),J.get(M)===le&&J.delete(M),!_e.signal.aborted){if(Le.has(M)){Xe(M,Si(void 0));return}if(Os(Me))if(Q>xe){Xe(M,Si(void 0));return}else{ne.add(M),await Jn(_e,Me,!1,{preventScrollReset:oe});return}if(In(Me)){un(M,V,Me.error);return}Te(!Fi(Me),"Unhandled fetcher deferred data"),Xe(M,Si(Me.data))}}async function Jn(M,V,F,W){let{submission:re,fetcherSubmission:ce,preventScrollReset:de,replace:oe}=W===void 0?{}:W;V.response.headers.has("X-Remix-Revalidate")&&(X=!0);let ae=V.response.headers.get("Location");Te(ae,"Expected a Location header on the redirect Response"),ae=Mw(ae,new URL(M.url),l);let ee=wc(k.location,ae,{_isRedirect:!0});if(n){let Ce=!1;if(V.response.headers.has("X-Remix-Reload-Document"))Ce=!0;else if(sy.test(ae)){const ze=t.history.createURL(ae);Ce=ze.origin!==e.location.origin||ja(ze.pathname,l)==null}if(Ce){oe?e.location.replace(ae):e.location.assign(ae);return}}I=null;let le=oe===!0||V.response.headers.has("X-Remix-Replace")?Et.Replace:Et.Push,{formMethod:_e,formAction:xe,formEncType:$e}=k.navigation;!re&&!ce&&_e&&xe&&$e&&(re=$w(k.navigation));let Me=re||ce;if(C5.has(V.response.status)&&Me&&ir(Me.formMethod))await Xn(le,ee,{submission:Ze({},Me,{formAction:ae}),preventScrollReset:de||T,enableViewTransition:F?C:void 0});else{let Ce=Lm(ee,re);await Xn(le,ee,{overrideNavigation:Ce,fetcherSubmission:ce,preventScrollReset:de||T,enableViewTransition:F?C:void 0})}}async function Vr(M,V,F,W,re,ce){let de,oe={};try{de=await V5(c,M,V,F,W,re,ce,s,i)}catch(ae){return W.forEach(ee=>{oe[ee.route.id]={type:Oe.error,error:ae}}),oe}for(let[ae,ee]of Object.entries(de))if(z5(ee)){let le=ee.result;oe[ae]={type:Oe.redirect,response:U5(le,F,ae,re,l,h.v7_relativeSplatPath)}}else oe[ae]=await F5(ee);return oe}async function Ka(M,V,F,W,re){let ce=M.matches,de=Vr("loader",M,re,F,V,null),oe=Promise.all(W.map(async le=>{if(le.matches&&le.match&&le.controller){let xe=(await Vr("loader",M,Co(t.history,le.path,le.controller.signal),[le.match],le.matches,le.key))[le.match.route.id];return{[le.key]:xe}}else return Promise.resolve({[le.key]:{type:Oe.error,error:hn(404,{pathname:le.path})}})})),ae=await de,ee=(await oe).reduce((le,_e)=>Object.assign(le,_e),{});return await Promise.all([q5(V,ae,re.signal,ce,M.loaderData),G5(V,ee,W)]),{loaderResults:ae,fetcherResults:ee}}function vt(){X=!0,we.push(...Or()),pe.forEach((M,V)=>{J.has(V)&&G.add(V),dn(V)})}function Xe(M,V,F){F===void 0&&(F={}),k.fetchers.set(M,V),Ve({fetchers:new Map(k.fetchers)},{flushSync:(F&&F.flushSync)===!0})}function un(M,V,F,W){W===void 0&&(W={});let re=Ls(k.matches,V);Es(M),Ve({errors:{[re.route.id]:F},fetchers:new Map(k.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Qa(M){return h.v7_fetcherPersist&&(Ee.set(M,(Ee.get(M)||0)+1),Le.has(M)&&Le.delete(M)),k.fetchers.get(M)||P5}function Es(M){let V=k.fetchers.get(M);J.has(M)&&!(V&&V.state==="loading"&&ie.has(M))&&dn(M),pe.delete(M),ie.delete(M),ne.delete(M),Le.delete(M),G.delete(M),k.fetchers.delete(M)}function Zf(M){if(h.v7_fetcherPersist){let V=(Ee.get(M)||0)-1;V<=0?(Ee.delete(M),Le.add(M)):Ee.set(M,V)}else Es(M);Ve({fetchers:new Map(k.fetchers)})}function dn(M){let V=J.get(M);V&&(V.abort(),J.delete(M))}function Ya(M){for(let V of M){let F=Qa(V),W=Si(F.data);k.fetchers.set(V,W)}}function Xa(){let M=[],V=!1;for(let F of ne){let W=k.fetchers.get(F);Te(W,"Expected fetcher: "+F),W.state==="loading"&&(ne.delete(F),M.push(F),V=!0)}return Ya(M),V}function Eo(M){let V=[];for(let[F,W]of ie)if(W<M){let re=k.fetchers.get(F);Te(re,"Expected fetcher: "+F),re.state==="loading"&&(dn(F),ie.delete(F),V.push(F))}return Ya(V),V.length>0}function em(M,V){let F=k.blockers.get(M)||gl;return rt.get(M)!==V&&rt.set(M,V),F}function cu(M){k.blockers.delete(M),rt.delete(M)}function yi(M,V){let F=k.blockers.get(M)||gl;Te(F.state==="unblocked"&&V.state==="blocked"||F.state==="blocked"&&V.state==="blocked"||F.state==="blocked"&&V.state==="proceeding"||F.state==="blocked"&&V.state==="unblocked"||F.state==="proceeding"&&V.state==="unblocked","Invalid blocker state transition: "+F.state+" -> "+V.state);let W=new Map(k.blockers);W.set(M,V),Ve({blockers:W})}function Ja(M){let{currentLocation:V,nextLocation:F,historyAction:W}=M;if(rt.size===0)return;rt.size>1&&ya(!1,"A router only supports one blocker at a time");let re=Array.from(rt.entries()),[ce,de]=re[re.length-1],oe=k.blockers.get(ce);if(!(oe&&oe.state==="proceeding")&&de({currentLocation:V,nextLocation:F,historyAction:W}))return ce}function xo(M){let V=hn(404,{pathname:M}),F=a||o,{matches:W,route:re}=Uw(F);return Or(),{notFoundMatches:W,route:re,error:V}}function Or(M){let V=[];return Ye.forEach((F,W)=>{(!M||M(W))&&(F.cancel(),V.push(W),Ye.delete(W))}),V}function Za(M,V,F){if(_=M,R=V,x=F||null,!b&&k.navigation===Dm){b=!0;let W=el(k.location,k.matches);W!=null&&Ve({restoreScrollPosition:W})}return()=>{_=null,R=null,x=null}}function To(M,V){return x&&x(M,V.map(W=>a5(W,k.loaderData)))||M.key}function Fr(M,V){if(_&&R){let F=To(M,V);_[F]=R()}}function el(M,V){if(_){let F=To(M,V),W=_[F];if(typeof W=="number")return W}return null}function Ur(M,V,F){if(d)if(M){if(Object.keys(M[0].params).length>0)return{active:!0,matches:yd(V,F,l,!0)}}else return{active:!0,matches:yd(V,F,l,!0)||[]};return{active:!1,matches:null}}async function xs(M,V,F){if(!d)return{type:"success",matches:M};let W=M;for(;;){let re=a==null,ce=a||o,de=s;try{await d({path:V,matches:W,patch:(ee,le)=>{F.aborted||Lw(ee,le,ce,de,i)}})}catch(ee){return{type:"error",error:ee,partialMatches:W}}finally{re&&!F.aborted&&(o=[...o])}if(F.aborted)return{type:"aborted"};let oe=Ds(ce,V,l);if(oe)return{type:"success",matches:oe};let ae=yd(ce,V,l,!0);if(!ae||W.length===ae.length&&W.every((ee,le)=>ee.route.id===ae[le].route.id))return{type:"success",matches:null};W=ae}}function Ts(M){s={},a=nh(M,i,void 0,s)}function uu(M,V){let F=a==null;Lw(M,V,a||o,s,i),F&&(o=[...o],Ve({}))}return j={get basename(){return l},get future(){return h},get state(){return k},get routes(){return o},get window(){return e},initialize:Ha,subscribe:Qn,enableScrollRestoration:Za,navigate:_o,fetch:Ga,revalidate:qa,createHref:M=>t.history.createHref(M),encodeLocation:M=>t.history.encodeLocation(M),getFetcher:Qa,deleteFetcher:Zf,dispose:_s,getBlocker:em,deleteBlocker:cu,patchRoutes:uu,_internalFetchControllers:J,_internalActiveDeferreds:Ye,_internalSetRoutes:Ts},j}function D5(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function hg(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let d=tf(i||".",ef(l,s),ja(t.pathname,n)||t.pathname,a==="path");if(i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&c){let h=ay(d.search);if(c.route.index&&!h)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let m=new URLSearchParams(d.search),y=m.getAll("index");m.delete("index"),y.filter(x=>x).forEach(x=>m.append("index",x));let _=m.toString();d.search=_?"?"+_:""}}return r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:ti([n,d.pathname])),Js(d)}function Pw(t,e,n,r){if(!r||!D5(r))return{path:n};if(r.formMethod&&!H5(r.formMethod))return{path:n,error:hn(405,{method:r.formMethod})};let i=()=>({path:n,error:hn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=mb(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ir(o))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,_)=>{let[x,R]=_;return""+y+x+"="+R+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!ir(o))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}Te(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=mg(r.formData),c=r.formData;else if(r.body instanceof FormData)l=mg(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=jw(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=jw(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ir(d.formMethod))return{path:n,submission:d};let h=ds(n);return e&&h.search&&ay(h.search)&&l.append("index",""),h.search="?"+l,{path:Js(h),submission:d}}function kw(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Nw(t,e,n,r,i,s,o,a,l,c,d,h,m,y,_,x){let R=x?In(x[1])?x[1].error:x[1].data:void 0,b=t.createURL(e.location),w=t.createURL(i),E=n;s&&e.errors?E=kw(n,Object.keys(e.errors)[0],!0):x&&In(x[1])&&(E=kw(n,x[0]));let P=x?x[1].statusCode:void 0,j=o&&P&&P>=400,k=E.filter((T,I)=>{let{route:C}=T;if(C.lazy)return!0;if(C.loader==null)return!1;if(s)return fg(C,e.loaderData,e.errors);if(L5(e.loaderData,e.matches[I],T)||l.some(N=>N===T.route.id))return!0;let D=e.matches[I],L=T;return Dw(T,Ze({currentUrl:b,currentParams:D.params,nextUrl:w,nextParams:L.params},r,{actionResult:R,actionStatus:P,defaultShouldRevalidate:j?!1:a||b.pathname+b.search===w.pathname+w.search||b.search!==w.search||hb(D,L)}))}),S=[];return h.forEach((T,I)=>{if(s||!n.some(X=>X.route.id===T.routeId)||d.has(I))return;let C=Ds(y,T.path,_);if(!C){S.push({key:I,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(I),L=Rl(C,T.path),N=!1;m.has(I)?N=!1:c.has(I)?(c.delete(I),N=!0):D&&D.state!=="idle"&&D.data===void 0?N=a:N=Dw(L,Ze({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:R,actionStatus:P,defaultShouldRevalidate:j?!1:a})),N&&S.push({key:I,routeId:T.routeId,path:T.path,matches:C,match:L,controller:new AbortController})}),[k,S]}function fg(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function L5(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function hb(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Dw(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Lw(t,e,n,r,i){var s;let o;if(t){let c=r[t];Te(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let a=e.filter(c=>!o.some(d=>fb(c,d))),l=nh(a,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...l)}function fb(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>fb(n,s))}):!1}async function M5(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Te(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ya(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!s5.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Ze({},e(i),{lazy:void 0}))}async function j5(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function V5(t,e,n,r,i,s,o,a,l,c){let d=s.map(y=>y.route.lazy?M5(y.route,l,a):void 0),h=s.map((y,_)=>{let x=d[_],R=i.some(w=>w.route.id===y.route.id);return Ze({},y,{shouldLoad:R,resolve:async w=>(w&&r.method==="GET"&&(y.route.lazy||y.route.loader)&&(R=!0),R?O5(e,r,y,x,w,c):Promise.resolve({type:Oe.data,result:void 0}))})}),m=await t({matches:h,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(d)}catch{}return m}async function O5(t,e,n,r,i,s){let o,a,l=c=>{let d,h=new Promise((_,x)=>d=x);a=()=>d(),e.signal.addEventListener("abort",a);let m=_=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},..._!==void 0?[_]:[]),y=(async()=>{try{return{type:"data",result:await(i?i(x=>m(x)):m())}}catch(_){return{type:"error",result:_}}})();return Promise.race([y,h])};try{let c=n.route[t];if(r)if(c){let d,[h]=await Promise.all([l(c).catch(m=>{d=m}),r]);if(d!==void 0)throw d;o=h}else if(await r,c=n.route[t],c)o=await l(c);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw hn(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:Oe.data,result:void 0};else if(c)o=await l(c);else{let d=new URL(e.url),h=d.pathname+d.search;throw hn(404,{pathname:h})}Te(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Oe.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function F5(t){let{result:e,type:n}=t;if(pb(e)){let c;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(d){return{type:Oe.error,error:d}}return n===Oe.error?{type:Oe.error,error:new rh(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:Oe.data,data:c,statusCode:e.status,headers:e.headers}}if(n===Oe.error){if(Bw(e)){var r;if(e.data instanceof Error){var i;return{type:Oe.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new rh(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Oe.error,error:e,statusCode:nf(e)?e.status:void 0}}if(W5(e)){var s,o;return{type:Oe.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(Bw(e)){var a,l;return{type:Oe.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Oe.data,data:e}}function U5(t,e,n,r,i,s){let o=t.headers.get("Location");if(Te(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!sy.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=hg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function Mw(t,e,n){if(sy.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=ja(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Co(t,e,n,r){let i=t.createURL(mb(e)).toString(),s={signal:n};if(r&&ir(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=mg(r.formData):s.body=r.formData}return new Request(i,s)}function mg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function jw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function B5(t,e,n,r,i){let s={},o=null,a,l=!1,c={},d=n&&In(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let m=h.route.id,y=e[m];if(Te(!Os(y),"Cannot handle redirect results in processLoaderData"),In(y)){let _=y.error;d!==void 0&&(_=d,d=void 0),o=o||{};{let x=Ls(t,m);o[x.route.id]==null&&(o[x.route.id]=_)}s[m]=void 0,l||(l=!0,a=nf(y.error)?y.error.status:500),y.headers&&(c[m]=y.headers)}else Fi(y)?(r.set(m,y.deferredData),s[m]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!l&&(a=y.statusCode),y.headers&&(c[m]=y.headers)):(s[m]=y.data,y.statusCode&&y.statusCode!==200&&!l&&(a=y.statusCode),y.headers&&(c[m]=y.headers))}),d!==void 0&&n&&(o={[n[0]]:d},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function Vw(t,e,n,r,i,s,o){let{loaderData:a,errors:l}=B5(e,n,r,o);return i.forEach(c=>{let{key:d,match:h,controller:m}=c,y=s[d];if(Te(y,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(In(y)){let _=Ls(t.matches,h==null?void 0:h.route.id);l&&l[_.route.id]||(l=Ze({},l,{[_.route.id]:y.error})),t.fetchers.delete(d)}else if(Os(y))Te(!1,"Unhandled fetcher revalidation redirect");else if(Fi(y))Te(!1,"Unhandled fetcher deferred data");else{let _=Si(y.data);t.fetchers.set(d,_)}}),{loaderData:a,errors:l}}function Ow(t,e,n,r){let i=Ze({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Fw(t){return t?In(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ls(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Uw(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function hn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new rh(t||500,a,new Error(l),!0)}function Uu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Os(i))return{key:r,result:i}}}function mb(t){let e=typeof t=="string"?ds(t):t;return Js(Ze({},e,{hash:""}))}function $5(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function z5(t){return pb(t.result)&&A5.has(t.result.status)}function Fi(t){return t.type===Oe.deferred}function In(t){return t.type===Oe.error}function Os(t){return(t&&t.type)===Oe.redirect}function Bw(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function W5(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function pb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function H5(t){return R5.has(t.toLowerCase())}function ir(t){return I5.has(t.toLowerCase())}async function q5(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=t.find(m=>(m==null?void 0:m.route.id)===a);if(!c)continue;let d=r.find(m=>m.route.id===c.route.id),h=d!=null&&!hb(d,c)&&(i&&i[c.route.id])!==void 0;Fi(l)&&h&&await oy(l,n,!1).then(m=>{m&&(e[a]=m)})}}async function G5(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&Fi(a)&&(Te(o,"Expected an AbortController for revalidating fetcher deferred result"),await oy(a,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function oy(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Oe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Oe.error,error:i}}return{type:Oe.data,data:t.deferredData.data}}}function ay(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Rl(t,e){let n=typeof e=="string"?ds(e).search:e.search;if(t[t.length-1].route.index&&ay(n||""))return t[t.length-1];let r=cb(t);return r[r.length-1]}function $w(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Lm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function K5(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function yl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Q5(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Si(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Y5(t,e){try{let n=t.sessionStorage.getItem(db);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function X5(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(db,JSON.stringify(n))}catch(r){ya(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ih(){return ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ih.apply(this,arguments)}const rf=g.createContext(null),gb=g.createContext(null),hs=g.createContext(null),ly=g.createContext(null),fs=g.createContext({outlet:null,matches:[],isDataRoute:!1}),yb=g.createContext(null);function J5(t,e){let{relative:n}=e===void 0?{}:e;Va()||Te(!1);let{basename:r,navigator:i}=g.useContext(hs),{hash:s,pathname:o,search:a}=wb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ti([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Va(){return g.useContext(ly)!=null}function Oa(){return Va()||Te(!1),g.useContext(ly).location}function vb(t){g.useContext(hs).static||g.useLayoutEffect(t)}function lo(){let{isDataRoute:t}=g.useContext(fs);return t?uN():Z5()}function Z5(){Va()||Te(!1);let t=g.useContext(rf),{basename:e,future:n,navigator:r}=g.useContext(hs),{matches:i}=g.useContext(fs),{pathname:s}=Oa(),o=JSON.stringify(ef(i,n.v7_relativeSplatPath)),a=g.useRef(!1);return vb(()=>{a.current=!0}),g.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=tf(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ti([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function wb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(hs),{matches:i}=g.useContext(fs),{pathname:s}=Oa(),o=JSON.stringify(ef(i,r.v7_relativeSplatPath));return g.useMemo(()=>tf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function eN(t,e,n,r){Va()||Te(!1);let{navigator:i}=g.useContext(hs),{matches:s}=g.useContext(fs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Oa(),d;d=c;let h=d.pathname||"/",m=h;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=Ds(t,{pathname:m});return sN(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:ti([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:ti([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r)}function tN(){let t=cN(),e=nf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:i},n):null,null)}const nN=g.createElement(tN,null);class rN extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(fs.Provider,{value:this.props.routeContext},g.createElement(yb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iN(t){let{routeContext:e,match:n,children:r}=t,i=g.useContext(rf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(fs.Provider,{value:e},r)}function sN(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Te(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:y}=n,_=h.route.loader&&m[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let y,_=!1,x=null,R=null;n&&(y=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||nN,l&&(c<0&&m===0?(_=!0,R=null):c===m&&(_=!0,R=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,m+1)),w=()=>{let E;return y?E=x:_?E=R:h.route.Component?E=g.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,g.createElement(iN,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?g.createElement(rN,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var _b=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_b||{}),sh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sh||{});function oN(t){let e=g.useContext(rf);return e||Te(!1),e}function aN(t){let e=g.useContext(gb);return e||Te(!1),e}function lN(t){let e=g.useContext(fs);return e||Te(!1),e}function Eb(t){let e=lN(),n=e.matches[e.matches.length-1];return n.route.id||Te(!1),n.route.id}function cN(){var t;let e=g.useContext(yb),n=aN(sh.UseRouteError),r=Eb(sh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function uN(){let{router:t}=oN(_b.UseNavigateStable),e=Eb(sh.UseNavigateStable),n=g.useRef(!1);return vb(()=>{n.current=!0}),g.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ih({fromRouteId:e},s)))},[t,e])}const zw={};function dN(t,e){zw[e]||(zw[e]=!0,console.warn(e))}const Po=(t,e,n)=>dN(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function hN(t,e){t!=null&&t.v7_startTransition||Po("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&Po("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||Po("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||Po("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||Po("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||Po("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function xb(t){let{to:e,replace:n,state:r,relative:i}=t;Va()||Te(!1);let{future:s,static:o}=g.useContext(hs),{matches:a}=g.useContext(fs),{pathname:l}=Oa(),c=lo(),d=tf(e,ef(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return g.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function fN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Et.Pop,navigator:s,static:o=!1,future:a}=t;Va()&&Te(!1);let l=e.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:l,navigator:s,static:o,future:ih({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ds(r));let{pathname:d="/",search:h="",hash:m="",state:y=null,key:_="default"}=r,x=g.useMemo(()=>{let R=ja(d,l);return R==null?null:{location:{pathname:R,search:h,hash:m,state:y,key:_},navigationType:i}},[l,d,h,m,y,_,i]);return x==null?null:g.createElement(hs.Provider,{value:c},g.createElement(ly.Provider,{children:n,value:x}))}new Promise(()=>{});function mN(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:g.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:g.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:g.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _c(){return _c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_c.apply(this,arguments)}function pN(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yN(t,e){return t.button===0&&(!e||e==="_self")&&!gN(t)}const vN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wN="6";try{window.__reactRouterVersion=wN}catch{}function _N(t,e){return N5({basename:void 0,future:_c({},void 0,{v7_prependBasename:!0}),history:n5({window:void 0}),hydrationData:EN(),routes:t,mapRouteProperties:mN,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function EN(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_c({},e,{errors:xN(e.errors)})),e}function xN(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new rh(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const TN=g.createContext({isTransitioning:!1}),bN=g.createContext(new Map),IN="startTransition",Ww=zC[IN],SN="flushSync",Hw=t5[SN];function RN(t){Ww?Ww(t):t()}function vl(t){Hw?Hw(t):t()}let AN=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function CN(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=g.useState(n.state),[o,a]=g.useState(),[l,c]=g.useState({isTransitioning:!1}),[d,h]=g.useState(),[m,y]=g.useState(),[_,x]=g.useState(),R=g.useRef(new Map),{v7_startTransition:b}=r||{},w=g.useCallback(T=>{b?RN(T):T()},[b]),E=g.useCallback((T,I)=>{let{deletedFetchers:C,flushSync:D,viewTransitionOpts:L}=I;C.forEach(X=>R.current.delete(X)),T.fetchers.forEach((X,we)=>{X.data!==void 0&&R.current.set(we,X.data)});let N=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!L||N){D?vl(()=>s(T)):w(()=>s(T));return}if(D){vl(()=>{m&&(d&&d.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let X=n.window.document.startViewTransition(()=>{vl(()=>s(T))});X.finished.finally(()=>{vl(()=>{h(void 0),y(void 0),a(void 0),c({isTransitioning:!1})})}),vl(()=>y(X));return}m?(d&&d.resolve(),m.skipTransition(),x({state:T,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(a(T),c({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,m,d,R,w]);g.useLayoutEffect(()=>n.subscribe(E),[n,E]),g.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new AN)},[l]),g.useEffect(()=>{if(d&&o&&n.window){let T=o,I=d.promise,C=n.window.document.startViewTransition(async()=>{w(()=>s(T)),await I});C.finished.finally(()=>{h(void 0),y(void 0),a(void 0),c({isTransitioning:!1})}),y(C)}},[w,o,d,n.window]),g.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,m,i.location,o]),g.useEffect(()=>{!l.isTransitioning&&_&&(a(_.state),c({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),x(void 0))},[l.isTransitioning,_]),g.useEffect(()=>{},[]);let P=g.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,I,C)=>n.navigate(T,{state:I,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(T,I,C)=>n.navigate(T,{replace:!0,state:I,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[n]),j=n.basename||"/",k=g.useMemo(()=>({router:n,navigator:P,static:!1,basename:j}),[n,P,j]),S=g.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return g.useEffect(()=>hN(r,n.future),[r,n.future]),g.createElement(g.Fragment,null,g.createElement(rf.Provider,{value:k},g.createElement(gb.Provider,{value:i},g.createElement(bN.Provider,{value:R.current},g.createElement(TN.Provider,{value:l},g.createElement(fN,{basename:j,location:i.location,navigationType:i.historyAction,navigator:P,future:S},i.initialized||n.future.v7_partialHydration?g.createElement(PN,{routes:n.routes,future:n.future,state:i}):e))))),null)}const PN=g.memo(kN);function kN(t){let{routes:e,future:n,state:r}=t;return eN(e,void 0,r,n)}const NN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=g.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,m=pN(e,vN),{basename:y}=g.useContext(hs),_,x=!1;if(typeof c=="string"&&DN.test(c)&&(_=c,NN))try{let E=new URL(window.location.href),P=c.startsWith("//")?new URL(E.protocol+c):new URL(c),j=ja(P.pathname,y);P.origin===E.origin&&j!=null?c=j+P.search+P.hash:x=!0}catch{}let R=J5(c,{relative:i}),b=LN(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function w(E){r&&r(E),E.defaultPrevented||b(E)}return g.createElement("a",_c({},m,{href:_||R,onClick:x||s?r:w,ref:n,target:l}))});var qw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qw||(qw={}));var Gw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gw||(Gw={}));function LN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=lo(),c=Oa(),d=wb(t,{relative:o});return g.useCallback(h=>{if(yN(h,n)){h.preventDefault();let m=r!==void 0?r:Js(c)===Js(d);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}var Kw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[d],n[h],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new jN;const m=s<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),h!==64){const _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VN=function(t){const e=Tb(t);return bb.encodeByteArray(e,!0)},oh=function(t){return VN(t).replace(/\./g,"")},Ib=function(t){try{return bb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=()=>ON().__FIREBASE_DEFAULTS__,UN=()=>{if(typeof process>"u"||typeof Kw>"u")return;const t=Kw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ib(t[1]);return e&&JSON.parse(e)},sf=()=>{try{return FN()||UN()||BN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sb=t=>{var e,n;return(n=(e=sf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rb=t=>{const e=Sb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ab=()=>{var t;return(t=sf())===null||t===void 0?void 0:t.config},Cb=t=>{var e;return(e=sf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oh(JSON.stringify(n)),oh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function WN(){var t;const e=(t=sf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cy(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GN(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KN(){return!WN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uy(){try{return typeof indexedDB=="object"}catch{return!1}}function dy(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function kb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="FirebaseError";class Kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QN,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,co.prototype.create)}}class co{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?YN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kn(i,a,r)}}function YN(t,e){return t.replace(XN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const XN=/\{\$([^}]+)}/g;function JN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qw(s)&&Qw(o)){if(!Zs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Cl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ZN(t,e){const n=new e4(t,e);return n.subscribe.bind(n)}class e4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");t4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mm),i.error===void 0&&(i.error=Mm),i.complete===void 0&&(i.complete=Mm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1e3,r4=2,i4=4*60*60*1e3,s4=.5;function Yw(t,e=n4,n=r4){const r=e*Math.pow(n,t),i=Math.round(s4*r*(Math.random()-.5)*2);return Math.min(i4,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class Gn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $N;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l4(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a4(t){return t===Cs?void 0:t}function l4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new o4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const u4={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},d4=Se.INFO,h4={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},f4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=h4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class of{constructor(e){this.name=e,this._logLevel=d4,this._logHandler=f4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const m4=(t,e)=>e.some(n=>t instanceof n);let Xw,Jw;function p4(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g4(){return Jw||(Jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nb=new WeakMap,pg=new WeakMap,Db=new WeakMap,jm=new WeakMap,hy=new WeakMap;function y4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nb.set(n,t)}).catch(()=>{}),hy.set(e,t),e}function v4(t){if(pg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});pg.set(t,e)}let gg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Db.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function w4(t){gg=t(gg)}function _4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vm(this),e,...n);return Db.set(r,e.sort?e.sort():[e]),Qi(r)}:g4().includes(t)?function(...e){return t.apply(Vm(this),e),Qi(Nb.get(this))}:function(...e){return Qi(t.apply(Vm(this),e))}}function E4(t){return typeof t=="function"?_4(t):(t instanceof IDBTransaction&&v4(t),m4(t,p4())?new Proxy(t,gg):t)}function Qi(t){if(t instanceof IDBRequest)return y4(t);if(jm.has(t))return jm.get(t);const e=E4(t);return e!==t&&(jm.set(t,e),hy.set(e,t)),e}const Vm=t=>hy.get(t);function Lb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Qi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qi(o.result),l.oldVersion,l.newVersion,Qi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const x4=["get","getKey","getAll","getAllKeys","count"],T4=["put","add","delete","clear"],Om=new Map;function Zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=T4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||x4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Om.set(e,s),s}w4(t=>({...t,get:(e,n,r)=>Zw(e,n)||t.get(e,n,r),has:(e,n)=>!!Zw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(I4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function I4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yg="@firebase/app",e_="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new of("@firebase/app"),S4="@firebase/app-compat",R4="@firebase/analytics-compat",A4="@firebase/analytics",C4="@firebase/app-check-compat",P4="@firebase/app-check",k4="@firebase/auth",N4="@firebase/auth-compat",D4="@firebase/database",L4="@firebase/data-connect",M4="@firebase/database-compat",j4="@firebase/functions",V4="@firebase/functions-compat",O4="@firebase/installations",F4="@firebase/installations-compat",U4="@firebase/messaging",B4="@firebase/messaging-compat",$4="@firebase/performance",z4="@firebase/performance-compat",W4="@firebase/remote-config",H4="@firebase/remote-config-compat",q4="@firebase/storage",G4="@firebase/storage-compat",K4="@firebase/firestore",Q4="@firebase/vertexai",Y4="@firebase/firestore-compat",X4="firebase",J4="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="[DEFAULT]",Z4={[yg]:"fire-core",[S4]:"fire-core-compat",[A4]:"fire-analytics",[R4]:"fire-analytics-compat",[P4]:"fire-app-check",[C4]:"fire-app-check-compat",[k4]:"fire-auth",[N4]:"fire-auth-compat",[D4]:"fire-rtdb",[L4]:"fire-data-connect",[M4]:"fire-rtdb-compat",[j4]:"fire-fn",[V4]:"fire-fn-compat",[O4]:"fire-iid",[F4]:"fire-iid-compat",[U4]:"fire-fcm",[B4]:"fire-fcm-compat",[$4]:"fire-perf",[z4]:"fire-perf-compat",[W4]:"fire-rc",[H4]:"fire-rc-compat",[q4]:"fire-gcs",[G4]:"fire-gcs-compat",[K4]:"fire-fst",[Y4]:"fire-fst-compat",[Q4]:"fire-vertex","fire-js":"fire-js",[X4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Map,e3=new Map,wg=new Map;function t_(t,e){try{t.container.addComponent(e)}catch(n){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dr(t){const e=t.name;if(wg.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,t);for(const n of ah.values())t_(n,t);for(const n of e3.values())t_(n,t);return!0}function ms(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new co("app","Firebase",t3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=J4;function Mb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yi.create("bad-app-name",{appName:String(i)});if(n||(n=Ab()),!n)throw Yi.create("no-options");const s=ah.get(i);if(s){if(Zs(n,s.options)&&Zs(r,s.config))return s;throw Yi.create("duplicate-app",{appName:i})}const o=new c4(i);for(const l of wg.values())o.addComponent(l);const a=new n3(n,r,o);return ah.set(i,a),a}function af(t=vg){const e=ah.get(t);if(!e&&t===vg&&Ab())return Mb();if(!e)throw Yi.create("no-app",{appName:t});return e}function _n(t,e,n){var r;let i=(r=Z4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(a.join(" "));return}dr(new Gn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="firebase-heartbeat-database",i3=1,Ec="firebase-heartbeat-store";let Fm=null;function jb(){return Fm||(Fm=Lb(r3,i3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ec)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yi.create("idb-open",{originalErrorMessage:t.message})})),Fm}async function s3(t){try{const n=(await jb()).transaction(Ec),r=await n.objectStore(Ec).get(Vb(t));return await n.done,r}catch(e){if(e instanceof Kn)ui.warn(e.message);else{const n=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(n.message)}}}async function n_(t,e){try{const r=(await jb()).transaction(Ec,"readwrite");await r.objectStore(Ec).put(e,Vb(t)),await r.done}catch(n){if(n instanceof Kn)ui.warn(n.message);else{const r=Yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ui.warn(r.message)}}}function Vb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=1024,a3=30*24*60*60*1e3;class l3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new u3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=r_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=a3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r_(),{heartbeatsToSend:r,unsentEntries:i}=c3(this._heartbeatsCache.heartbeats),s=oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ui.warn(n),""}}}function r_(){return new Date().toISOString().substring(0,10)}function c3(t,e=o3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),i_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),i_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class u3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uy()?dy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await s3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return n_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function i_(t){return oh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){dr(new Gn("platform-logger",e=>new b4(e),"PRIVATE")),dr(new Gn("heartbeat",e=>new l3(e),"PRIVATE")),_n(yg,e_,t),_n(yg,e_,"esm2017"),_n("fire-js","")}d3("");function fy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h3=Ob,Fb=new co("auth","Firebase",Ob());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new of("@firebase/auth");function f3(t,...e){lh.logLevel<=Se.WARN&&lh.warn(`Auth (${uo}): ${t}`,...e)}function vd(t,...e){lh.logLevel<=Se.ERROR&&lh.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,...e){throw my(t,...e)}function Sr(t,...e){return my(t,...e)}function Ub(t,e,n){const r=Object.assign(Object.assign({},h3()),{[e]:n});return new co("auth","Firebase",r).create(e,{appName:t.name})}function ni(t){return Ub(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function my(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Fb.create(t,...e)}function fe(t,e,...n){if(!t)throw my(e,...n)}function Yr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vd(e),new Error(e)}function di(t,e){t||Yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function m3(){return s_()==="http:"||s_()==="https:"}function s_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m3()||cy()||"connection"in navigator)?navigator.onLine:!0}function g3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=zN()||qN()}get(){return p3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t,e){di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new Fc(3e4,6e4);function ps(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gi(t,e,n,r,i={}){return $b(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Oc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return HN()||(c.referrerPolicy="no-referrer"),Bb.fetch()(zb(t,t.config.apiHost,n,a),c)})}async function $b(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},y3),e);try{const i=new _3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Bu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Bu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Bu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ub(t,d,c);hr(t,d)}}catch(i){if(i instanceof Kn)throw i;hr(t,"network-request-failed",{message:String(i)})}}async function Uc(t,e,n,r,i={}){const s=await gi(t,e,n,r,i);return"mfaPendingCredential"in s&&hr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function zb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?py(t.config,i):`${t.config.apiScheme}://${i}`}function w3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),v3.get())})}}function Bu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sr(t,e,r);return i.customData._tokenResponse=n,i}function o_(t){return t!==void 0&&t.enterprise!==void 0}class E3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return w3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x3(t,e){return gi(t,"GET","/v2/recaptchaConfig",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(t,e){return gi(t,"POST","/v1/accounts:delete",e)}async function Wb(t,e){return gi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b3(t,e=!1){const n=qe(t),r=await n.getIdToken(e),i=gy(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wl(Um(i.auth_time)),issuedAtTime:Wl(Um(i.iat)),expirationTime:Wl(Um(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Um(t){return Number(t)*1e3}function gy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ib(n);return i?JSON.parse(i):(vd("Failed to decode base64 JWT payload"),null)}catch(i){return vd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function a_(t){const e=gy(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kn&&I3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function I3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(t){var e;const n=t.auth,r=await t.getIdToken(),i=await va(t,Wb(n,{idToken:r}));fe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Hb(s.providerUserInfo):[],a=A3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Eg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function R3(t){const e=qe(t);await ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Hb(t){return t.map(e=>{var{providerId:n}=e,r=fy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(t,e){const n=await $b(t,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=zb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Bb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function P3(t,e){return gi(t,"POST","/v2/accounts:revokeToken",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=a_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await C3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ia;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=fy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new S3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Eg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await va(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return b3(this,e)}reload(){return R3(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await va(this,T3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:P,isAnonymous:j,providerData:k,stsTokenManager:S}=n;fe(E&&S,e,"internal-error");const T=ia.fromJSON(this.name,S);fe(typeof E=="string",e,"internal-error"),Ii(h,e.name),Ii(m,e.name),fe(typeof P=="boolean",e,"internal-error"),fe(typeof j=="boolean",e,"internal-error"),Ii(y,e.name),Ii(_,e.name),Ii(x,e.name),Ii(R,e.name),Ii(b,e.name),Ii(w,e.name);const I=new Xr({uid:E,auth:e,email:m,emailVerified:P,displayName:h,isAnonymous:j,photoURL:_,phoneNumber:y,tenantId:x,stsTokenManager:T,createdAt:b,lastLoginAt:w});return k&&Array.isArray(k)&&(I.providerData=k.map(C=>Object.assign({},C))),R&&(I._redirectEventId=R),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new ia;i.updateFromServerResponse(n);const s=new Xr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ch(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Hb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ia;a.updateFromIdToken(r);const l=new Xr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Eg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;function Jr(t){di(t instanceof Function,"Expected a class definition");let e=l_.get(t);return e?(di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qb.type="NONE";const c_=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e,n){return`firebase:${t}:${e}:${n}`}class sa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=wd(this.userKey,i.apiKey,s),this.fullPersistenceKey=wd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sa(Jr(c_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Jr(c_);const o=wd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Xr._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new sa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new sa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Zb(e))return"Webos";if(Kb(e))return"Safari";if((e.includes("chrome/")||Qb(e))&&!e.includes("edge/"))return"Chrome";if(Xb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gb(t=en()){return/firefox\//i.test(t)}function Kb(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qb(t=en()){return/crios\//i.test(t)}function Yb(t=en()){return/iemobile/i.test(t)}function Xb(t=en()){return/android/i.test(t)}function Jb(t=en()){return/blackberry/i.test(t)}function Zb(t=en()){return/webos/i.test(t)}function yy(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function k3(t=en()){var e;return yy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function N3(){return GN()&&document.documentMode===10}function eI(t=en()){return yy(t)||Xb(t)||Zb(t)||Jb(t)||/windows phone/i.test(t)||Yb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t,e=[]){let n;switch(t){case"Browser":n=u_(en());break;case"Worker":n=`${u_(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3(t,e={}){return gi(t,"GET","/v2/passwordPolicy",ps(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=6;class j3{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:M3,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d_(this),this.idTokenSubscription=new d_(this),this.beforeStateQueue=new D3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wb(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(ni(this));const n=e?qe(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L3(this),n=new j3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new co("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await P3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[Jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&f3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ho(t){return qe(t)}class d_{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZN(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O3(t){lf=t}function nI(t){return lf.loadJS(t)}function F3(){return lf.recaptchaEnterpriseScript}function U3(){return lf.gapiScript}function B3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class $3{constructor(){this.enterprise=new z3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class z3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const W3="recaptcha-enterprise",rI="NO_RECAPTCHA";class H3{constructor(e){this.type=W3,this.auth=ho(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{x3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new E3(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;o_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(rI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $3().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&o_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=F3();l.length!==0&&(l+=a),nI(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function h_(t,e,n,r=!1,i=!1){const s=new H3(t);let o;if(i)o=rI;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function xg(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await h_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await h_(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(t,e){const n=ms(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Zs(s,e??{}))return i;hr(i,"already-initialized")}return n.initialize({options:e})}function G3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function K3(t,e,n){const r=ho(t);fe(r._canInitEmulator,r,"emulator-config-failed"),fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=iI(e),{host:o,port:a}=Q3(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Y3()}function iI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Q3(t){const e=iI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:f_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:f_(o)}}}function f_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Y3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,n){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function X3(t,e){return gi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,e){return Uc(t,"POST","/v1/accounts:signInWithPassword",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){return Uc(t,"POST","/v1/accounts:signInWithEmailLink",ps(t,e))}async function eD(t,e){return Uc(t,"POST","/v1/accounts:signInWithEmailLink",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends vy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new xc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xg(e,n,"signInWithPassword",J3);case"emailLink":return Z3(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xg(e,r,"signUpPassword",X3);case"emailLink":return eD(e,{idToken:n,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t,e){return Uc(t,"POST","/v1/accounts:signInWithIdp",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="http://localhost";class eo extends vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=fy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new eo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return oa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oa(e,n)}buildRequest(){const e={requestUri:tD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rD(t){const e=Al(Cl(t)).link,n=e?Al(Cl(e)).deep_link_id:null,r=Al(Cl(t)).deep_link_id;return(r?Al(Cl(r)).link:null)||r||n||e||t}class wy{constructor(e){var n,r,i,s,o,a;const l=Al(Cl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=nD((i=l.mode)!==null&&i!==void 0?i:null);fe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=rD(e);try{return new wy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.providerId=Fa.PROVIDER_ID}static credential(e,n){return xc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wy.parseLink(n);return fe(r,"argument-error"),xc._fromEmailAndCode(e,r.code,r.tenantId)}}Fa.PROVIDER_ID="password";Fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends sI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Bc{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Bc{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Bc{constructor(){super("twitter.com")}static credential(e,n){return eo._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mi.credential(n,r)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e){return Uc(t,"POST","/v1/accounts:signUp",ps(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Xr._fromIdTokenResponse(e,r,i),o=m_(r);return new to({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=m_(r);return new to({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function m_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends Kn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new uh(e,n,r,i)}}function oI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uh._fromErrorAndOperation(t,s,e,r):s})}async function sD(t,e,n=!1){const r=await va(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return to._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e,n=!1){const{auth:r}=t;if(Tr(r.app))return Promise.reject(ni(r));const i="reauthenticate";try{const s=await va(t,oI(r,i,e,t),n);fe(s.idToken,r,"internal-error");const o=gy(s.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(t.uid===a,r,"user-mismatch"),to._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&hr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e,n=!1){if(Tr(t.app))return Promise.reject(ni(t));const r="signIn",i=await oI(t,r,e),s=await to._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function aD(t,e){return aI(ho(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(t){const e=ho(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lD(t,e,n){if(Tr(t.app))return Promise.reject(ni(t));const r=ho(t),o=await xg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lI(t),l}),a=await to._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function cD(t,e,n){return Tr(t.app)?Promise.reject(ni(t)):aD(qe(t),Fa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e){return gi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p_(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qe(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await va(r,uD(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function dD(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function hD(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function fD(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function mD(t){return qe(t).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=1e3,gD=10;class uI extends cI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);N3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uI.type="LOCAL";const yD=uI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI extends cI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dI.type="SESSION";const hI=dI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new cf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await vD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=_y("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function _D(t){Rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function ED(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TD(){return fI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebaseLocalStorageDb",bD=1,hh="firebaseLocalStorage",pI="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uf(t,e){return t.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function ID(){const t=indexedDB.deleteDatabase(mI);return new $c(t).toPromise()}function Tg(){const t=indexedDB.open(mI,bD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hh,{keyPath:pI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hh)?e(r):(r.close(),await ID(),e(await Tg()))})})}async function g_(t,e,n){const r=uf(t,!0).put({[pI]:e,value:n});return new $c(r).toPromise()}async function SD(t,e){const n=uf(t,!1).get(e),r=await new $c(n).toPromise();return r===void 0?null:r.value}function y_(t,e){const n=uf(t,!0).delete(e);return new $c(n).toPromise()}const RD=800,AD=3;class gI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>AD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(TD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ED(),!this.activeServiceWorker)return;this.sender=new wD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tg();return await g_(e,dh,"1"),await y_(e,dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>g_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>SD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>y_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=uf(i,!1).getAll();return new $c(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gI.type="LOCAL";const CD=gI;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t,e){return e?Jr(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey extends vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kD(t){return aI(t.auth,new Ey(t),t.bypassAuthState)}function ND(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),oD(n,new Ey(t),t.bypassAuthState)}async function DD(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),sD(n,new Ey(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kD;case"linkViaPopup":case"linkViaRedirect":return DD;case"reauthViaPopup":case"reauthViaRedirect":return ND;default:hr(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new Fc(2e3,1e4);class Go extends yI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=_y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LD.get())};e()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="pendingRedirect",_d=new Map;class jD extends yI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const r=await VD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VD(t,e){const n=UD(e),r=FD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function OD(t,e){_d.set(t._key(),e)}function FD(t){return Jr(t._redirectPersistence)}function UD(t){return wd(MD,t.config.apiKey,t.name)}async function BD(t,e,n=!1){if(Tr(t.app))return Promise.reject(ni(t));const r=ho(t),i=PD(r,e),o=await new jD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=10*60*1e3;class zD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$D&&this.cachedEventUids.clear(),this.cachedEventUids.has(v_(e))}saveEventToCache(e){this.cachedEventUids.add(v_(e)),this.lastProcessedEventTime=Date.now()}}function v_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e={}){return gi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GD=/^https?/;async function KD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HD(t);for(const n of e)try{if(QD(n))return}catch{}hr(t,"unauthorized-domain")}function QD(t){const e=_g(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!GD.test(n))return!1;if(qD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Fc(3e4,6e4);function w_(){const t=Rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XD(t){return new Promise((e,n)=>{var r,i,s;function o(){w_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w_(),n(Sr(t,"network-request-failed"))},timeout:YD.get()})}if(!((i=(r=Rr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Rr().gapi)===null||s===void 0)&&s.load)o();else{const a=B3("iframefcb");return Rr()[a]=()=>{gapi.load?o():n(Sr(t,"network-request-failed"))},nI(`${U3()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ed=null,e})}let Ed=null;function JD(t){return Ed=Ed||XD(t),Ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new Fc(5e3,15e3),eL="__/auth/iframe",tL="emulator/auth/iframe",nL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iL(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?py(e,tL):`https://${t.config.authDomain}/${eL}`,r={apiKey:e.apiKey,appName:t.name,v:uo},i=rL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Oc(r).slice(1)}`}async function sL(t){const e=await JD(t),n=Rr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:iL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Sr(t,"network-request-failed"),a=Rr().setTimeout(()=>{s(o)},ZD.get());function l(){Rr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aL=500,lL=600,cL="_blank",uL="http://localhost";class __{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dL(t,e,n,r=aL,i=lL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},oL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=en().toLowerCase();n&&(a=Qb(c)?cL:n),Gb(c)&&(e=e||uL,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,_])=>`${m}${y}=${_},`,"");if(k3(c)&&a!=="_self")return hL(e||"",a),new __(null);const h=window.open(e||"",a,d);fe(h,t,"popup-blocked");try{h.focus()}catch{}return new __(h)}function hL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="__/auth/handler",mL="emulator/auth/handler",pL=encodeURIComponent("fac");async function E_(t,e,n,r,i,s){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uo,eventId:i};if(e instanceof sI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Bc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${pL}=${encodeURIComponent(l)}`:"";return`${gL(t)}?${Oc(a).slice(1)}${c}`}function gL({config:t}){return t.emulator?py(t,mL):`https://${t.authDomain}/${fL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class yL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hI,this._completeRedirectFn=BD,this._overrideRedirectResult=OD}async _openPopup(e,n,r,i){var s;di((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await E_(e,n,r,_g(),i);return dL(e,o,_y())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await E_(e,n,r,_g(),i);return _D(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(di(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await sL(e),r=new zD(e);return n.register("authEvent",i=>(fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bm];o!==void 0&&n(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eI()||Kb()||yy()}}const vL=yL;var x_="@firebase/auth",T_="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EL(t){dr(new Gn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tI(t)},c=new V3(r,i,s,l);return G3(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),dr(new Gn("auth-internal",e=>{const n=ho(e.getProvider("auth").getImmediate());return(r=>new wL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(x_,T_,_L(t)),_n(x_,T_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=5*60,TL=Cb("authIdTokenMaxAge")||xL;let b_=null;const bL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TL)return;const i=n==null?void 0:n.token;b_!==i&&(b_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IL(t=af()){const e=ms(t,"auth");if(e.isInitialized())return e.getImmediate();const n=q3(t,{popupRedirectResolver:vL,persistence:[CD,yD,hI]}),r=Cb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=bL(s.toString());hD(n,o,()=>o(n.currentUser)),dD(n,a=>o(a))}}const i=Sb("auth");return i&&K3(n,`http://${i}`),n}function SL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}O3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",SL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EL("Browser");var I_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,wI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function I(){}I.prototype=T.prototype,S.D=T.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(C,D,L){for(var N=Array(arguments.length-2),X=2;X<arguments.length;X++)N[X-2]=arguments[X];return T.prototype[D].apply(C,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,I){I||(I=0);var C=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)C[D]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(D=0;16>D;++D)C[D]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=S.g[0],I=S.g[1],D=S.g[2];var L=S.g[3],N=T+(L^I&(D^L))+C[0]+3614090360&4294967295;T=I+(N<<7&4294967295|N>>>25),N=L+(D^T&(I^D))+C[1]+3905402710&4294967295,L=T+(N<<12&4294967295|N>>>20),N=D+(I^L&(T^I))+C[2]+606105819&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(T^D&(L^T))+C[3]+3250441966&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(L^I&(D^L))+C[4]+4118548399&4294967295,T=I+(N<<7&4294967295|N>>>25),N=L+(D^T&(I^D))+C[5]+1200080426&4294967295,L=T+(N<<12&4294967295|N>>>20),N=D+(I^L&(T^I))+C[6]+2821735955&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(T^D&(L^T))+C[7]+4249261313&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(L^I&(D^L))+C[8]+1770035416&4294967295,T=I+(N<<7&4294967295|N>>>25),N=L+(D^T&(I^D))+C[9]+2336552879&4294967295,L=T+(N<<12&4294967295|N>>>20),N=D+(I^L&(T^I))+C[10]+4294925233&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(T^D&(L^T))+C[11]+2304563134&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(L^I&(D^L))+C[12]+1804603682&4294967295,T=I+(N<<7&4294967295|N>>>25),N=L+(D^T&(I^D))+C[13]+4254626195&4294967295,L=T+(N<<12&4294967295|N>>>20),N=D+(I^L&(T^I))+C[14]+2792965006&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(T^D&(L^T))+C[15]+1236535329&4294967295,I=D+(N<<22&4294967295|N>>>10),N=T+(D^L&(I^D))+C[1]+4129170786&4294967295,T=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(T^I))+C[6]+3225465664&4294967295,L=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(L^T))+C[11]+643717713&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^T&(D^L))+C[0]+3921069994&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(D^L&(I^D))+C[5]+3593408605&4294967295,T=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(T^I))+C[10]+38016083&4294967295,L=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(L^T))+C[15]+3634488961&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^T&(D^L))+C[4]+3889429448&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(D^L&(I^D))+C[9]+568446438&4294967295,T=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(T^I))+C[14]+3275163606&4294967295,L=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(L^T))+C[3]+4107603335&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^T&(D^L))+C[8]+1163531501&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(D^L&(I^D))+C[13]+2850285829&4294967295,T=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(T^I))+C[2]+4243563512&4294967295,L=T+(N<<9&4294967295|N>>>23),N=D+(T^I&(L^T))+C[7]+1735328473&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^T&(D^L))+C[12]+2368359562&4294967295,I=D+(N<<20&4294967295|N>>>12),N=T+(I^D^L)+C[5]+4294588738&4294967295,T=I+(N<<4&4294967295|N>>>28),N=L+(T^I^D)+C[8]+2272392833&4294967295,L=T+(N<<11&4294967295|N>>>21),N=D+(L^T^I)+C[11]+1839030562&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^T)+C[14]+4259657740&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(I^D^L)+C[1]+2763975236&4294967295,T=I+(N<<4&4294967295|N>>>28),N=L+(T^I^D)+C[4]+1272893353&4294967295,L=T+(N<<11&4294967295|N>>>21),N=D+(L^T^I)+C[7]+4139469664&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^T)+C[10]+3200236656&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(I^D^L)+C[13]+681279174&4294967295,T=I+(N<<4&4294967295|N>>>28),N=L+(T^I^D)+C[0]+3936430074&4294967295,L=T+(N<<11&4294967295|N>>>21),N=D+(L^T^I)+C[3]+3572445317&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^T)+C[6]+76029189&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(I^D^L)+C[9]+3654602809&4294967295,T=I+(N<<4&4294967295|N>>>28),N=L+(T^I^D)+C[12]+3873151461&4294967295,L=T+(N<<11&4294967295|N>>>21),N=D+(L^T^I)+C[15]+530742520&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^T)+C[2]+3299628645&4294967295,I=D+(N<<23&4294967295|N>>>9),N=T+(D^(I|~L))+C[0]+4096336452&4294967295,T=I+(N<<6&4294967295|N>>>26),N=L+(I^(T|~D))+C[7]+1126891415&4294967295,L=T+(N<<10&4294967295|N>>>22),N=D+(T^(L|~I))+C[14]+2878612391&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~T))+C[5]+4237533241&4294967295,I=D+(N<<21&4294967295|N>>>11),N=T+(D^(I|~L))+C[12]+1700485571&4294967295,T=I+(N<<6&4294967295|N>>>26),N=L+(I^(T|~D))+C[3]+2399980690&4294967295,L=T+(N<<10&4294967295|N>>>22),N=D+(T^(L|~I))+C[10]+4293915773&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~T))+C[1]+2240044497&4294967295,I=D+(N<<21&4294967295|N>>>11),N=T+(D^(I|~L))+C[8]+1873313359&4294967295,T=I+(N<<6&4294967295|N>>>26),N=L+(I^(T|~D))+C[15]+4264355552&4294967295,L=T+(N<<10&4294967295|N>>>22),N=D+(T^(L|~I))+C[6]+2734768916&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~T))+C[13]+1309151649&4294967295,I=D+(N<<21&4294967295|N>>>11),N=T+(D^(I|~L))+C[4]+4149444226&4294967295,T=I+(N<<6&4294967295|N>>>26),N=L+(I^(T|~D))+C[11]+3174756917&4294967295,L=T+(N<<10&4294967295|N>>>22),N=D+(T^(L|~I))+C[2]+718787259&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~T))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+L&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var I=T-this.blockSize,C=this.B,D=this.h,L=0;L<T;){if(D==0)for(;L<=I;)i(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<T;)if(C[D++]=S.charCodeAt(L++),D==this.blockSize){i(this,C),D=0;break}}else for(;L<T;)if(C[D++]=S[L++],D==this.blockSize){i(this,C),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var I=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=I&255,I/=256;for(this.u(S),S=Array(16),T=I=0;4>T;++T)for(var C=0;32>C;C+=8)S[I++]=this.g[T]>>>C&255;return S};function s(S,T){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=T(S)}function o(S,T){this.h=T;for(var I=[],C=!0,D=S.length-1;0<=D;D--){var L=S[D]|0;C&&L==T||(I[D]=L,C=!1)}this.g=I}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return R(c(-S));for(var T=[],I=1,C=0;S>=I;C++)T[C]=S/I|0,I*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return R(d(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(T,8)),C=h,D=0;D<S.length;D+=8){var L=Math.min(8,S.length-D),N=parseInt(S.substring(D,D+L),T);8>L?(L=c(Math.pow(T,L)),C=C.j(L).add(c(N))):(C=C.j(I),C=C.add(c(N)))}return C}var h=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var S=0,T=1,I=0;I<this.g.length;I++){var C=this.i(I);S+=(0<=C?C:4294967296+C)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(x(this))return"-"+R(this).toString(S);for(var T=c(Math.pow(S,6)),I=this,C="";;){var D=P(I,T).g;I=b(I,D.j(T));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=D,_(I))return L+C;for(;6>L.length;)L="0"+L;C=L+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=b(this,S),x(S)?-1:_(S)?0:1};function R(S){for(var T=S.g.length,I=[],C=0;C<T;C++)I[C]=~S.g[C];return new o(I,~S.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],C=0,D=0;D<=T;D++){var L=C+(this.i(D)&65535)+(S.i(D)&65535),N=(L>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);C=N>>>16,L&=65535,N&=65535,I[D]=N<<16|L}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(S,T){return S.add(R(T))}t.j=function(S){if(_(this)||_(S))return h;if(x(this))return x(S)?R(this).j(R(S)):R(R(this).j(S));if(x(S))return R(this.j(R(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,I=[],C=0;C<2*T;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<S.g.length;D++){var L=this.i(C)>>>16,N=this.i(C)&65535,X=S.i(D)>>>16,we=S.i(D)&65535;I[2*C+2*D]+=N*we,w(I,2*C+2*D),I[2*C+2*D+1]+=L*we,w(I,2*C+2*D+1),I[2*C+2*D+1]+=N*X,w(I,2*C+2*D+1),I[2*C+2*D+2]+=L*X,w(I,2*C+2*D+2)}for(C=0;C<T;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=T;C<2*T;C++)I[C]=0;return new o(I,0)};function w(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function P(S,T){if(_(T))throw Error("division by zero");if(_(S))return new E(h,h);if(x(S))return T=P(R(S),T),new E(R(T.g),R(T.h));if(x(T))return T=P(S,R(T)),new E(R(T.g),T.h);if(30<S.g.length){if(x(S)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var I=m,C=T;0>=C.l(S);)I=j(I),C=j(C);var D=k(I,1),L=k(C,1);for(C=k(C,2),I=k(I,2);!_(C);){var N=L.add(C);0>=N.l(S)&&(D=D.add(I),L=N),C=k(C,1),I=k(I,1)}return T=b(S,D.j(T)),new E(D,T)}for(D=h;0<=S.l(T);){for(I=Math.max(1,Math.floor(S.m()/T.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),L=c(I),N=L.j(T);x(N)||0<N.l(S);)I-=C,L=c(I),N=L.j(T);_(L)&&(L=m),D=D.add(L),S=b(S,N)}return new E(D,S)}t.A=function(S){return P(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],C=0;C<T;C++)I[C]=this.i(C)&S.i(C);return new o(I,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],C=0;C<T;C++)I[C]=this.i(C)|S.i(C);return new o(I,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),I=[],C=0;C<T;C++)I[C]=this.i(C)^S.i(C);return new o(I,this.h^S.h)};function j(S){for(var T=S.g.length+1,I=[],C=0;C<T;C++)I[C]=S.i(C)<<1|S.i(C-1)>>>31;return new o(I,S.h)}function k(S,T){var I=T>>5;T%=32;for(var C=S.g.length-I,D=[],L=0;L<C;L++)D[L]=0<T?S.i(L+I)>>>T|S.i(L+I+1)<<32-T:S.i(L+I);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ws=o}).apply(typeof I_<"u"?I_:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _I,Pl,EI,xd,bg,xI,TI,bI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var v=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var O=u[A];if(!(O in v))break e;v=v[O]}u=u[u.length-1],A=v[u],p=p(A),p!=A&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var v=0,A=!1,O={next:function(){if(!A&&v<u.length){var U=v++;return{value:p(U,u[U]),done:!1}}return A=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,v){return u.call.apply(u.bind,arguments)}function h(u,p,v){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,A),u.apply(p,O)}}return function(){return u.apply(p,arguments)}}function m(u,p,v){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function y(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function _(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(A,O,U){for(var K=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)K[Fe-2]=arguments[Fe];return p.prototype[O].apply(A,K)}}function x(u){const p=u.length;if(0<p){const v=Array(p);for(let A=0;A<p;A++)v[A]=u[A];return v}return[]}function R(u,p){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(l(A)){const O=u.length||0,U=A.length||0;u.length=O+U;for(let K=0;K<U;K++)u[O+K]=A[K]}else u.push(A)}}class b{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var j=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function k(u,p,v){for(const A in u)p.call(v,u[A],A,u)}function S(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function T(u){const p={};for(const v in u)p[v]=u[v];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let v,A;for(let O=1;O<arguments.length;O++){A=arguments[O];for(v in A)u[v]=A[v];for(let U=0;U<I.length;U++)v=I[U],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function D(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function L(u){a.setTimeout(()=>{throw u},0)}function N(){var u=Q;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class X{constructor(){this.h=this.g=null}add(p,v){const A=we.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var we=new b(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let J,$=!1,Q=new X,ie=()=>{const u=a.Promise.resolve(void 0);J=()=>{u.then(ne)}};var ne=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(v){L(v)}var p=we;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}$=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return u}();function Ye(u,p){if(Ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(j){e:{try{P(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:rt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ye.aa.h.call(this)}}_(Ye,Ee);var rt={2:"touch",3:"pen",4:"mouse"};Ye.prototype.h=function(){Ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Ha=0;function _s(u,p,v,A,O){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=O,this.key=++Ha,this.da=this.fa=!1}function Qn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ve(u){this.src=u,this.g={},this.h=0}Ve.prototype.add=function(u,p,v,A,O){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var K=_o(u,p,A,O);return-1<K?(p=u[K],v||(p.fa=!1)):(p=new _s(p,this.src,U,!!A,O),p.fa=v,u.push(p)),p};function Yn(u,p){var v=p.type;if(v in u.g){var A=u.g[v],O=Array.prototype.indexOf.call(A,p,void 0),U;(U=0<=O)&&Array.prototype.splice.call(A,O,1),U&&(Qn(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function _o(u,p,v,A){for(var O=0;O<u.length;++O){var U=u[O];if(!U.da&&U.listener==p&&U.capture==!!v&&U.ha==A)return O}return-1}var qa="closure_lm_"+(1e6*Math.random()|0),Xn={};function su(u,p,v,A,O){if(Array.isArray(p)){for(var U=0;U<p.length;U++)su(u,p[U],v,A,O);return null}return v=Ka(v),u&&u[Dt]?u.K(p,v,c(A)?!!A.capture:!!A,O):Xf(u,p,v,!1,A,O)}function Xf(u,p,v,A,O,U){if(!p)throw Error("Invalid event type");var K=c(O)?!!O.capture:!!O,Fe=Jn(u);if(Fe||(u[qa]=Fe=new Ve(u)),v=Fe.add(p,v,A,K,U),v.proxy)return v;if(A=ou(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)Le||(O=K),O===void 0&&(O=!1),u.addEventListener(p.toString(),A,O);else if(u.attachEvent)u.attachEvent(lu(p.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ou(){function u(v){return p.call(u.src,u.listener,v)}const p=Jf;return u}function au(u,p,v,A,O){if(Array.isArray(p))for(var U=0;U<p.length;U++)au(u,p[U],v,A,O);else A=c(A)?!!A.capture:!!A,v=Ka(v),u&&u[Dt]?(u=u.i,p=String(p).toString(),p in u.g&&(U=u.g[p],v=_o(U,v,A,O),-1<v&&(Qn(U[v]),Array.prototype.splice.call(U,v,1),U.length==0&&(delete u.g[p],u.h--)))):u&&(u=Jn(u))&&(p=u.g[p.toString()],u=-1,p&&(u=_o(p,v,A,O)),(v=-1<u?p[u]:null)&&Ga(v))}function Ga(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Dt])Yn(p.i,u);else{var v=u.type,A=u.proxy;p.removeEventListener?p.removeEventListener(v,A,u.capture):p.detachEvent?p.detachEvent(lu(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=Jn(p))?(Yn(v,u),v.h==0&&(v.src=null,p[qa]=null)):Qn(u)}}}function lu(u){return u in Xn?Xn[u]:Xn[u]="on"+u}function Jf(u,p){if(u.da)u=!0;else{p=new Ye(p,this);var v=u.listener,A=u.ha||u.src;u.fa&&Ga(u),u=v.call(A,p)}return u}function Jn(u){return u=u[qa],u instanceof Ve?u:null}var Vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ka(u){return typeof u=="function"?u:(u[Vr]||(u[Vr]=function(p){return u.handleEvent(p)}),u[Vr])}function vt(){pe.call(this),this.i=new Ve(this),this.M=this,this.F=null}_(vt,pe),vt.prototype[Dt]=!0,vt.prototype.removeEventListener=function(u,p,v,A){au(this,u,p,v,A)};function Xe(u,p){var v,A=u.F;if(A)for(v=[];A;A=A.F)v.push(A);if(u=u.M,A=p.type||p,typeof p=="string")p=new Ee(p,u);else if(p instanceof Ee)p.target=p.target||u;else{var O=p;p=new Ee(A,u),C(p,O)}if(O=!0,v)for(var U=v.length-1;0<=U;U--){var K=p.g=v[U];O=un(K,A,!0,p)&&O}if(K=p.g=u,O=un(K,A,!0,p)&&O,O=un(K,A,!1,p)&&O,v)for(U=0;U<v.length;U++)K=p.g=v[U],O=un(K,A,!1,p)&&O}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],A=0;A<v.length;A++)Qn(v[A]);delete u.g[p],u.h--}}this.F=null},vt.prototype.K=function(u,p,v,A){return this.i.add(String(u),p,!1,v,A)},vt.prototype.L=function(u,p,v,A){return this.i.add(String(u),p,!0,v,A)};function un(u,p,v,A){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,U=0;U<p.length;++U){var K=p[U];if(K&&!K.da&&K.capture==v){var Fe=K.listener,Lt=K.ha||K.src;K.fa&&Yn(u.i,K),O=Fe.call(Lt,A)!==!1&&O}}return O&&!A.defaultPrevented}function Qa(u,p,v){if(typeof u=="function")v&&(u=m(u,v));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Es(u){u.g=Qa(()=>{u.g=null,u.i&&(u.i=!1,Es(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Zf extends pe{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Es(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(u){pe.call(this),this.h=u,this.g={}}_(dn,pe);var Ya=[];function Xa(u){k(u.g,function(p,v){this.g.hasOwnProperty(v)&&Ga(p)},u),u.g={}}dn.prototype.N=function(){dn.aa.N.call(this),Xa(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eo=a.JSON.stringify,em=a.JSON.parse,cu=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function yi(){}yi.prototype.h=null;function Ja(u){return u.h||(u.h=u.i())}function xo(){}var Or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Za(){Ee.call(this,"d")}_(Za,Ee);function To(){Ee.call(this,"c")}_(To,Ee);var Fr={},el=null;function Ur(){return el=el||new vt}Fr.La="serverreachability";function xs(u){Ee.call(this,Fr.La,u)}_(xs,Ee);function Ts(u){const p=Ur();Xe(p,new xs(p))}Fr.STAT_EVENT="statevent";function uu(u,p){Ee.call(this,Fr.STAT_EVENT,u),this.stat=p}_(uu,Ee);function M(u){const p=Ur();Xe(p,new uu(p,u))}Fr.Ma="timingevent";function V(u,p){Ee.call(this,Fr.Ma,u),this.size=p}_(V,Ee);function F(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function W(){this.g=!0}W.prototype.xa=function(){this.g=!1};function re(u,p,v,A,O,U){u.info(function(){if(u.g)if(U)for(var K="",Fe=U.split("&"),Lt=0;Lt<Fe.length;Lt++){var Ne=Fe[Lt].split("=");if(1<Ne.length){var $t=Ne[0];Ne=Ne[1];var zt=$t.split("_");K=2<=zt.length&&zt[1]=="type"?K+($t+"="+Ne+"&"):K+($t+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+A+") [attempt "+O+"]: "+p+`
`+v+`
`+K})}function ce(u,p,v,A,O,U,K){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+O+"]: "+p+`
`+v+`
`+U+" "+K})}function de(u,p,v,A){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+ae(u,v)+(A?" "+A:"")})}function oe(u,p){u.info(function(){return"TIMEOUT: "+p})}W.prototype.info=function(){};function ae(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var A=v[u];if(!(2>A.length)){var O=A[1];if(Array.isArray(O)&&!(1>O.length)){var U=O[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<O.length;K++)O[K]=""}}}}return Eo(v)}catch{return p}}var ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_e;function xe(){}_(xe,yi),xe.prototype.g=function(){return new XMLHttpRequest},xe.prototype.i=function(){return{}},_e=new xe;function $e(u,p,v,A){this.j=u,this.i=p,this.l=v,this.R=A||1,this.U=new dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}var Ce={},ze={};function yr(u,p,v){u.L=1,u.v=mu($r(p)),u.m=v,u.P=!0,vi(u,null)}function vi(u,p){u.F=Date.now(),wi(u),u.A=$r(u.v);var v=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Qv(v.i,"t",A),u.C=0,v=u.j.J,u.h=new Me,u.g=f1(u.j,v?p:null,!u.m),0<u.O&&(u.M=new Zf(m(u.Y,u,u.g),u.O)),p=u.U,v=u.g,A=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ya[0]=O.toString()),O=Ya);for(var U=0;U<O.length;U++){var K=su(v,O[U],A||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Ts(),re(u.i,u.u,u.A,u.l,u.R,u.m)}$e.prototype.ca=function(u){u=u.target;const p=this.M;p&&zr(u)==3?p.j():this.Y(u)},$e.prototype.Y=function(u){try{if(u==this.g)e:{const zt=zr(this.g);var p=this.g.Ba();const Ro=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||n1(this.g)))){this.J||zt!=4||p==7||(p==8||0>=Ro?Ts(3):Ts(2)),Zn(this);var v=this.g.Z();this.X=v;t:if(jn(this)){var A=n1(this.g);u="";var O=A.length,U=zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),vr(this);var K="";break t}this.h.i=new a.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,u+=this.h.i.decode(A[p],{stream:!(U&&p==O-1)});A.length=0,this.h.g+=u,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=v==200,ce(this.i,this.u,this.A,this.l,this.R,zt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Lt=this.g;if((Fe=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Fe)){var Ne=Fe;break t}}Ne=null}if(v=Ne)de(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ie(this,v);else{this.o=!1,this.s=3,M(12),On(this),vr(this);break e}}if(this.P){v=!0;let er;for(;!this.J&&this.C<K.length;)if(er=Vn(this,K),er==ze){zt==4&&(this.s=4,M(14),v=!1),de(this.i,this.l,null,"[Incomplete Response]");break}else if(er==Ce){this.s=4,M(15),de(this.i,this.l,K,"[Invalid Chunk]"),v=!1;break}else de(this.i,this.l,er,null),Ie(this,er);if(jn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||K.length!=0||this.h.h||(this.s=1,M(16),v=!1),this.o=this.o&&v,!v)de(this.i,this.l,K,"[Invalid Chunked Response]"),On(this),vr(this);else if(0<K.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),im($t),$t.M=!0,M(11))}}else de(this.i,this.l,K,null),Ie(this,K);zt==4&&On(this),this.o&&!this.J&&(zt==4?c1(this.j,this):(this.o=!1,wi(this)))}else SC(this.g),v==400&&0<K.indexOf("Unknown SID")?(this.s=3,M(12)):(this.s=0,M(13)),On(this),vr(this)}}}catch{}finally{}};function jn(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Vn(u,p){var v=u.C,A=p.indexOf(`
`,v);return A==-1?ze:(v=Number(p.substring(v,A)),isNaN(v)?Ce:(A+=1,A+v>p.length?ze:(p=p.slice(A,A+v),u.C=A+v,p)))}$e.prototype.cancel=function(){this.J=!0,On(this)};function wi(u){u.S=Date.now()+u.I,_i(u,u.I)}function _i(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=F(m(u.ba,u),p)}function Zn(u){u.B&&(a.clearTimeout(u.B),u.B=null)}$e.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(oe(this.i,this.A),this.L!=2&&(Ts(),M(17)),On(this),this.s=2,vr(this)):_i(this,this.S-u)};function vr(u){u.j.G==0||u.J||c1(u.j,u)}function On(u){Zn(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Xa(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Ie(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||wr(v.h,u))){if(!u.K&&wr(v.h,u)&&v.G==3){try{var A=v.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var O=A;if(O[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)_u(v),vu(v);else break e;rm(v),M(18)}}else v.za=O[1],0<v.za-v.T&&37500>O[2]&&v.F&&v.v==0&&!v.C&&(v.C=F(m(v.Za,v),6e3));if(1>=it(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Is(v,11)}else if((u.K||v.g==u)&&_u(v),!w(p))for(O=v.Da.g.parse(p),p=0;p<O.length;p++){let Ne=O[p];if(v.T=Ne[0],Ne=Ne[1],v.G==2)if(Ne[0]=="c"){v.K=Ne[1],v.ia=Ne[2];const $t=Ne[3];$t!=null&&(v.la=$t,v.j.info("VER="+v.la));const zt=Ne[4];zt!=null&&(v.Aa=zt,v.j.info("SVER="+v.Aa));const Ro=Ne[5];Ro!=null&&typeof Ro=="number"&&0<Ro&&(A=1.5*Ro,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const er=u.g;if(er){const xu=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xu){var U=A.h;U.g||xu.indexOf("spdy")==-1&&xu.indexOf("quic")==-1&&xu.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(bo(U,U.h),U.h=null))}if(A.D){const sm=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;sm&&(A.ya=sm,Ge(A.I,A.D,sm))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var K=u;if(A.qa=h1(A,A.J?A.ia:null,A.W),K.K){du(A.h,K);var Fe=K,Lt=A.L;Lt&&(Fe.I=Lt),Fe.B&&(Zn(Fe),wi(Fe)),A.g=K}else a1(A);0<v.i.length&&wu(v)}else Ne[0]!="stop"&&Ne[0]!="close"||Is(v,7);else v.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Is(v,7):nm(v):Ne[0]!="noop"&&v.l&&v.l.ta(Ne),v.v=0)}}Ts(4)}catch{}}var Je=class{constructor(u,p){this.g=u,this.map=p}};function Br(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ei(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function it(u){return u.h?1:u.g?u.g.size:0}function wr(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function bo(u,p){u.g?u.g.add(p):u.h=p}function du(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Br.prototype.cancel=function(){if(this.i=$v(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $v(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return x(u.i)}function dC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],v=u.length,A=0;A<v;A++)p.push(u[A]);return p}p=[],v=0;for(A in u)p[v++]=u[A];return p}function hC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const A in u)p[v++]=A;return p}}}function zv(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=hC(u),A=dC(u),O=A.length,U=0;U<O;U++)p.call(void 0,A[U],v&&v[U],u)}var Wv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fC(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var A=u[v].indexOf("="),O=null;if(0<=A){var U=u[v].substring(0,A);O=u[v].substring(A+1)}else U=u[v];p(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function bs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof bs){this.h=u.h,hu(this,u.j),this.o=u.o,this.g=u.g,fu(this,u.s),this.l=u.l;var p=u.i,v=new rl;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Hv(this,v),this.m=u.m}else u&&(p=String(u).match(Wv))?(this.h=!1,hu(this,p[1]||"",!0),this.o=tl(p[2]||""),this.g=tl(p[3]||"",!0),fu(this,p[4]),this.l=tl(p[5]||"",!0),Hv(this,p[6]||"",!0),this.m=tl(p[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}bs.prototype.toString=function(){var u=[],p=this.j;p&&u.push(nl(p,qv,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(nl(p,qv,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(nl(v,v.charAt(0)=="/"?gC:pC,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",nl(v,vC)),u.join("")};function $r(u){return new bs(u)}function hu(u,p,v){u.j=v?tl(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fu(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Hv(u,p,v){p instanceof rl?(u.i=p,wC(u.i,u.h)):(v||(p=nl(p,yC)),u.i=new rl(p,u.h))}function Ge(u,p,v){u.i.set(p,v)}function mu(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function tl(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function nl(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,mC),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qv=/[#\/\?@]/g,pC=/[#\?:]/g,gC=/[#\?]/g,yC=/[#\?@]/g,vC=/#/g;function rl(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function xi(u){u.g||(u.g=new Map,u.h=0,u.i&&fC(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=rl.prototype,t.add=function(u,p){xi(this),this.i=null,u=Io(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function Gv(u,p){xi(u),p=Io(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Kv(u,p){return xi(u),p=Io(u,p),u.g.has(p)}t.forEach=function(u,p){xi(this),this.g.forEach(function(v,A){v.forEach(function(O){u.call(p,O,A,this)},this)},this)},t.na=function(){xi(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let A=0;A<p.length;A++){const O=u[A];for(let U=0;U<O.length;U++)v.push(p[A])}return v},t.V=function(u){xi(this);let p=[];if(typeof u=="string")Kv(this,u)&&(p=p.concat(this.g.get(Io(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},t.set=function(u,p){return xi(this),this.i=null,u=Io(this,u),Kv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Qv(u,p,v){Gv(u,p),0<v.length&&(u.i=null,u.g.set(Io(u,p),x(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var A=p[v];const U=encodeURIComponent(String(A)),K=this.V(A);for(A=0;A<K.length;A++){var O=U;K[A]!==""&&(O+="="+encodeURIComponent(String(K[A]))),u.push(O)}}return this.i=u.join("&")};function Io(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function wC(u,p){p&&!u.j&&(xi(u),u.i=null,u.g.forEach(function(v,A){var O=A.toLowerCase();A!=O&&(Gv(this,A),Qv(this,O,v))},u)),u.j=p}function _C(u,p){const v=new W;if(a.Image){const A=new Image;A.onload=y(Ti,v,"TestLoadImage: loaded",!0,p,A),A.onerror=y(Ti,v,"TestLoadImage: error",!1,p,A),A.onabort=y(Ti,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=y(Ti,v,"TestLoadImage: timeout",!1,p,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else p(!1)}function EC(u,p){const v=new W,A=new AbortController,O=setTimeout(()=>{A.abort(),Ti(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:A.signal}).then(U=>{clearTimeout(O),U.ok?Ti(v,"TestPingServer: ok",!0,p):Ti(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Ti(v,"TestPingServer: error",!1,p)})}function Ti(u,p,v,A,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),A(v)}catch{}}function xC(){this.g=new cu}function TC(u,p,v){const A=v||"";try{zv(u,function(O,U){let K=O;c(O)&&(K=Eo(O)),p.push(A+U+"="+encodeURIComponent(K))})}catch(O){throw p.push(A+"type="+encodeURIComponent("_badmap")),O}}function pu(u){this.l=u.Ub||null,this.j=u.eb||!1}_(pu,yi),pu.prototype.g=function(){return new gu(this.l,this.j)},pu.prototype.i=function(u){return function(){return u}}({});function gu(u,p){vt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(gu,vt),t=gu.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,sl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,il(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?il(this):sl(this),this.readyState==3&&Yv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,il(this))},t.Qa=function(u){this.g&&(this.response=u,il(this))},t.ga=function(){this.g&&il(this)};function il(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sl(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function sl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xv(u){let p="";return k(u,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function tm(u,p,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Xv(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Ge(u,p,v))}function ut(u){vt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(ut,vt);var bC=/^https?$/i,IC=["POST","PUT"];t=ut.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?Ja(this.o):Ja(_e),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){Jv(this,U);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var O in A)v.set(O,A[O]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const U of A.keys())v.set(U,A.get(U));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(U=>U.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IC,p,void 0))||A||O||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,K]of v)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t1(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){Jv(this,U)}};function Jv(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Zv(u),yu(u)}function Zv(u){u.A||(u.A=!0,Xe(u,"complete"),Xe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Xe(this,"complete"),Xe(this,"abort"),yu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yu(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?e1(this):this.bb())},t.bb=function(){e1(this)};function e1(u){if(u.h&&typeof o<"u"&&(!u.v[1]||zr(u)!=4||u.Z()!=2)){if(u.u&&zr(u)==4)Qa(u.Ea,0,u);else if(Xe(u,"readystatechange"),zr(u)==4){u.h=!1;try{const K=u.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var A;if(A=K===0){var O=String(u.D).match(Wv)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),A=!bC.test(O?O.toLowerCase():"")}v=A}if(v)Xe(u,"complete"),Xe(u,"success");else{u.m=6;try{var U=2<zr(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",Zv(u)}}finally{yu(u)}}}}function yu(u,p){if(u.g){t1(u);const v=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Xe(u,"ready");try{v.onreadystatechange=A}catch{}}}function t1(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function zr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),em(p)}};function n1(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function SC(u){const p={};u=(u.g&&2<=zr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(w(u[A]))continue;var v=D(u[A]);const O=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const U=p[O]||[];p[O]=U,U.push(v)}S(p,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function r1(u){this.Aa=0,this.i=[],this.j=new W,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,u),this.cb=ol("retryDelaySeedMs",1e4,u),this.Wa=ol("forwardChannelMaxRetries",2,u),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Br(u&&u.concurrentRequestLimit),this.Da=new xC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=r1.prototype,t.la=8,t.G=1,t.connect=function(u,p,v,A){M(0),this.W=u,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=h1(this,null,this.W),wu(this)};function nm(u){if(i1(u),u.G==3){var p=u.U++,v=$r(u.I);if(Ge(v,"SID",u.K),Ge(v,"RID",p),Ge(v,"TYPE","terminate"),al(u,v),p=new $e(u,u.j,p),p.L=2,p.v=mu($r(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.v,v=!0),v||(p.g=f1(p.j,null),p.g.ea(p.v)),p.F=Date.now(),wi(p)}d1(u)}function vu(u){u.g&&(im(u),u.g.cancel(),u.g=null)}function i1(u){vu(u),u.u&&(a.clearTimeout(u.u),u.u=null),_u(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function wu(u){if(!Ei(u.h)&&!u.s){u.s=!0;var p=u.Ga;J||ie(),$||(J(),$=!0),Q.add(p,u),u.B=0}}function RC(u,p){return it(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=F(m(u.Ga,u,p),u1(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new $e(this,this.j,u);let U=this.o;if(this.S&&(U?(U=T(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(O.H=U,U=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=o1(this,O,p),v=$r(this.I),Ge(v,"RID",u),Ge(v,"CVER",22),this.D&&Ge(v,"X-HTTP-Session-Id",this.D),al(this,v),U&&(this.O?p="headers="+encodeURIComponent(String(Xv(U)))+"&"+p:this.m&&tm(v,this.m,U)),bo(this.h,O),this.Ua&&Ge(v,"TYPE","init"),this.P?(Ge(v,"$req",p),Ge(v,"SID","null"),O.T=!0,yr(O,v,null)):yr(O,v,p),this.G=2}}else this.G==3&&(u?s1(this,u):this.i.length==0||Ei(this.h)||s1(this))};function s1(u,p){var v;p?v=p.l:v=u.U++;const A=$r(u.I);Ge(A,"SID",u.K),Ge(A,"RID",v),Ge(A,"AID",u.T),al(u,A),u.m&&u.o&&tm(A,u.m,u.o),v=new $e(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=o1(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),bo(u.h,v),yr(v,A,p)}function al(u,p){u.H&&k(u.H,function(v,A){Ge(p,A,v)}),u.l&&zv({},function(v,A){Ge(p,A,v)})}function o1(u,p,v){v=Math.min(u.i.length,v);var A=u.l?m(u.l.Na,u.l,u):null;e:{var O=u.i;let U=-1;for(;;){const K=["count="+v];U==-1?0<v?(U=O[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let Fe=!0;for(let Lt=0;Lt<v;Lt++){let Ne=O[Lt].g;const $t=O[Lt].map;if(Ne-=U,0>Ne)U=Math.max(0,O[Lt].g-100),Fe=!1;else try{TC($t,K,"req"+Ne+"_")}catch{A&&A($t)}}if(Fe){A=K.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,A}function a1(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;J||ie(),$||(J(),$=!0),Q.add(p,u),u.v=0}}function rm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=F(m(u.Fa,u),u1(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,l1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=F(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,M(10),vu(this),l1(this))};function im(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function l1(u){u.g=new $e(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=$r(u.qa);Ge(p,"RID","rpc"),Ge(p,"SID",u.K),Ge(p,"AID",u.T),Ge(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(p,"TO",u.ja),Ge(p,"TYPE","xmlhttp"),al(u,p),u.m&&u.o&&tm(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=mu($r(p)),v.m=null,v.P=!0,vi(v,u)}t.Za=function(){this.C!=null&&(this.C=null,vu(this),rm(this),M(19))};function _u(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function c1(u,p){var v=null;if(u.g==p){_u(u),im(u),u.g=null;var A=2}else if(wr(u.h,p))v=p.D,du(u.h,p),A=1;else return;if(u.G!=0){if(p.o)if(A==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var O=u.B;A=Ur(),Xe(A,new V(A,v)),wu(u)}else a1(u);else if(O=p.s,O==3||O==0&&0<p.X||!(A==1&&RC(u,p)||A==2&&rm(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),O){case 1:Is(u,5);break;case 4:Is(u,10);break;case 3:Is(u,6);break;default:Is(u,2)}}}function u1(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function Is(u,p){if(u.j.info("Error code "+p),p==2){var v=m(u.fb,u),A=u.Xa;const O=!A;A=new bs(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hu(A,"https"),mu(A),O?_C(A.toString(),v):EC(A.toString(),v)}else M(2);u.G=0,u.l&&u.l.sa(p),d1(u),i1(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),M(2)):(this.j.info("Failed to ping google.com"),M(1))};function d1(u){if(u.G=0,u.ka=[],u.l){const p=$v(u.h);(p.length!=0||u.i.length!=0)&&(R(u.ka,p),R(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function h1(u,p,v){var A=v instanceof bs?$r(v):new bs(v);if(A.g!="")p&&(A.g=p+"."+A.g),fu(A,A.s);else{var O=a.location;A=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var U=new bs(null);A&&hu(U,A),p&&(U.g=p),O&&fu(U,O),v&&(U.l=v),A=U}return v=u.D,p=u.ya,v&&p&&Ge(A,v,p),Ge(A,"VER",u.la),al(u,A),A}function f1(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ut(new pu({eb:v})):new ut(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function m1(){}t=m1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Eu(){}Eu.prototype.g=function(u,p){return new Tn(u,p)};function Tn(u,p){vt.call(this),this.g=new r1(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!w(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new So(this)}_(Tn,vt),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){nm(this.g)},Tn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Eo(u),u=v);p.i.push(new Je(p.Ya++,u)),p.G==3&&wu(p)},Tn.prototype.N=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,Tn.aa.N.call(this)};function p1(u){Za.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(p1,Za);function g1(){To.call(this),this.status=1}_(g1,To);function So(u){this.g=u}_(So,m1),So.prototype.ua=function(){Xe(this.g,"a")},So.prototype.ta=function(u){Xe(this.g,new p1(u))},So.prototype.sa=function(u){Xe(this.g,new g1)},So.prototype.ra=function(){Xe(this.g,"b")},Eu.prototype.createWebChannel=Eu.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,bI=function(){return new Eu},TI=function(){return Ur()},xI=Fr,bg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,xd=ee,le.COMPLETE="complete",EI=le,xo.EventType=Or,Or.OPEN="a",Or.CLOSE="b",Or.ERROR="c",Or.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Pl=xo,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,_I=ut}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const S_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new of("@firebase/firestore");function ko(){return no.logLevel}function te(t,...e){if(no.logLevel<=Se.DEBUG){const n=e.map(xy);no.debug(`Firestore (${Ua}): ${t}`,...n)}}function hi(t,...e){if(no.logLevel<=Se.ERROR){const n=e.map(xy);no.error(`Firestore (${Ua}): ${t}`,...n)}}function wa(t,...e){if(no.logLevel<=Se.WARN){const n=e.map(xy);no.warn(`Firestore (${Ua}): ${t}`,...n)}}function xy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t="Unexpected state"){const e=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: `+t;throw hi(e),new Error(e)}function De(t,e){t||me()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kt.UNAUTHENTICATED))}shutdown(){}}class AL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CL{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ri,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ri)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new II(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Kt(e)}}class PL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new PL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new NL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=LL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function _a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new ht(0,0))}static max(){return new ge(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(),r===void 0?r=e.length-n:r>e.length-n&&me(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class We extends Tc{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const ML=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Tc{construct(e,n,r){return new Ot(e,n,r)}static isValidIdentifier(e){return ML.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(We.fromString(e))}static fromName(e){return new ue(We.fromString(e).popFirst(5))}static empty(){return new ue(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new We(e.slice()))}}function jL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new ts(i,ue.empty(),e)}function VL(t){return new ts(t.readTime,t.key,-1)}class ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ts(ge.min(),ue.empty(),-1)}static max(){return new ts(ge.max(),ue.empty(),-1)}}function OL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==FL)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function BL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $a(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}df.oe=-1;function hf(t){return t==null}function fh(t){return t===0&&1/t==-1/0}function $L(t){return typeof t=="number"&&Number.isInteger(t)&&!fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=R_(e)),e=WL(t.get(n),e);return R_(e)}function WL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function R_(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Vt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vt.RED,this.left=i??Vt.EMPTY,this.right=s??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Vt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C_(this.data.getIterator())}getIteratorFrom(e){return new C_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class C_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new St(Ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AI("Invalid base64 string: "+s):s}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const HL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(De(!!t),typeof t=="string"){let e=0;const n=HL.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mf(t){const e=t.mapValue.fields.__previous_value__;return ff(e)?mf(e):e}function bc(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ic{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ic("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ff(t)?4:KL(t)?9007199254740991:GL(t)?10:11:me()}function kr(t,e){if(t===e)return!0;const n=is(t);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bc(t).isEqual(bc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ns(i.timestampValue),a=ns(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return rs(i.bytesValue).isEqual(rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return mt(i.geoPointValue.latitude)===mt(s.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return mt(i.integerValue)===mt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=mt(i.doubleValue),a=mt(s.doubleValue);return o===a?fh(o)===fh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return _a(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(A_(o)!==A_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!kr(o[l],a[l])))return!1;return!0}(t,e);default:return me()}}function Sc(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;const n=is(t),r=is(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=mt(s.integerValue||s.doubleValue),l=mt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return P_(t.timestampValue,e.timestampValue);case 4:return P_(bc(t),bc(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){const a=rs(s),l=rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ae(a[c],l[c]);if(d!==0)return d}return Ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ae(mt(s.latitude),mt(o.latitude));return a!==0?a:Ae(mt(s.longitude),mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},m=o.fields||{},y=(a=h.value)===null||a===void 0?void 0:a.arrayValue,_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=Ae(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:k_(y,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Wu.mapValue&&o===Wu.mapValue)return 0;if(s===Wu.mapValue)return 1;if(o===Wu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=Ae(l[h],d[h]);if(m!==0)return m;const y=Ea(a[l[h]],c[d[h]]);if(y!==0)return y}return Ae(l.length,d.length)}(t.mapValue,e.mapValue);default:throw me()}}function P_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=ns(t),r=ns(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function k_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ea(n[i],r[i]);if(s)return s}return Ae(n.length,r.length)}function xa(t){return Ig(t)}function Ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ig(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ig(n.fields[o])}`;return i+"}"}(t.mapValue):me()}function Td(t){switch(is(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(t);return e?16+Td(e):16;case 5:return 2*t.stringValue.length;case 6:return rs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Td(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return gs(r.fields,(s,o)=>{i+=s.length+Td(o)}),i}(t.mapValue);default:throw me()}}function mh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sg(t){return!!t&&"integerValue"in t}function Ty(t){return!!t&&"arrayValue"in t}function N_(t){return!!t&&"nullValue"in t}function D_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bd(t){return!!t&&"mapValue"in t}function GL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Hl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(n)}setAll(e){let n=Ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Hl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new pn(Hl(this.value))}}function CI(t){const e=[];return gs(t.fields,(n,r)=>{const i=new Ot([n]);if(bd(r)){const s=CI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Yt(e,0,ge.min(),ge.min(),ge.min(),pn.empty(),0)}static newFoundDocument(e,n,r,i){return new Yt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new Yt(e,2,n,ge.min(),ge.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,ge.min(),ge.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.position=e,this.inclusive=n}}function L_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),n.key):r=Ea(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function M_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function QL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{}class Tt extends PI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XL(e,n,r):n==="array-contains"?new eM(e,r):n==="in"?new tM(e,r):n==="not-in"?new nM(e,r):n==="array-contains-any"?new rM(e,r):new Tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new JL(e,r):new ZL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ea(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends PI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new fr(e,n)}matches(e){return kI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kI(t){return t.op==="and"}function NI(t){return YL(t)&&kI(t)}function YL(t){for(const e of t.filters)if(e instanceof fr)return!1;return!0}function Rg(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+xa(t.value);if(NI(t))return t.filters.map(e=>Rg(e)).join(",");{const e=t.filters.map(n=>Rg(n)).join(",");return`${t.op}(${e})`}}function DI(t,e){return t instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&DI(o,i.filters[a]),!0):!1}(t,e):void me()}function LI(t){return t instanceof Tt?function(n){return`${n.field.canonicalString()} ${n.op} ${xa(n.value)}`}(t):t instanceof fr?function(n){return n.op.toString()+" {"+n.getFilters().map(LI).join(" ,")+"}"}(t):"Filter"}class XL extends Tt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class JL extends Tt{constructor(e,n){super(e,"in",n),this.keys=MI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZL extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=MI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class eM extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ty(n)&&Sc(n.arrayValue,this.value)}}class tM extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sc(this.value.arrayValue,n)}}class nM extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sc(this.value.arrayValue,n)}}class rM extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ty(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function j_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new iM(t,e,n,r,i,s,o)}function by(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xa(r)).join(",")),e.ue=n}return e.ue}function Iy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!M_(t.startAt,e.startAt)&&M_(t.endAt,e.endAt)}function Ag(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sM(t,e,n,r,i,s,o,a){return new fo(t,e,n,r,i,s,o,a)}function pf(t){return new fo(t)}function V_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sy(t){return t.collectionGroup!==null}function aa(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new St(Ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rc(s,r))}),n.has(Ot.keyField().canonicalString())||e.ce.push(new Rc(Ot.keyField(),r))}return e.ce}function Ar(t){const e=ye(t);return e.le||(e.le=oM(e,aa(t))),e.le}function oM(t,e){if(t.limitType==="F")return j_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Rc(i.field,s)});const n=t.endAt?new Ta(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ta(t.startAt.position,t.startAt.inclusive):null;return j_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cg(t,e){const n=t.filters.concat([e]);return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ph(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gf(t,e){return Iy(Ar(t),Ar(e))&&t.limitType===e.limitType}function jI(t){return`${by(Ar(t))}|lt:${t.limitType}`}function No(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LI(i)).join(", ")}]`),hf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xa(i)).join(",")),`Target(${r})`}(Ar(t))}; limitType=${t.limitType})`}function yf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of aa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=L_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,aa(r),i)||r.endAt&&!function(o,a,l){const c=L_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,aa(r),i))}(t,e)}function aM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VI(t){return(e,n)=>{let r=!1;for(const i of aa(t)){const s=lM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lM(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ea(l,c):me()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return RI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new ct(ue.comparator);function fi(){return cM}const OI=new ct(ue.comparator);function kl(...t){let e=OI;for(const n of t)e=e.insert(n.key,n);return e}function FI(t){let e=OI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fs(){return ql()}function UI(){return ql()}function ql(){return new mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const uM=new ct(ue.comparator),dM=new St(ue.comparator);function Re(...t){let e=dM;for(const n of t)e=e.add(n);return e}const hM=new St(Ae);function fM(){return hM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function BI(t){return{integerValue:""+t}}function $I(t,e){return $L(e)?BI(e):Ry(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function mM(t,e,n){return t instanceof Ac?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ff(s)&&(s=mf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ba?WI(t,e):t instanceof Ia?HI(t,e):function(i,s){const o=zI(i,s),a=O_(o)+O_(i.Pe);return Sg(o)&&Sg(i.Pe)?BI(a):Ry(i.serializer,a)}(t,e)}function pM(t,e,n){return t instanceof ba?WI(t,e):t instanceof Ia?HI(t,e):n}function zI(t,e){return t instanceof Cc?function(r){return Sg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ac extends vf{}class ba extends vf{constructor(e){super(),this.elements=e}}function WI(t,e){const n=qI(e);for(const r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ia extends vf{constructor(e){super(),this.elements=e}}function HI(t,e){let n=qI(e);for(const r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}class Cc extends vf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function O_(t){return mt(t.integerValue||t.doubleValue)}function qI(t){return Ty(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.field=e,this.transform=n}}function gM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ba&&i instanceof ba||r instanceof Ia&&i instanceof Ia?_a(r.elements,i.elements,kr):r instanceof Cc&&i instanceof Cc?kr(r.Pe,i.Pe):r instanceof Ac&&i instanceof Ac}(t.transform,e.transform)}class yM{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Id(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _f{}function GI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ef(t.key,on.none()):new zc(t.key,t.data,on.none());{const n=t.data,r=pn.empty();let i=new St(Ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ys(t.key,r,new Rn(i.toArray()),on.none())}}function vM(t,e,n){t instanceof zc?function(i,s,o){const a=i.value.clone(),l=U_(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ys?function(i,s,o){if(!Id(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=U_(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(KI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Gl(t,e,n,r){return t instanceof zc?function(s,o,a,l){if(!Id(s.precondition,o))return a;const c=s.value.clone(),d=B_(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ys?function(s,o,a,l){if(!Id(s.precondition,o))return a;const c=B_(s.fieldTransforms,l,o),d=o.data;return d.setAll(KI(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Id(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function wM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zI(r.transform,i||null);s!=null&&(n===null&&(n=pn.empty()),n.set(r.field,s))}return n||null}function F_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_a(r,i,(s,o)=>gM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zc extends _f{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ys extends _f{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U_(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pM(o,a,n[i]))}return r}function B_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,mM(s,o,e))}return r}class Ef extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _M extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&vM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=GI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(n,r)=>F_(n,r))&&_a(this.baseMutations,e.baseMutations,(n,r)=>F_(n,r))}}class Ay{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return uM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ay(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Pe;function bM(t){switch(t){default:return me();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function QI(t){if(t===void 0)return hi("GRPC error has no .code"),B.UNKNOWN;switch(t){case wt.OK:return B.OK;case wt.CANCELLED:return B.CANCELLED;case wt.UNKNOWN:return B.UNKNOWN;case wt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case wt.INTERNAL:return B.INTERNAL;case wt.UNAVAILABLE:return B.UNAVAILABLE;case wt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case wt.NOT_FOUND:return B.NOT_FOUND;case wt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case wt.ABORTED:return B.ABORTED;case wt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case wt.DATA_LOSS:return B.DATA_LOSS;default:return me()}}(Pe=wt||(wt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=new Ws([4294967295,4294967295],0);function $_(t){const e=IM().encode(t),n=new wI;return n.update(e),new Uint8Array(n.digest())}function z_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ws([n,r],0),new Ws([i,s],0)]}class Cy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nl(`Invalid padding: ${n}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ws.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Ws.fromNumber(r)));return i.compare(SM)===1&&(i=new Ws([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=$_(e),[r,i]=z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=$_(e),[r,i]=z_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xf(ge.min(),i,new ct(Ae),fi(),Re())}}class Wc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wc(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class YI{constructor(e,n){this.targetId=e,this.me=n}}class XI{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class W_{constructor(){this.fe=0,this.ge=H_(),this.pe=Bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),r=Re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:me()}}),new Wc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=H_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RM{constructor(e){this.Le=e,this.Be=new Map,this.ke=fi(),this.qe=Hu(),this.Qe=Hu(),this.Ke=new ct(Ae)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Ag(s))if(r===0){const o=new ue(s.path);this.We(n,o,Yt.newNoDocument(o,ge.min()))}else De(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=rs(r).toUint8Array()}catch(l){if(l instanceof AI)return wa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Cy(o,i,s)}catch(l){return wa(l instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Ag(a.target)){const l=new ue(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Yt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Re();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new xf(e,n,this.Ke,this.ke,r);return this.ke=fi(),this.qe=Hu(),this.Qe=Hu(),this.Ke=new ct(Ae),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new W_,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new St(Ae),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(Ae),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new W_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Hu(){return new ct(ue.comparator)}function H_(){return new ct(ue.comparator)}const AM={asc:"ASCENDING",desc:"DESCENDING"},CM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PM={and:"AND",or:"OR"};class kM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pg(t,e){return t.useProto3Json||hf(e)?e:{value:e}}function gh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NM(t,e){return gh(t,e.toTimestamp())}function Cr(t){return De(!!t),ge.fromTimestamp(function(n){const r=ns(n);return new ht(r.seconds,r.nanos)}(t))}function Py(t,e){return kg(t,e).canonicalString()}function kg(t,e){const n=function(i){return new We(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZI(t){const e=We.fromString(t);return De(iS(e)),e}function Ng(t,e){return Py(t.databaseId,e.path)}function $m(t,e){const n=ZI(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(tS(n))}function eS(t,e){return Py(t.databaseId,e)}function DM(t){const e=ZI(t);return e.length===4?We.emptyPath():tS(e)}function Dg(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tS(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function q_(t,e,n){return{name:Ng(t,e),fields:n.value.mapValue.fields}}function LM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(De(d===void 0||typeof d=="string"),Bt.fromBase64String(d||"")):(De(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?B.UNKNOWN:QI(c.code);return new Y(d,c.message||"")}(o);n=new XI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$m(t,r.document.name),s=Cr(r.document.updateTime),o=r.document.createTime?Cr(r.document.createTime):ge.min(),a=new pn({mapValue:{fields:r.document.fields}}),l=Yt.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Sd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$m(t,r.document),s=r.readTime?Cr(r.readTime):ge.min(),o=Yt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Sd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$m(t,r.document),s=r.removedTargetIds||[];n=new Sd([],s,i,null)}else{if(!("filter"in e))return me();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new TM(i,s),a=r.targetId;n=new YI(a,o)}}return n}function MM(t,e){let n;if(e instanceof zc)n={update:q_(t,e.key,e.value)};else if(e instanceof Ef)n={delete:Ng(t,e.key)};else if(e instanceof ys)n={update:q_(t,e.key,e.data),updateMask:WM(e.fieldMask)};else{if(!(e instanceof _M))return me();n={verify:Ng(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ac)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ba)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ia)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw me()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:NM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me()}(t,e.precondition)),n}function jM(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Cr(i.updateTime):Cr(s);return o.isEqual(ge.min())&&(o=Cr(s)),new yM(o,i.transformResults||[])}(n,e))):[]}function VM(t,e){return{documents:[eS(t,e.path)]}}function OM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eS(t,i);const s=function(c){if(c.length!==0)return rS(fr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Do(m.field),direction:BM(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Pg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function FM(t){let e=DM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=nS(h);return m instanceof fr&&NI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(_){return new Rc(Lo(_.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,hf(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,y=h.values||[];return new Ta(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,y=h.values||[];return new Ta(y,m)}(n.endAt)),sM(e,i,o,s,a,"F",l,c)}function UM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Lo(n.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Lo(n.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lo(n.unaryFilter.field);return Tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lo(n.unaryFilter.field);return Tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):t.fieldFilter!==void 0?function(n){return Tt.create(Lo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fr.create(n.compositeFilter.filters.map(r=>nS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(t):me()}function BM(t){return AM[t]}function $M(t){return CM[t]}function zM(t){return PM[t]}function Do(t){return{fieldPath:t.canonicalString()}}function Lo(t){return Ot.fromServerFormat(t.fieldPath)}function rS(t){return t instanceof Tt?function(n){if(n.op==="=="){if(D_(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NAN"}};if(N_(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D_(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NOT_NAN"}};if(N_(n.value))return{unaryFilter:{field:Do(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(n.field),op:$M(n.op),value:n.value}}}(t):t instanceof fr?function(n){const r=n.getFilters().map(i=>rS(i));return r.length===1?r[0]:{compositeFilter:{op:zM(n.op),filters:r}}}(t):me()}function WM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,r,i,s=ge.min(),o=ge.min(),a=Bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.ht=e}}function qM(t){const e=FM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.ln=new KM}addToCollectionParentIndex(e,n){return this.ln.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ts.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class KM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new St(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Sa(0)}static Qn(){return new Sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_([t,e],[n,r]){const i=Ae(t,n);return i===0?Ae(e,r):i}class QM{constructor(e){this.Gn=e,this.buffer=new St(K_),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();K_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$a(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ba(n)}await this.Yn(3e5)})}}class XM{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(df.oe);const r=new QM(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(G_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G_):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ko()<=Se.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function JM(t,e){return new XM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.changes=new mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gl(r.mutation,i,Rn.empty(),ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const i=Fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=kl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fi();const o=ql(),a=function(){return ql()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ys)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Gl(d.mutation,c,d.mutation.getFieldMask(),ht.now())):o.set(c.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new ej(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ql();let i=new ct((o,a)=>o-a),s=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Rn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||Re()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=UI();d.forEach(m=>{if(!s.has(m)){const y=GI(n.get(m),r.get(m));y!==null&&h.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(Fs());let a=-1,l=s;return o.next(c=>z.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Re())).next(d=>({batchId:a,changes:FI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let i=kl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=kl();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,l=>{const c=function(h,m){return new fo(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Yt.newInvalidDocument(d)))});let a=kl();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Gl(d.mutation,c,Rn.empty(),ht.now()),yf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return z.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Cr(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:qM(i.bundledQuery),readTime:Cr(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.overlays=new ct(ue.comparator),this.Er=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fs();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=Fs(),s=n.length+1,o=new ue(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ct((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Fs(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Fs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return z.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xM(n,r));let s=this.Er.get(n);s===void 0&&(s=Re(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.dr=new St(Ct.Ar),this.Rr=new St(Ct.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Ct(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Ct(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new ue(new We([])),r=new Ct(n,e),i=new Ct(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ue(new We([])),r=new Ct(n,e),i=new Ct(n,e+1);let s=Re();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ct(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ue.comparator(e.key,n.key)||Ae(e.br,n.br)}static Vr(e,n){return Ae(e.br,n.br)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new St(Ct.Ar)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new EM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ct(n,0),i=new Ct(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ae);return n.forEach(i=>{const s=new Ct(i,0),o=new Ct(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),z.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ue.isDocumentKey(s)||(s=s.child(""));const o=new Ct(new ue(s),0);let a=new St(Ae);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),z.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return z.forEach(n.mutations,i=>{const s=new Ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Ct(n,0),i=this.vr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.Nr=e,this.docs=function(){return new ct(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=fi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Yt.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fi();const o=n.path,a=new ue(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||OL(VL(d),r)<=0||(i.has(d.key)||yf(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){me()}Lr(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aj(this)}getSize(e){return z.resolve(this.size)}}class aj extends ZM{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.persistence=e,this.Br=new mo(n=>by(n),Iy),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.kr=0,this.qr=new ky,this.targetCount=0,this.Qr=Sa.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),z.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Sa(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Un(n),z.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this.Kr={},this.overlays={},this.$r=new df(0),this.Ur=!1,this.Ur=!0,this.Wr=new ij,this.referenceDelegate=e(this),this.Gr=new lj(this),this.indexManager=new GM,this.remoteDocumentCache=function(i){return new oj(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new HM(n),this.jr=new nj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new sj(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new cj(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return z.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class cj extends UL{constructor(e){super(),this.currentSequenceNumber=e}}class Ny{constructor(e){this.persistence=e,this.Zr=new ky,this.Xr=null}static ei(e){return new Ny(e)}get ti(){if(this.Xr)return this.Xr;throw me()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),z.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.ti,r=>{const i=ue.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return z.or([()=>z.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.ri=new mo(r=>zL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JM(this,n)}static ei(e,n){return new yh(e,n)}Hr(){}Jr(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return z.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),z.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Td(e.data.value)),n}ir(e,n,r){return z.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=Re(),i=Re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Dy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return KN()?8:BL(en())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new uj;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(ko()<=Se.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",No(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),z.resolve()):(ko()<=Se.DEBUG&&te("QueryEngine","Query:",No(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(ko()<=Se.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",No(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(n))):z.resolve())}Xi(e,n){if(V_(n))return z.resolve(null);let r=Ar(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ph(n,null,"F"),r=Ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Re(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,ph(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return V_(n)||i.isEqual(ge.min())?z.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?z.resolve(null):(ko()<=Se.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),No(n)),this.os(e,o,n,jL(i,-1)).next(a=>a))})}rs(e,n){let r=new St(VI(e));return n.forEach((i,s)=>{yf(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return ko()<=Se.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",No(n)),this.Zi.getDocumentsMatchingQuery(e,n,ts.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new ct(Ae),this.cs=new mo(s=>by(s),Iy),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tj(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function fj(t,e,n,r){return new hj(t,e,n,r)}async function oS(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Re();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function mj(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let y=z.resolve();return m.forEach(_=>{y=y.next(()=>d.getEntry(l,_)).next(x=>{const R=c.docVersions.get(_);De(R!==null),x.version.compareTo(R)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function aS(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function pj(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Gr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Gr.addMatchingKeys(s,d.addedDocuments,h)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(Bt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(x,R,b){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,y,d)&&a.push(n.Gr.updateTargetData(s,y))});let l=fi(),c=Re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(gj(s,o,e.documentUpdates).next(d=>{l=d.Is,c=d.Es})),!r.isEqual(ge.min())){const d=n.Gr.getLastRemoteSnapshotVersion(s).next(h=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function gj(t,e,n){let r=Re(),i=Re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function yj(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vj(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Ui(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Lg(t,e,n){const r=ye(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$a(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function Q_(t,e,n){const r=ye(t);let i=ge.min(),s=Re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=ye(l),m=h.cs.get(d);return m!==void 0?z.resolve(h.us.get(m)):h.Gr.getTargetData(c,d)}(r,o,Ar(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:Re())).next(a=>(wj(r,aM(e),a),{documents:a,ds:s})))}function wj(t,e,n){let r=t.ls.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class Y_{constructor(){this.activeTargetIds=fM()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _j{constructor(){this._o=new Y_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Y_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function zm(){return qu===null?qu=function(){return 268435456+Math.round(2147483648*Math.random())}():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class bj extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=zm(),l=this.No(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,l,c,i).then(d=>(te("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw wa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=xj[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=zm();return new Promise((o,a)=>{const l=new _I;l.setWithCredentials(!0),l.listenOnce(EI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xd.NO_ERROR:const d=l.getResponseJson();te(qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case xd.TIMEOUT:te(qt,`RPC '${e}' ${s} timed out`),a(new Y(B.DEADLINE_EXCEEDED,"Request time out"));break;case xd.HTTP_ERROR:const h=l.getStatus();if(te(qt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const _=function(R){const b=R.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(b)>=0?b:B.UNKNOWN}(y.status);a(new Y(_,y.message))}else a(new Y(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(B.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{te(qt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);te(qt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=zm(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bI(),a=TI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");te(qt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,y=!1;const _=new Tj({Eo:R=>{y?te(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(te(qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),te(qt,`RPC '${e}' stream ${i} sending:`,R),h.send(R))},Ao:()=>h.close()}),x=(R,b,w)=>{R.listen(b,E=>{try{w(E)}catch(P){setTimeout(()=>{throw P},0)}})};return x(h,Pl.EventType.OPEN,()=>{y||(te(qt,`RPC '${e}' stream ${i} transport opened.`),_.So())}),x(h,Pl.EventType.CLOSE,()=>{y||(y=!0,te(qt,`RPC '${e}' stream ${i} transport closed`),_.Do())}),x(h,Pl.EventType.ERROR,R=>{y||(y=!0,wa(qt,`RPC '${e}' stream ${i} transport errored:`,R),_.Do(new Y(B.UNAVAILABLE,"The operation could not be completed")))}),x(h,Pl.EventType.MESSAGE,R=>{var b;if(!y){const w=R.data[0];De(!!w);const E=w,P=(E==null?void 0:E.error)||((b=E[0])===null||b===void 0?void 0:b.error);if(P){te(qt,`RPC '${e}' stream ${i} received error:`,P);const j=P.status;let k=function(I){const C=wt[I];if(C!==void 0)return QI(C)}(j),S=P.message;k===void 0&&(k=B.INTERNAL,S="Unknown error status: "+j+" with message "+P.message),y=!0,_.Do(new Y(k,S)),h.close()}else te(qt,`RPC '${e}' stream ${i} received:`,w),_.vo(w)}}),x(a,xI.STAT_EVENT,R=>{R.stat===bg.PROXY?te(qt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===bg.NOPROXY&&te(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.bo()},0),_}}function Wm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){return new kM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new lS(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new Y(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ij extends cS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=LM(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Cr(o.readTime):ge.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Dg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ag(l)?{documents:VM(s,l)}:{query:OM(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=JI(s,o.resumeToken);const c=Pg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=gh(s,o.snapshotVersion.toTimestamp());const c=Pg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=UM(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Dg(this.serializer),n.removeTarget=e,this.c_(n)}}class Sj extends cS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=jM(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Dg(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MM(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,kg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(B.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,kg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(B.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Aj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(hi(n),this.C_=!1):te("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{po(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ye(l);c.k_.add(4),await Hc(c),c.K_.set("Unknown"),c.k_.delete(4),await bf(c)}(this))})}),this.K_=new Aj(r,i)}}async function bf(t){if(po(t))for(const e of t.q_)await e(!0)}async function Hc(t){for(const e of t.q_)await e(!1)}function uS(t,e){const n=ye(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Vy(n)?jy(n):za(n).s_()&&My(n,e))}function Ly(t,e){const n=ye(t),r=za(n);n.B_.delete(e),r.s_()&&dS(n,e),n.B_.size===0&&(r.s_()?r.a_():po(n)&&n.K_.set("Unknown"))}function My(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}za(t).V_(e)}function dS(t,e){t.U_.xe(e),za(t).m_(e)}function jy(t){t.U_=new RM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),za(t).start(),t.K_.F_()}function Vy(t){return po(t)&&!za(t).i_()&&t.B_.size>0}function po(t){return ye(t).k_.size===0}function hS(t){t.U_=void 0}async function Pj(t){t.K_.set("Online")}async function kj(t){t.B_.forEach((e,n)=>{My(t,e)})}async function Nj(t,e){hS(t),Vy(t)?(t.K_.O_(e),jy(t)):t.K_.set("Unknown")}async function Dj(t,e,n){if(t.K_.set("Online"),e instanceof XI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vh(t,r)}else if(e instanceof Sd?t.U_.$e(e):e instanceof YI?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(ge.min()))try{const r=await aS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.B_.get(c);d&&s.B_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.B_.get(l);if(!d)return;s.B_.set(l,d.withResumeToken(Bt.EMPTY_BYTE_STRING,d.snapshotVersion)),dS(s,l);const h=new Ui(d.target,l,c,d.sequenceNumber);My(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await vh(t,r)}}async function vh(t,e,n){if(!$a(e))throw e;t.k_.add(1),await Hc(t),t.K_.set("Offline"),n||(n=()=>aS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await bf(t)})}function fS(t,e){return e().catch(n=>vh(t,n,e))}async function If(t){const e=ye(t),n=ss(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;Lj(e);)try{const i=await yj(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,Mj(e,i)}catch(i){await vh(e,i)}mS(e)&&pS(e)}function Lj(t){return po(t)&&t.L_.length<10}function Mj(t,e){t.L_.push(e);const n=ss(t);n.s_()&&n.f_&&n.g_(e.mutations)}function mS(t){return po(t)&&!ss(t).i_()&&t.L_.length>0}function pS(t){ss(t).start()}async function jj(t){ss(t).w_()}async function Vj(t){const e=ss(t);for(const n of t.L_)e.g_(n.mutations)}async function Oj(t,e,n){const r=t.L_.shift(),i=Ay.from(r,e,n);await fS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await If(t)}async function Fj(t,e){e&&ss(t).f_&&await async function(r,i){if(function(o){return bM(o)&&o!==B.ABORTED}(i.code)){const s=r.L_.shift();ss(r).__(),await fS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await If(r)}}(t,e),mS(t)&&pS(t)}async function J_(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=po(n);n.k_.add(3),await Hc(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await bf(n)}async function Uj(t,e){const n=ye(t);e?(n.k_.delete(2),await bf(n)):e||(n.k_.add(2),await Hc(n),n.K_.set("Unknown"))}function za(t){return t.W_||(t.W_=function(n,r,i){const s=ye(n);return s.b_(),new Ij(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:Pj.bind(null,t),mo:kj.bind(null,t),po:Nj.bind(null,t),R_:Dj.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Vy(t)?jy(t):t.K_.set("Unknown")):(await t.W_.stop(),hS(t))})),t.W_}function ss(t){return t.G_||(t.G_=function(n,r,i){const s=ye(n);return s.b_(),new Sj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:jj.bind(null,t),po:Fj.bind(null,t),p_:Vj.bind(null,t),y_:Oj.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await If(t)):(await t.G_.stop(),t.L_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Oy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fy(t,e){if(hi("AsyncQueue",`${e}: ${t}`),$a(t))return new Y(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{static emptySet(e){return new la(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=kl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof la)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new la;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.z_=new ct(ue.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):me():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ra{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ra(e,n,la.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class $j{constructor(){this.queries=eE(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=ye(n),s=i.queries;i.queries=eE(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new Y(B.ABORTED,"Firestore shutting down"))}}function eE(){return new mo(t=>jI(t),gf)}async function Uy(t,e){const n=ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new Bj,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Fy(o,`Initialization of query '${No(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&$y(n)}async function By(t,e){const n=ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zj(t,e){const n=ye(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&$y(n)}function Wj(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function $y(t){t.X_.forEach(e=>{e.next()})}var Mg,tE;(tE=Mg||(Mg={})).na="default",tE.Cache="cache";class zy{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class Hj{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Re(),this.mutatedKeys=Re(),this.Va=VI(e),this.ma=new la(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new Z_,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),y=yf(this.query,h)?h:null,_=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;m&&y?m.data.isEqual(y.data)?_!==x&&(r.track({type:3,doc:y}),R=!0):this.ya(m,y)||(r.track({type:2,doc:y}),R=!0,(l&&this.Va(y,l)>0||c&&this.Va(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(l||c)&&(a=!0)),R&&(y?(o=o.add(y),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((d,h)=>function(y,_){const x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return x(y)-x(_)}(d.type,h.type)||this.Va(d.doc,h.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new Ra(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Z_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Re(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new yS(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new gS(r))}),n}va(e){this.da=e.ds,this.Ra=Re();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Ra.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class qj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Gj{constructor(e){this.key=e,this.Fa=!1}}class Kj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new mo(a=>jI(a),gf),this.Oa=new Map,this.Na=new Set,this.La=new ct(ue.comparator),this.Ba=new Map,this.ka=new ky,this.qa={},this.Qa=new Map,this.Ka=Sa.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Qj(t,e,n=!0){const r=TS(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await vS(r,e,n,!0),i}async function Yj(t,e){const n=TS(t);await vS(n,e,!0,!1)}async function vS(t,e,n,r){const i=await vj(t.localStore,Ar(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Xj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&uS(t.remoteStore,i),a}async function Xj(t,e,n,r,i){t.Ua=(h,m,y)=>async function(x,R,b,w){let E=R.view.ga(b);E.ss&&(E=await Q_(x.localStore,R.query,!1).then(({documents:S})=>R.view.ga(S,E)));const P=w&&w.targetChanges.get(R.targetId),j=w&&w.targetMismatches.get(R.targetId)!=null,k=R.view.applyChanges(E,x.isPrimaryClient,P,j);return rE(x,R.targetId,k.ba),k.snapshot}(t,h,m,y);const s=await Q_(t.localStore,e,!0),o=new Hj(e,s.ds),a=o.ga(s.documents),l=Wc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);rE(t,n,c.ba);const d=new qj(e,n,o);return t.xa.set(e,d),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function Jj(t,e,n){const r=ye(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!gf(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ly(r.remoteStore,i.targetId),jg(r,i.targetId)}).catch(Ba)):(jg(r,i.targetId),await Lg(r.localStore,i.targetId,!0))}async function Zj(t,e){const n=ye(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ly(n.remoteStore,r.targetId))}async function eV(t,e,n){const r=aV(t);try{const i=await function(o,a){const l=ye(o),c=ht.now(),d=a.reduce((y,_)=>y.add(_.key),Re());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=fi(),x=Re();return l.hs.getEntries(y,d).next(R=>{_=R,_.forEach((b,w)=>{w.isValidDocument()||(x=x.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,_)).next(R=>{h=R;const b=[];for(const w of a){const E=wM(w,h.get(w.key).overlayedDocument);E!=null&&b.push(new ys(w.key,E,CI(E.value.mapValue),on.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,b,a)}).next(R=>{m=R;const b=R.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(y,R.batchId,b)})}).then(()=>({batchId:m.batchId,changes:FI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new ct(Ae)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await qc(r,i.changes),await If(r.remoteStore)}catch(i){const s=Fy(i,"Failed to persist write");n.reject(s)}}async function wS(t,e){const n=ye(t);try{const r=await pj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?De(o.Fa):i.removedDocuments.size>0&&(De(o.Fa),o.Fa=!1))}),await qc(n,r,e)}catch(r){await Ba(r)}}function nE(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.J_)m.ea(a)&&(c=!0)}),c&&$y(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tV(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new ct(ue.comparator);o=o.insert(s,Yt.newNoDocument(s,ge.min()));const a=Re().add(s),l=new xf(ge.min(),new Map,new ct(Ae),o,a);await wS(r,l),r.La=r.La.remove(s),r.Ba.delete(e),Wy(r)}else await Lg(r.localStore,e,!1).then(()=>jg(r,e,n)).catch(Ba)}async function nV(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await mj(n.localStore,e);ES(n,r,null),_S(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qc(n,i)}catch(i){await Ba(i)}}async function rV(t,e,n){const r=ye(t);try{const i=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(De(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);ES(r,e,n),_S(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qc(r,i)}catch(i){await Ba(i)}}function _S(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function ES(t,e,n){const r=ye(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function jg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||xS(t,r)})}function xS(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Ly(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),Wy(t))}function rE(t,e,n){for(const r of n)r instanceof gS?(t.ka.addReference(r.key,e),iV(t,r)):r instanceof yS?(te("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||xS(t,r.key)):me()}function iV(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(te("SyncEngine","New document in limbo: "+n),t.Na.add(r),Wy(t))}function Wy(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new ue(We.fromString(e)),r=t.Ka.next();t.Ba.set(r,new Gj(n)),t.La=t.La.insert(n,r),uS(t.remoteStore,new Ui(Ar(pf(n.path)),r,"TargetPurposeLimboResolution",df.oe))}}async function qc(t,e,n){const r=ye(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Dy.zi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const d=ye(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(c,m=>z.forEach(m.Wi,y=>d.persistence.referenceDelegate.addReference(h,m.targetId,y)).next(()=>z.forEach(m.Gi,y=>d.persistence.referenceDelegate.removeReference(h,m.targetId,y)))))}catch(h){if(!$a(h))throw h;te("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const y=d.us.get(m),_=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(_);d.us=d.us.insert(m,x)}}}(r.localStore,s))}async function sV(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await oS(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new Y(B.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qc(n,r.Ts)}}function oV(t,e){const n=ye(t),r=n.Ba.get(e);if(r&&r.Fa)return Re().add(r.key);{let i=Re();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function TS(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tV.bind(null,e),e.Ma.R_=zj.bind(null,e.eventManager),e.Ma.Wa=Wj.bind(null,e.eventManager),e}function aV(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rV.bind(null,e),e}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return fj(this.persistence,new dj,e.initialUser,this.serializer)}ja(e){return new sS(Ny.ei,this.serializer)}za(e){return new _j}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class lV extends wh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){De(this.persistence.referenceDelegate instanceof yh);const r=this.persistence.referenceDelegate.garbageCollector;return new YM(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new sS(r=>yh.ei(r,n),this.serializer)}}class Vg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sV.bind(null,this.syncEngine),await Uj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $j}()}createDatastore(e){const n=Tf(e.databaseInfo.databaseId),r=function(s){return new bj(s)}(e.databaseInfo);return function(s,o,a,l){return new Rj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Cj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>nE(this.syncEngine,n,0),function(){return X_.p()?new X_:new Ej}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new Kj(i,s,o,a,l,c);return d&&(h.$a=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ye(i);te("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Hc(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Vg.provider={build:()=>new Vg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Kt.UNAUTHENTICATED,this.clientId=SI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hm(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uV(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>J_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>J_(e.remoteStore,i)),t._onlineComponents=e}async function uV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),await Hm(t,new wh)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await Hm(t,new lV(void 0));return t._offlineComponents}async function bS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await iE(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await iE(t,new Vg))),t._onlineComponents}function dV(t){return bS(t).then(e=>e.syncEngine)}async function _h(t){const e=await bS(t),n=e.eventManager;return n.onListen=Qj.bind(null,e.syncEngine),n.onUnlisten=Jj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Yj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zj.bind(null,e.syncEngine),n}function hV(t,e,n={}){const r=new ri;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Hy({next:m=>{d.eu(),o.enqueueAndForget(()=>By(s,h));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Y(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new Y(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new zy(pf(a.path),d,{includeMetadataChanges:!0,ua:!0});return Uy(s,h)}(await _h(t),t.asyncQueue,e,n,r)),r.promise}function fV(t,e,n={}){const r=new ri;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Hy({next:m=>{d.eu(),o.enqueueAndForget(()=>By(s,h)),m.fromCache&&l.source==="server"?c.reject(new Y(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new zy(a,d,{includeMetadataChanges:!0,ua:!0});return Uy(s,h)}(await _h(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t,e,n){if(!n)throw new Y(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mV(t,e,n,r){if(e===!0&&r===!0)throw new Y(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oE(t){if(!ue.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aE(t){if(ue.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me()}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(t);throw new Y(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pV(t,e){if(e<=0)throw new Y(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RL;switch(r.type){case"firstParty":return new kL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sE.get(n);r&&(te("ComponentProvider","Removing Datastore"),sE.delete(n),r.terminate())}(this),Promise.resolve()}}function gV(t,e,n,r={}){var i;const s=(t=an(t,Rf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Kt.MOCK_USER;else{a=Pb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Kt(c)}t._authCredentials=new AL(new II(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Xi extends Mr{constructor(e,n,r){super(e,n,pf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ue(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function Ue(t,e,...n){if(t=qe(t),SS("collection","path",e),t instanceof Rf){const r=We.fromString(e,...n);return aE(r),new Xi(t,null,r)}{if(!(t instanceof Jt||t instanceof Xi))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return aE(r),new Xi(t.firestore,null,r)}}function ve(t,e,...n){if(t=qe(t),arguments.length===1&&(e=SI.newId()),SS("doc","path",e),t instanceof Rf){const r=We.fromString(e,...n);return oE(r),new Jt(t,null,new ue(r))}{if(!(t instanceof Jt||t instanceof Xi))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return oE(r),new Jt(t.firestore,t instanceof Xi?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new lS(this,"async_queue_retry"),this.fu=()=>{const r=Wm();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Wm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Wm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new ri;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!$a(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Oy.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&me()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}function uE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Nr extends Rf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cE(e),this._firestoreClient=void 0,await e}}}function yV(t,e){const n=typeof t=="object"?t:af(),r=typeof t=="string"?t:"(default)",i=ms(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Rb("firestore");s&&gV(i,...s)}return i}function Gc(t){if(t._terminated)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vV(t),t._firestoreClient}function vV(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new qL(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,IS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new cV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(Bt.fromBase64String(e))}catch(n){throw new Y(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Aa(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=/^__.*__$/;class _V{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new zc(e,this.data,n,this.fieldTransforms)}}class RS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class Af{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Eh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(AS(this.Mu)&&wV.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class EV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tf(e)}$u(e,n,r,i=!1){return new Af({Mu:e,methodName:n,Ku:r,path:Ot.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wa(t){const e=t._freezeSettings(),n=Tf(t._databaseId);return new EV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ky(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);Zy("Data must be an object, but it was:",o,r);const a=DS(r,o);let l,c;if(s.merge)l=new Rn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=Og(e,h,n);if(!o.contains(m))throw new Y(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);MS(d,m)||d.push(m)}l=new Rn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new _V(new pn(a),l,c)}class Cf extends go{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cf}}function CS(t,e,n){return new Af({Mu:3,Ku:e.settings.Ku,methodName:t._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Qy extends go{_toFieldTransform(e){return new wf(e.path,new Ac)}isEqual(e){return e instanceof Qy}}class Yy extends go{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=CS(this,e,!0),r=this.Uu.map(s=>yo(s,n)),i=new ba(r);return new wf(e.path,i)}isEqual(e){return e instanceof Yy&&Zs(this.Uu,e.Uu)}}class Xy extends go{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=CS(this,e,!0),r=this.Uu.map(s=>yo(s,n)),i=new Ia(r);return new wf(e.path,i)}isEqual(e){return e instanceof Xy&&Zs(this.Uu,e.Uu)}}class Jy extends go{constructor(e,n){super(e),this.Wu=n}_toFieldTransform(e){const n=new Cc(e.serializer,$I(e.serializer,this.Wu));return new wf(e.path,n)}isEqual(e){return e instanceof Jy&&this.Wu===e.Wu}}function PS(t,e,n,r){const i=t.$u(1,e,n);Zy("Data must be an object, but it was:",i,r);const s=[],o=pn.empty();gs(r,(l,c)=>{const d=ev(e,l,n);c=qe(c);const h=i.Bu(d);if(c instanceof Cf)s.push(d);else{const m=yo(c,h);m!=null&&(s.push(d),o.set(d,m))}});const a=new Rn(s);return new RS(o,a,i.fieldTransforms)}function kS(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[Og(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Og(e,s[m])),l.push(s[m+1]);const c=[],d=pn.empty();for(let m=a.length-1;m>=0;--m)if(!MS(c,a[m])){const y=a[m];let _=l[m];_=qe(_);const x=o.Bu(y);if(_ instanceof Cf)c.push(y);else{const R=yo(_,x);R!=null&&(c.push(y),d.set(y,R))}}const h=new Rn(c);return new RS(d,h,o.fieldTransforms)}function NS(t,e,n,r=!1){return yo(n,t.$u(r?4:3,e))}function yo(t,e){if(LS(t=qe(t)))return Zy("Unsupported field value:",e,t),DS(t,e);if(t instanceof go)return function(r,i){if(!AS(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=yo(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $I(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ht.fromDate(r);return{timestampValue:gh(i.serializer,s)}}if(r instanceof ht){const s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gh(i.serializer,s)}}if(r instanceof qy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Aa)return{bytesValue:JI(i.serializer,r._byteString)};if(r instanceof Jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Py(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return Ry(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Sf(r)}`)}(t,e)}function DS(t,e){const n={};return RI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(t,(r,i)=>{const s=yo(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function LS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof qy||t instanceof Aa||t instanceof Jt||t instanceof go||t instanceof Gy)}function Zy(t,e,n){if(!LS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Sf(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function Og(t,e,n){if((e=qe(e))instanceof Kc)return e._internalPath;if(typeof e=="string")return ev(t,e);throw Eh("Field path arguments must be of type string or ",t,!1,void 0,n)}const xV=new RegExp("[~\\*/\\[\\]]");function ev(t,e,n){if(e.search(xV)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kc(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(B.INVALID_ARGUMENT,a+t+l)}function MS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TV extends tv{data(){return super.data()}}function Pf(t,e){return typeof e=="string"?ev(t,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nv{}class kf extends nv{}function tt(t,e,...n){let r=[];e instanceof nv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof rv).length,a=s.filter(l=>l instanceof Nf).length;if(o>1||o>0&&a>0)throw new Y(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Nf extends kf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nf(e,n,r)}_apply(e){const n=this._parse(e);return VS(e._query,n),new Mr(e.firestore,e.converter,Cg(e._query,n))}_parse(e){const n=Wa(e.firestore);return function(s,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hE(h,d);const y=[];for(const _ of h)y.push(dE(l,s,_));m={arrayValue:{values:y}}}else m=dE(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hE(h,d),m=NS(a,o,h,d==="in"||d==="not-in");return Tt.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ft(t,e,n){const r=e,i=Pf("where",t);return Nf._create(i,r,n)}class rv extends nv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)VS(o,l),o=Cg(o,l)}(e._query,n),new Mr(e.firestore,e.converter,Cg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iv extends kf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new iv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rc(s,o)}(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function or(t,e="asc"){const n=e,r=Pf("orderBy",t);return iv._create(r,n)}class sv extends kf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sv(e,n,r)}_apply(e){return new Mr(e.firestore,e.converter,ph(e._query,this._limit,this._limitType))}}function Ca(t){return pV("limit",t),sv._create("limit",t,"F")}class ov extends kf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new ov(e,n,r)}_apply(e){const n=bV(e,this.type,this._docOrFields,this._inclusive);return new Mr(e.firestore,e.converter,function(i,s){return new fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function xh(...t){return ov._create("startAfter",t,!1)}function bV(t,e,n,r){if(n[0]=qe(n[0]),n[0]instanceof tv)return function(s,o,a,l,c){if(!l)throw new Y(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of aa(s))if(h.field.isKeyField())d.push(mh(o,l.key));else{const m=l.data.field(h.field);if(ff(m))throw new Y(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=h.field.canonicalString();throw new Y(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new Ta(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Wa(t.firestore);return function(o,a,l,c,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new Y(B.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let _=0;_<d.length;_++){const x=d[_];if(m[_].field.isKeyField()){if(typeof x!="string")throw new Y(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!Sy(o)&&x.indexOf("/")!==-1)throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const R=o.path.child(We.fromString(x));if(!ue.isDocumentKey(R))throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const b=new ue(R);y.push(mh(a,b))}else{const R=NS(l,c,x);y.push(R)}}return new Ta(y,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function dE(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new Y(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sy(e)&&n.indexOf("/")!==-1)throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!ue.isDocumentKey(r))throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mh(t,new ue(r))}if(n instanceof Jt)return mh(t,n._key);throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function hE(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VS(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IV{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>mt(o.doubleValue));return new Gy(s)}convertGeoPoint(e){return new qy(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){const n=ns(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);De(iS(r));const i=new Ic(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(n)||hi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OS extends tv{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rd extends OS{data(e={}){return super.data(e)}}class FS{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Dl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rd(this._firestore,this._userDataWriter,r.key,r,new Dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Rd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Dl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Rd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Dl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:SV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){t=an(t,Jt);const e=an(t.firestore,Nr);return hV(Gc(e),t._key).then(n=>US(e,t,n))}class lv extends IV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function Nn(t){t=an(t,Mr);const e=an(t.firestore,Nr),n=Gc(e),r=new lv(e);return jS(t._query),fV(n,t._query).then(i=>new FS(e,r,t,i))}function Pa(t,e,n){t=an(t,Jt);const r=an(t.firestore,Nr),i=av(t.converter,e,n);return Qc(r,[Ky(Wa(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function mr(t,e,n,...r){t=an(t,Jt);const i=an(t.firestore,Nr),s=Wa(i);let o;return o=typeof(e=qe(e))=="string"||e instanceof Kc?kS(s,"updateDoc",t._key,e,n,r):PS(s,"updateDoc",t._key,e),Qc(i,[o.toMutation(t._key,on.exists(!0))])}function Df(t){return Qc(an(t.firestore,Nr),[new Ef(t._key,on.none())])}function ka(t,e){const n=an(t.firestore,Nr),r=ve(t),i=av(t.converter,e);return Qc(n,[Ky(Wa(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function An(t,...e){var n,r,i;t=qe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||uE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uE(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,d;if(t instanceof Jt)c=an(t.firestore,Nr),d=pf(t._key.path),l={next:h=>{e[o]&&e[o](US(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=an(t,Mr);c=an(h.firestore,Nr),d=h._query;const m=new lv(c);l={next:y=>{e[o]&&e[o](new FS(c,m,h,y))},error:e[o+1],complete:e[o+2]},jS(t._query)}return function(m,y,_,x){const R=new Hy(x),b=new zy(y,R,_);return m.asyncQueue.enqueueAndForget(async()=>Uy(await _h(m),b)),()=>{R.eu(),m.asyncQueue.enqueueAndForget(async()=>By(await _h(m),b))}}(Gc(c),d,a,l)}function Qc(t,e){return function(r,i){const s=new ri;return r.asyncQueue.enqueueAndForget(async()=>eV(await dV(r),i,s)),s.promise}(Gc(t),e)}function US(t,e,n){const r=n.docs.get(e._key),i=new lv(t);return new OS(t,i,e._key,r,new Dl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Wa(e)}set(e,n,r){this._verifyNotCommitted();const i=qm(e,this._firestore),s=av(i.converter,n,r),o=Ky(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=qm(e,this._firestore);let o;return o=typeof(n=qe(n))=="string"||n instanceof Kc?kS(this._dataReader,"WriteBatch.update",s._key,n,r,i):PS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qm(e,this._firestore);return this._mutations=this._mutations.concat(new Ef(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qm(t,e){if((t=qe(t)).firestore!==e)throw new Y(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function yt(){return new Qy("serverTimestamp")}function BS(...t){return new Yy("arrayUnion",t)}function $S(...t){return new Xy("arrayRemove",t)}function pr(t){return new Jy("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){return Gc(t=an(t,Nr)),new RV(t,e=>Qc(t,e))}(function(e,n=!0){(function(i){Ua=i})(uo),dr(new Gn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Nr(new CL(r.getProvider("auth-internal")),new DL(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_n(S_,"4.7.5",e),_n(S_,"4.7.5","esm2017")})();var AV="firebase",CV="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(AV,CV,"app");const zS="@firebase/installations",cv="0.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=1e4,HS=`w:${cv}`,qS="FIS_v2",PV="https://firebaseinstallations.googleapis.com/v1",kV=60*60*1e3,NV="installations",DV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ro=new co(NV,DV,LV);function GS(t){return t instanceof Kn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS({projectId:t}){return`${PV}/projects/${t}/installations`}function QS(t){return{token:t.token,requestStatus:2,expiresIn:jV(t.expiresIn),creationTime:Date.now()}}async function YS(t,e){const r=(await e.json()).error;return ro.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function XS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MV(t,{refreshToken:e}){const n=XS(t);return n.append("Authorization",VV(e)),n}async function JS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function jV(t){return Number(t.replace("s","000"))}function VV(t){return`${qS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=KS(t),i=XS(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:qS,appId:t.appId,sdkVersion:HS},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await JS(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:QS(c.authToken)}}else throw await YS("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=/^[cdef][\w-]{21}$/,Fg="";function BV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$V(t);return UV.test(n)?n:Fg}catch{return Fg}}function $V(t){return FV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Map;function tR(t,e){const n=Lf(t);nR(n,e),zV(n,e)}function nR(t,e){const n=eR.get(t);if(n)for(const r of n)r(e)}function zV(t,e){const n=WV();n&&n.postMessage({key:t,fid:e}),HV()}let Us=null;function WV(){return!Us&&"BroadcastChannel"in self&&(Us=new BroadcastChannel("[Firebase] FID Change"),Us.onmessage=t=>{nR(t.data.key,t.data.fid)}),Us}function HV(){eR.size===0&&Us&&(Us.close(),Us=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="firebase-installations-database",GV=1,io="firebase-installations-store";let Gm=null;function uv(){return Gm||(Gm=Lb(qV,GV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(io)}}})),Gm}async function Th(t,e){const n=Lf(t),i=(await uv()).transaction(io,"readwrite"),s=i.objectStore(io),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&tR(t,e.fid),e}async function rR(t){const e=Lf(t),r=(await uv()).transaction(io,"readwrite");await r.objectStore(io).delete(e),await r.done}async function Mf(t,e){const n=Lf(t),i=(await uv()).transaction(io,"readwrite"),s=i.objectStore(io),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&tR(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dv(t){let e;const n=await Mf(t.appConfig,r=>{const i=KV(r),s=QV(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Fg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function KV(t){const e=t||{fid:BV(),registrationStatus:0};return iR(e)}function QV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ro.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=YV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XV(t)}:{installationEntry:e}}async function YV(t,e){try{const n=await OV(t,e);return Th(t.appConfig,n)}catch(n){throw GS(n)&&n.customData.serverCode===409?await rR(t.appConfig):await Th(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function XV(t){let e=await fE(t.appConfig);for(;e.registrationStatus===1;)await ZS(100),e=await fE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await dv(t);return r||n}return e}function fE(t){return Mf(t,e=>{if(!e)throw ro.create("installation-not-found");return iR(e)})}function iR(t){return JV(t)?{fid:t.fid,registrationStatus:0}:t}function JV(t){return t.registrationStatus===1&&t.registrationTime+WS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV({appConfig:t,heartbeatServiceProvider:e},n){const r=eO(t,n),i=MV(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:HS,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await JS(()=>fetch(r,a));if(l.ok){const c=await l.json();return QS(c)}else throw await YS("Generate Auth Token",l)}function eO(t,{fid:e}){return`${KS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(t,e=!1){let n;const r=await Mf(t.appConfig,s=>{if(!sR(s))throw ro.create("not-registered");const o=s.authToken;if(!e&&rO(o))return s;if(o.requestStatus===1)return n=tO(t,e),s;{if(!navigator.onLine)throw ro.create("app-offline");const a=sO(s);return n=nO(t,a),a}});return n?await n:r.authToken}async function tO(t,e){let n=await mE(t.appConfig);for(;n.authToken.requestStatus===1;)await ZS(100),n=await mE(t.appConfig);const r=n.authToken;return r.requestStatus===0?hv(t,e):r}function mE(t){return Mf(t,e=>{if(!sR(e))throw ro.create("not-registered");const n=e.authToken;return oO(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function nO(t,e){try{const n=await ZV(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Th(t.appConfig,r),n}catch(n){if(GS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await rR(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Th(t.appConfig,r)}throw n}}function sR(t){return t!==void 0&&t.registrationStatus===2}function rO(t){return t.requestStatus===2&&!iO(t)}function iO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kV}function sO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function oO(t){return t.requestStatus===1&&t.requestTime+WS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t){const e=t,{installationEntry:n,registrationPromise:r}=await dv(e);return r?r.catch(console.error):hv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e=!1){const n=t;return await cO(n),(await hv(n,e)).token}async function cO(t){const{registrationPromise:e}=await dv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){if(!t||!t.options)throw Km("App Configuration");if(!t.name)throw Km("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Km(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Km(t){return ro.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="installations",dO="installations-internal",hO=t=>{const e=t.getProvider("app").getImmediate(),n=uO(e),r=ms(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fO=t=>{const e=t.getProvider("app").getImmediate(),n=ms(e,oR).getImmediate();return{getId:()=>aO(n),getToken:i=>lO(n,i)}};function mO(){dr(new Gn(oR,hO,"PUBLIC")),dr(new Gn(dO,fO,"PRIVATE"))}mO();_n(zS,cv);_n(zS,cv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh="analytics",pO="firebase_id",gO="origin",yO=60*1e3,vO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=new of("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pn=new co("analytics","Analytics",wO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){if(!t.startsWith(fv)){const e=Pn.create("invalid-gtag-resource",{gtagURL:t});return En.warn(e.message),""}return t}function aR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function EO(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xO(t,e){const n=EO("firebase-js-sdk-policy",{createScriptURL:_O}),r=document.createElement("script"),i=`${fv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function TO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function bO(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await aR(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){En.error(a)}t("config",i,s)}async function IO(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await aR(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){En.error(s)}}function SO(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await IO(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await bO(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){En.error(a)}}return i}function RO(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=SO(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function AO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(fv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=30,PO=1e3;class kO{constructor(e={},n=PO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lR=new kO;function NO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function DO(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:NO(r)},s=vO.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Pn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function LO(t,e=lR,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Pn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Pn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new VO;return setTimeout(async()=>{a.abort()},yO),cR({appId:r,apiKey:i,measurementId:s},o,a,e)}async function cR(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=lR){var s;const{appId:o,measurementId:a}=t;try{await MO(r,e)}catch(l){if(a)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await DO(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!jO(c)){if(i.deleteThrottleMetadata(o),a)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?Yw(n,i.intervalMillis,CO):Yw(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,h),En.debug(`Calling attemptFetch again in ${d} millis`),cR(t,h,r,i)}}function MO(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function jO(t){if(!(t instanceof Kn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class VO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function OO(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(){if(uy())try{await dy()}catch(t){return En.warn(Pn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return En.warn(Pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function UO(t,e,n,r,i,s,o){var a;const l=LO(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>En.error(y)),e.push(l);const c=FO().then(y=>{if(y)return r.getId()}),[d,h]=await Promise.all([l,c]);AO(s)||xO(s,d.measurementId),i("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[gO]="firebase",m.update=!0,h!=null&&(m[pO]=h),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.app=e}_delete(){return delete Kl[this.app.options.appId],Promise.resolve()}}let Kl={},pE=[];const gE={};let Qm="dataLayer",$O="gtag",yE,uR,vE=!1;function zO(){const t=[];if(cy()&&t.push("This is a browser extension environment."),kb()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Pn.create("invalid-analytics-context",{errorInfo:e});En.warn(n.message)}}function WO(t,e,n){zO();const r=t.options.appId;if(!r)throw Pn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pn.create("no-api-key");if(Kl[r]!=null)throw Pn.create("already-exists",{id:r});if(!vE){TO(Qm);const{wrappedGtag:s,gtagCore:o}=RO(Kl,pE,gE,Qm,$O);uR=s,yE=o,vE=!0}return Kl[r]=UO(t,pE,gE,e,yE,Qm,n),new BO(t)}function HO(t=af()){t=qe(t);const e=ms(t,bh);return e.isInitialized()?e.getImmediate():qO(t)}function qO(t,e={}){const n=ms(t,bh);if(n.isInitialized()){const i=n.getImmediate();if(Zs(e,n.getOptions()))return i;throw Pn.create("already-initialized")}return n.initialize({options:e})}async function GO(){if(cy()||!kb()||!uy())return!1;try{return await dy()}catch{return!1}}function KO(t,e,n,r){t=qe(t),OO(uR,Kl[t.app.options.appId],e,n,r).catch(i=>En.error(i))}const wE="@firebase/analytics",_E="0.10.10";function QO(){dr(new Gn(bh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return WO(r,i,n)},"PUBLIC")),dr(new Gn("analytics-internal",t,"PRIVATE")),_n(wE,_E),_n(wE,_E,"esm2017");function t(e){try{const n=e.getProvider(bh).getImmediate();return{logEvent:(r,i,s)=>KO(n,r,i,s)}}catch(n){throw Pn.create("interop-component-reg-failed",{reason:n})}}}QO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebasestorage.googleapis.com",YO="storageBucket",XO=2*60*1e3,JO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Kn{constructor(e,n,r=0){super(Ym(e),`Firebase Storage: ${n} (${Ym(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ym(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dr||(Dr={}));function Ym(t){return"storage/"+t}function ZO(){const t="An unknown error occurred, please check the error payload for server response.";return new jr(Dr.UNKNOWN,t)}function e6(){return new jr(Dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function t6(){return new jr(Dr.CANCELED,"User canceled the upload/download.")}function n6(t){return new jr(Dr.INVALID_URL,"Invalid URL '"+t+"'.")}function r6(t){return new jr(Dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function EE(t){return new jr(Dr.INVALID_ARGUMENT,t)}function hR(){return new jr(Dr.APP_DELETED,"The Firebase app was deleted.")}function i6(t){return new jr(Dr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ar.makeFromUrl(e,n)}catch{return new ar(e,"")}if(r.path==="")return r;throw r6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),_={bucket:1,path:3},x=n===dR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",b=new RegExp(`^https?://${x}/${i}/${R}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:y,indices:_,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<E.length;P++){const j=E[P],k=j.regex.exec(e);if(k){const S=k[j.indices.bucket];let T=k[j.indices.path];T||(T=""),r=new ar(S,T),j.postModify(r);break}}if(r==null)throw n6(e);return r}}class s6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...R){c||(c=!0,e.apply(null,R))}function h(R){i=setTimeout(()=>{i=null,t(y,l())},R)}function m(){s&&clearTimeout(s)}function y(R,...b){if(c){m();return}if(R){m(),d.call(null,R,...b);return}if(l()||o){m(),d.call(null,R,...b);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let _=!1;function x(R){_||(_=!0,m(),!c&&(i!==null?(R||(a=2),clearTimeout(i),h(0)):R||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function a6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t){return t!==void 0}function xE(t,e,n,r){if(r<e)throw EE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw EE(`Invalid value for '${t}'. Expected ${n} or less.`)}function c6(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ih;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ih||(Ih={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r,i,s,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,_)=>{this.resolve_=y,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Gu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ih.NO_ERROR,l=s.getStatus();if(!a||u6(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Ih.ABORT;r(!1,new Gu(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Gu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());l6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=ZO();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?hR():t6();o(l)}else{const l=e6();o(l)}};this.canceled_?n(!1,new Gu(!1,null,!0)):this.backoffId_=o6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&a6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function h6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function f6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function p6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function g6(t,e,n,r,i,s,o=!0){const a=c6(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return m6(c,e),h6(c,n),f6(c,s),p6(c,r),new d6(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function v6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this._service=e,n instanceof ar?this._location=n:this._location=ar.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sh(e,n)}get root(){const e=new ar(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return v6(this._location.path)}get storage(){return this._service}get parent(){const e=y6(this._location.path);if(e===null)return null;const n=new ar(this._location.bucket,e);return new Sh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw i6(e)}}function TE(t,e){const n=e==null?void 0:e[YO];return n==null?null:ar.makeFromBucketSpec(n,t)}function w6(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Pb(i,t.app.options.projectId))}class _6{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=dR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XO,this._maxUploadRetryTime=JO,this._requests=new Set,i!=null?this._bucket=ar.makeFromBucketSpec(i,this._host):this._bucket=TE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ar.makeFromBucketSpec(this._url,e):this._bucket=TE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sh(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new s6(hR());{const o=g6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const bE="@firebase/storage",IE="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="storage";function E6(t=af(),e){t=qe(t);const r=ms(t,fR).getImmediate({identifier:e}),i=Rb("storage");return i&&x6(r,...i),r}function x6(t,e,n,r={}){w6(t,e,n,r)}function T6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new _6(n,r,i,e,uo)}function b6(){dr(new Gn(fR,T6,"PUBLIC").setMultipleInstances(!0)),_n(bE,IE,""),_n(bE,IE,"esm2017")}b6();const I6={apiKey:"AIzaSyDpStMZFm5J3825VlL58Ic7FNjwSmV2u8A",authDomain:"campus-confessions-1042f.firebaseapp.com",databaseURL:"https://campus-confessions-1042f-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"campus-confessions-1042f",storageBucket:"campus-confessions-1042f.firebasestorage.app",messagingSenderId:"399761218573",appId:"1:399761218573:web:b4c91544e2b2d4a0b5c7a7",measurementId:"G-QXWCGPP6BF"},jf=Mb(I6),Ku=IL(jf),Z=yV(jf);E6(jf);typeof window<"u"&&GO().then(t=>t&&HO(jf));new Gr;const mR=g.createContext(),At=()=>{const t=g.useContext(mR);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},S6=({children:t})=>{const[e,n]=g.useState(null),[r,i]=g.useState(!0),[s,o]=g.useState(null),[a,l]=g.useState(new Set),[c,d]=g.useState(null),[h,m]=g.useState(null);g.useEffect(()=>{const P=fD(Ku,async j=>{if(i(!0),j){n(j);const k=ve(Z,"users",j.uid),S=An(k,C=>{if(C.exists()){const D=C.data();o({followersCount:D.followersCount||0,followingCount:D.followingCount||0,postsCount:D.postsCount||0})}});d(()=>S);const T=Ue(Z,"users",j.uid,"following"),I=An(T,C=>{const D=new Set;C.forEach(L=>D.add(L.id)),l(D)});m(()=>I)}else n(null),o(null),l(new Set),c&&(c(),d(null)),h&&(h(),m(null));i(!1)});return()=>{P(),c&&c(),h&&h()}},[]);const y=g.useCallback(P=>a.has(P),[a]),_=async P=>{try{const j=ve(Z,"users",P.uid);return await Pa(j,P,{merge:!0}),{success:!0}}catch(j){return{error:j.message}}},E={currentUser:e,loading:r,userStats:s,isFollowing:y,signup:async(P,j,k)=>{try{const S=await lD(Ku,P,j);return k&&await p_(S.user,{displayName:k}),await _({uid:S.user.uid,email:S.user.email,displayName:k||"",photoURL:S.user.photoURL||""}),{success:!0}}catch(S){return{error:S.message}}},login:async(P,j)=>{try{const k=await cD(Ku,P,j);return await _({uid:k.user.uid,email:k.user.email,displayName:k.user.displayName||"",photoURL:k.user.photoURL||""}),{success:!0}}catch(k){return{error:k.message}}},logout:async()=>{try{return await mD(Ku),{success:!0}}catch(P){return console.error("Error logging out:",P),{success:!1,error:P.message}}},updateUserProfile:async P=>{try{if(!e)throw new Error("No user logged in");if(await p_(e,P),P.photoURL!==void 0){const j=ve(Z,"users",e.uid);await Pa(j,{photoURL:P.photoURL},{merge:!0})}return{success:!0}}catch(j){return console.error("Error updating profile:",j),{success:!1,error:j.message}}}};return f.jsx(mR.Provider,{value:E,children:!r&&t})},Mt=[];for(let t=0;t<256;++t)Mt.push((t+256).toString(16).slice(1));function R6(t,e=0){return(Mt[t[e+0]]+Mt[t[e+1]]+Mt[t[e+2]]+Mt[t[e+3]]+"-"+Mt[t[e+4]]+Mt[t[e+5]]+"-"+Mt[t[e+6]]+Mt[t[e+7]]+"-"+Mt[t[e+8]]+Mt[t[e+9]]+"-"+Mt[t[e+10]]+Mt[t[e+11]]+Mt[t[e+12]]+Mt[t[e+13]]+Mt[t[e+14]]+Mt[t[e+15]]).toLowerCase()}let Xm;const A6=new Uint8Array(16);function C6(){if(!Xm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xm=crypto.getRandomValues.bind(crypto)}return Xm(A6)}const P6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),SE={randomUUID:P6};function pR(t,e,n){if(SE.randomUUID&&!e&&!t)return SE.randomUUID();t=t||{};const r=t.random||(t.rng||C6)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,R6(r)}const Rh=async({type:t,recipientId:e,senderId:n,senderName:r,postId:i=null,message:s=null})=>{try{const o=Ue(Z,"notifications"),a={type:t,recipientId:e,senderId:n,senderName:r,postId:i,message:s||k6(t,r),read:!1,createdAt:yt()};return{success:!0,id:(await ka(o,a)).id}}catch(o){throw console.error("Error creating notification:",o),o}},k6=(t,e)=>{switch(t){case"follow":return`${e} started following you`;case"like":return`${e} liked your post`;case"comment":return`${e} commented on your post`;case"newPost":return`${e} created a new post`;case"mention":return`${e} mentioned you in a comment`;default:return`New notification from ${e}`}},gR=(t,e,n)=>{const r=tt(Ue(Z,"notifications"),ft("recipientId","==",t),or("createdAt","desc"));return An(r,i=>{const s=i.docs.map(o=>({id:o.id,...o.data()}));e(s)},n)},yR=async t=>{try{const e=ve(Z,"notifications",t);return await mr(e,{read:!0}),{success:!0}}catch(e){throw console.error("Error marking notification as read:",e),e}},N6=async t=>{try{const e=Yc(Z);return t.forEach(n=>{const r=ve(Z,"notifications",n);e.update(r,{read:!0})}),await e.commit(),{success:!0,count:t.length}}catch(e){throw console.error("Error marking multiple notifications as read:",e),e}},D6=async t=>{try{return await Df(ve(Z,"notifications",t)),{success:!0}}catch(e){throw console.error("Error deleting notification:",e),e}},L6=async(t,e)=>{try{const n=ve(Z,"users",t);return(await Rt(n)).exists()?await mr(n,{...e,updatedAt:yt()}):await Pa(n,{...e,followers:[],following:[],postCount:0,createdAt:yt(),updatedAt:yt()}),{success:!0}}catch(n){return console.error("Error creating user profile:",n),{error:n.message}}},M6=async t=>{try{const e=ve(Z,"users",t),n=await Rt(e);return n.exists()?{data:{id:n.id,...n.data()}}:{error:"User not found"}}catch(e){return console.error("Error getting user profile:",e),{error:e.message}}},j6=async t=>{try{const{userId:e,title:n,content:r,imageUrl:i="",media:s=[],tags:o=[],visibility:a="public",draft:l=!1,nsfw:c=!1}=t,d=ve(Z,"users",e),h=await Rt(d);if(!h.exists())throw new Error("User not found");const m=h.data(),y={userId:e,title:n.trim(),content:r.trim(),imageUrl:i,media:s,tags:o.map(R=>R.toLowerCase().trim()),visibility:a,draft:l,nsfw:c,authorName:m.displayName||"Anonymous User",authorEmail:m.email,likes:[],comments:[],commentCount:0,createdAt:yt(),lastActivityAt:yt()},_=Ue(Z,"posts"),x=await ka(_,y);return await mr(d,{postCount:pr(1)}),{success:!0,data:{id:x.id,...y}}}catch(e){return console.error("Error adding post:",e),{error:e.message}}},V6=async(t,e)=>{try{const n=ve(Z,"posts",t),r=ve(Z,"users",e),i=Yc(Z);return i.delete(n),i.update(r,{postCount:pr(-1),updatedAt:yt()}),await i.commit(),{success:!0}}catch(n){return console.error("Error deleting post:",n),{error:n.message}}},O6=async(t,e)=>{try{const n=ve(Z,"posts",t),r=await Rt(n);if(!r.exists())throw new Error("Post not found");const i=r.data();await mr(n,{likes:BS(e)});const s=ve(Z,"users",e),a=(await Rt(s)).data();return i.userId!==e&&await Rh({type:"like",recipientId:i.userId,senderId:e,senderName:(a==null?void 0:a.displayName)||"Anonymous",postId:t,message:`${(a==null?void 0:a.displayName)||"Anonymous"} liked your post: "${i.title||"Untitled Post"}"`}),!0}catch(n){return console.error("Error liking post:",n),!1}},F6=async(t,e)=>{try{const n=ve(Z,"posts",t);return await mr(n,{likes:$S(e)}),!0}catch(n){return console.error("Error unliking post:",n),!1}},U6=async(t,e=null,n=5)=>{try{let r=[ft("userId","==",t),or("createdAt","desc")];e&&r.push(xh(e.createdAt)),r.push(Ca(n));const i=tt(Ue(Z,"posts"),...r),s=await Nn(i),o=[];return s.forEach(a=>{var c,d,h,m;const l=a.data();o.push({id:a.id,...l,createdAt:((d=(c=l.createdAt)==null?void 0:c.toDate)==null?void 0:d.call(c))||new Date,lastActivityAt:((m=(h=l.lastActivityAt)==null?void 0:h.toDate)==null?void 0:m.call(h))||new Date})}),{success:!0,data:o,hasMore:o.length===n,lastVisible:o[o.length-1]}}catch(r){return console.error("Error getting user posts:",r),{error:r.message}}},B6=t=>{const e=t.match(/@\w+/g);return e?e.map(n=>n.substring(1)):[]},$6=async(t,e)=>{try{const n=ve(Z,"posts",t),r=await Rt(n);if(!r.exists())throw new Error("Post not found");const i=r.data(),s={...e,id:pR(),createdAt:new Date};await mr(n,{comments:BS(s),commentCount:pr(1)}),await mr(n,{lastActivityAt:yt()});const o=ve(Z,"users",e.userId),l=(await Rt(o)).data();i.userId!==e.userId&&await Rh({type:"comment",recipientId:i.userId,senderId:e.userId,senderName:(l==null?void 0:l.displayName)||"Anonymous",postId:t,message:`${(l==null?void 0:l.displayName)||"Anonymous"} commented on your post: "${i.title||"Untitled Post"}"`});const c=B6(e.content);if(c.length>0){const d=Ue(Z,"users"),h=tt(d,ft("username","in",c)),y=(await Nn(h)).docs.map(_=>{const x=_.data();return x.uid===e.userId?null:Rh({type:"mention",recipientId:x.uid,senderId:e.userId,senderName:(l==null?void 0:l.displayName)||"Anonymous",postId:t,message:`${(l==null?void 0:l.displayName)||"Anonymous"} mentioned you in a comment: "${e.content.substring(0,50)}${e.content.length>50?"...":""}"`})});await Promise.all(y.filter(Boolean))}return{success:!0,data:s}}catch(n){return console.error("Error adding comment:",n),{error:n.message}}},z6=async(t,e)=>{try{const n=ve(Z,"posts",t),r=await Rt(n);if(!r.exists())throw new Error("Post not found");const s=(r.data().comments||[]).find(o=>o.id===e);if(!s)throw new Error("Comment not found");return await mr(n,{comments:$S(s),commentCount:pr(-1),lastActivityAt:yt()}),{success:!0}}catch(n){return console.error("Error deleting comment:",n),{error:n.message}}},vR=async(t,e)=>{if(!t||!e||t===e)throw new Error("Invalid user IDs");const n=Yc(Z),r=`${t}_${e}`;try{const i=ve(Z,"follows",r);if((await Rt(i)).exists())throw new Error("Already following this user");const o=ve(Z,"users",t),l=(await Rt(o)).data()||{},c=ve(Z,"users",e),h=(await Rt(c)).data()||{};n.set(i,{followerId:t,followingId:e,createdAt:yt(),followerName:l.displayName||"Anonymous",followingName:h.displayName||"Anonymous"}),n.update(o,{followingCount:pr(1)}),n.update(c,{followersCount:pr(1)});const m=ve(Z,"users",t,"following",e);n.set(m,{userId:e,followedAt:yt(),displayName:h.displayName||"Anonymous",email:h.email||"",photoURL:h.photoURL||null});const y=ve(Z,"users",e,"followers",t);return n.set(y,{userId:t,followedAt:yt(),displayName:l.displayName||"Anonymous",email:l.email||"",photoURL:l.photoURL||null}),await n.commit(),await Rh({type:"follow",senderId:t,recipientId:e,senderName:l.displayName||"Someone",senderPhotoURL:l.photoURL||null}),{success:!0,data:{followersCount:(h.followersCount||0)+1,followingCount:(l.followingCount||0)+1}}}catch(i){throw console.error("Error following user:",i),i}},wR=async(t,e)=>{if(!t||!e)throw new Error("Invalid user IDs");const n=Yc(Z),r=`${t}_${e}`;try{const i=ve(Z,"follows",r);if(!(await Rt(i)).exists())throw new Error("Not following this user");const o=ve(Z,"users",t),a=ve(Z,"users",e),[l,c]=await Promise.all([Rt(o),Rt(a)]),d=l.data()||{},h=c.data()||{};n.delete(i),n.update(o,{followingCount:pr(-1)}),n.update(a,{followersCount:pr(-1)});const m=ve(Z,"users",t,"following",e);n.delete(m);const y=ve(Z,"users",e,"followers",t);return n.delete(y),await n.commit(),{success:!0,data:{followersCount:Math.max((h.followersCount||0)-1,0),followingCount:Math.max((d.followingCount||0)-1,0)}}}catch(i){return console.error("Error unfollowing user:",i),{success:!1,error:i.message}}},W6=async(t,e)=>{if(!t||!e)return!1;try{const n=`${t}_${e}`,r=ve(Z,"follows",n);return(await Rt(r)).exists()}catch(n){return console.error("Error checking follow status:",n),!1}},H6=async t=>{try{const e=tt(Ue(Z,"follows"),ft("followerId","==",t));return(await Nn(e)).docs.map(r=>r.data().followingId)}catch(e){throw console.error("Error getting following:",e),e}},q6=async t=>{if(!t)throw new Error("User ID is required");try{const e=await Nn(tt(Ue(Z,"follows"),ft("followerId","==",t))),n=new Set(e.docs.map(s=>s.data().followingId));return n.add(t),(await Nn(tt(Ue(Z,"users"),Ca(20)))).docs.map(s=>({id:s.id,...s.data()})).filter(s=>!n.has(s.id)).sort((s,o)=>{var a,l;return(((a=o.lastActivityAt)==null?void 0:a.toMillis())||0)-(((l=s.lastActivityAt)==null?void 0:l.toMillis())||0)})}catch(e){throw console.error("Error getting follow suggestions:",e),e}},_R=g.createContext(),Qu=10,G6=({children:t})=>{const{currentUser:e}=At(),[n,r]=g.useState([]),[i,s]=g.useState(!1),[o,a]=g.useState(null),[l,c]=g.useState(null),[d,h]=g.useState(!0),[m,y]=g.useState(null),[_,x]=g.useState(null);g.useEffect(()=>()=>{_&&_()},[_]);const R=I=>{_&&_();const C=tt(Ue(Z,"posts"),...I);y(C);const D=An(C,L=>{const N=[];L.forEach(X=>{var G,J,$,Q;const we=X.data();N.push({id:X.id,...we,createdAt:((J=(G=we.createdAt)==null?void 0:G.toDate)==null?void 0:J.call(G))||new Date,lastActivityAt:((Q=($=we.lastActivityAt)==null?void 0:$.toDate)==null?void 0:Q.call($))||new Date})}),r(N),s(!1),h(N.length===Qu),N.length>0&&c(N[N.length-1])},L=>{console.error("Error in real-time listener:",L),a(L.message),s(!1)});x(()=>D)},b=async(I=!1)=>{if(!(I&&(!d||i))){s(!0),a(null);try{const C=[or("createdAt","desc"),Ca(Qu)];if(I&&l){console.log("PostContext: Loading more posts after:",l.createdAt),C.push(xh(l.createdAt));const D=Ue(Z,"posts"),L=tt(D,...C),N=await Nn(L);if(N.empty)console.log("PostContext: No more posts to load"),h(!1);else{const X=N.docs.map(we=>{var G,J,$,Q;return{id:we.id,...we.data(),createdAt:((J=(G=we.data().createdAt)==null?void 0:G.toDate)==null?void 0:J.call(G))||new Date,lastActivityAt:((Q=($=we.data().lastActivityAt)==null?void 0:$.toDate)==null?void 0:Q.call($))||new Date}});console.log("PostContext: Loaded",X.length,"more posts"),r(we=>[...we,...X]),c(X[X.length-1]),h(X.length===Qu)}}else R(C)}catch(C){console.error("PostContext: Error fetching posts:",C),a(C.message)}finally{s(!1)}}},w=async(I,C=!1)=>{if(!(!I||C&&(!d||i))){s(!0),a(null);try{const D=[ft("userId","==",I),or("createdAt","desc"),Ca(Qu)];if(C&&l){D.push(xh(l.createdAt));const L=await U6(I,l);L.success&&(r(N=>[...N,...L.data]),c(L.lastVisible),h(L.hasMore))}else R(D)}catch(D){a(D.message),s(!1)}}},E=async(I,C,{media:D,imageUrl:L,tags:N=[],visibility:X="public",draft:we=!1,nsfw:G=!1}={})=>{if(!e)return{error:"Authentication required",code:"AUTH_REQUIRED"};if(!(I!=null&&I.trim()))return{error:"Title is required",code:"INVALID_TITLE"};if(!(C!=null&&C.trim()))return{error:"Content is required",code:"INVALID_CONTENT"};if(I.length>300)return{error:"Title must be less than 300 characters",code:"TITLE_TOO_LONG"};if(C.length>4e4)return{error:"Content must be less than 40,000 characters",code:"CONTENT_TOO_LONG"};if(L&&!L.match(/\.(jpeg|jpg|gif|png)$/))return{error:"Invalid image URL format",code:"INVALID_IMAGE_URL"};if(N&&!Array.isArray(N))return{error:"Tags must be an array",code:"INVALID_TAGS"};if((N==null?void 0:N.length)>5)return{error:"Maximum 5 tags allowed",code:"TOO_MANY_TAGS"};const J=(N==null?void 0:N.map($=>$.toLowerCase().trim().replace(/[^a-z0-9]/g,"")).filter($=>$.length>0&&$.length<=20).slice(0,5))||[];try{console.log("PostContext: Creating new post for user:",e.uid);const $=ve(Z,"users",e.uid);(await Rt($)).exists()||(console.log("PostContext: Creating user profile before post"),await Pa($,{uid:e.uid,email:e.email,displayName:e.displayName||"Anonymous",photoURL:e.photoURL||"",bio:"",createdAt:yt(),lastLogin:yt(),followersCount:0,followingCount:0,postsCount:0}));const ie={userId:e.uid,authorId:e.uid,authorDisplayName:e.displayName||"Anonymous",authorPhotoURL:e.photoURL||"",authorEmail:e.email,title:I.trim(),content:C.trim(),tags:J,visibility:X,draft:we,nsfw:G,imageUrl:L||"",media:[]};console.log("PostContext: Post metadata:",ie);const ne=pR(),pe={id:ne,...ie,createdAt:new Date,lastActivityAt:new Date,likes:[],comments:[],commentCount:0,stats:{views:0,likes:0,comments:0,shares:0},flags:{isEdited:!1,isPinned:!1,isLocked:!1,isArchived:!1}};r(Le=>[pe,...Le]),console.log("PostContext: Creating post in Firestore");const Ee=await j6({userId:e.uid,title:I.trim(),content:C.trim(),imageUrl:L||"",tags:J,visibility:X,draft:we,nsfw:G});return Ee.success?(console.log("PostContext: Post created successfully"),await mr($,{postsCount:pr(1),lastActivityAt:yt()}),{success:!0,data:Ee.data,message:"Post created successfully"}):(console.error("PostContext: Failed to create post:",Ee.error),r(Le=>Le.filter(Ye=>Ye.id!==ne)),{error:Ee.error})}catch($){return console.error("PostContext: Error creating post:",$),{error:$.message}}},P=async(I,C)=>{if(!(!e||!n.find(L=>L.id===I)))try{await $6(I,e.uid,C)}catch(L){console.error("PostContext: Error adding comment:",L)}},j=async(I,C)=>{if(!(!e||!n.find(L=>L.id===I)))try{await z6(I,C)}catch(L){console.error("PostContext: Error removing comment:",L)}},k=async I=>{if(!(!e||!n.find(D=>D.id===I)))try{await O6(I,e.uid)}catch(D){console.error("PostContext: Error liking post:",D)}},S=async I=>{if(!(!e||!n.find(D=>D.id===I)))try{await F6(I,e.uid)}catch(D){console.error("PostContext: Error unliking post:",D)}},T=async(I,C)=>{if(!e||e.uid!==C)return{success:!1,error:"Unauthorized"};try{const D=await V6(I,C);return D.success?(r(L=>L.filter(N=>N.id!==I)),{success:!0}):D}catch(D){return console.error("PostContext: Error deleting post:",D),{success:!1,error:D.message}}};return f.jsx(_R.Provider,{value:{posts:n,loading:i,error:o,hasMore:d,lastPost:l,fetchPosts:b,createNewPost:E,addNewComment:P,removeComment:j,handleLike:k,handleUnlike:S,fetchUserPosts:w,deletePost:T},children:t})},Xc=()=>g.useContext(_R);let K6={data:""},Q6=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||K6,Y6=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,X6=/\/\*[^]*?\*\/|  +/g,RE=/\n+/g,ji=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?ji(o,s):s+"{"+ji(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=ji(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ji.p?ji.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Wr={},ER=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+ER(t[n]);return e}return t},J6=(t,e,n,r,i)=>{let s=ER(t),o=Wr[s]||(Wr[s]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(s));if(!Wr[o]){let l=s!==t?t:(c=>{let d,h,m=[{}];for(;d=Y6.exec(c.replace(X6,""));)d[4]?m.shift():d[3]?(h=d[3].replace(RE," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][d[1]]=d[2].replace(RE," ").trim();return m[0]})(t);Wr[o]=ji(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Wr.g?Wr.g:null;return n&&(Wr.g=Wr[o]),((l,c,d,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Wr[o],e,r,a),o},Z6=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":ji(a,""):a===!1?"":a}return r+i+(o??"")},"");function Vf(t){let e=this||{},n=t.call?t(e.p):t;return J6(n.unshift?n.raw?Z6(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,Q6(e.target),e.g,e.o,e.k)}let xR,Ug,Bg;Vf.bind({g:1});let mi=Vf.bind({k:1});function e9(t,e,n,r){ji.p=e,xR=t,Ug=n,Bg=r}function vs(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:Ug&&Ug()},a),n.o=/ *go\d+/.test(l),a.className=Vf.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Bg&&c[0]&&Bg(a),xR(c,a)}return i}}var t9=t=>typeof t=="function",$g=(t,e)=>t9(t)?t(e):t,n9=(()=>{let t=0;return()=>(++t).toString()})(),r9=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),i9=20,Ad=new Map,s9=1e3,AE=t=>{if(Ad.has(t))return;let e=setTimeout(()=>{Ad.delete(t),Of({type:4,toastId:t})},s9);Ad.set(t,e)},o9=t=>{let e=Ad.get(t);e&&clearTimeout(e)},zg=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,i9)};case 1:return e.toast.id&&o9(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?zg(t,{type:1,toast:n}):zg(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?AE(r):t.toasts.forEach(s=>{AE(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},a9=[],Jm={toasts:[],pausedAt:void 0},Of=t=>{Jm=zg(Jm,t),a9.forEach(e=>{e(Jm)})},l9=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||n9()}),Jc=t=>(e,n)=>{let r=l9(e,t,n);return Of({type:2,toast:r}),r.id},rn=(t,e)=>Jc("blank")(t,e);rn.error=Jc("error");rn.success=Jc("success");rn.loading=Jc("loading");rn.custom=Jc("custom");rn.dismiss=t=>{Of({type:3,toastId:t})};rn.remove=t=>Of({type:4,toastId:t});rn.promise=(t,e,n)=>{let r=rn.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(rn.success($g(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{rn.error($g(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var c9=mi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,u9=mi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,d9=mi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,h9=vs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${c9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${u9} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${d9} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,f9=mi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,m9=vs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${f9} 1s linear infinite;
`,p9=mi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,g9=mi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,y9=vs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${p9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${g9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,v9=vs("div")`
  position: absolute;
`,w9=vs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,_9=mi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,E9=vs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${_9} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,x9=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?g.createElement(E9,null,e):e:n==="blank"?null:g.createElement(w9,null,g.createElement(m9,{...r}),n!=="loading"&&g.createElement(v9,null,n==="error"?g.createElement(h9,{...r}):g.createElement(y9,{...r})))},T9=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,b9=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,I9="0%{opacity:0;} 100%{opacity:1;}",S9="0%{opacity:1;} 100%{opacity:0;}",R9=vs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,A9=vs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,C9=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=r9()?[I9,S9]:[T9(n),b9(n)];return{animation:e?`${mi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${mi(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};g.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?C9(t.position||e||"top-center",t.visible):{opacity:0},s=g.createElement(x9,{toast:t}),o=g.createElement(A9,{...t.ariaProps},$g(t.message,t));return g.createElement(R9,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):g.createElement(g.Fragment,null,s,o))});e9(g.createElement);Vf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const TR=g.createContext(),bR=()=>{const t=g.useContext(TR);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},P9=({children:t})=>{const{currentUser:e}=At(),[n,r]=g.useState([]),[i,s]=g.useState(0),[o,a]=g.useState(!0),[l,c]=g.useState(null);g.useEffect(()=>{let _=null;return e!=null&&e.uid?(a(!0),_=gR(e.uid,x=>{r(x);const R=x.filter(w=>!w.read);s(R.length),a(!1),c(null);const b=x[0];b&&!b.read&&b.createdAt>new Date(Date.now()-5e3)&&rn(b.message,{icon:b.type==="follow"?"":"",duration:4e3})},x=>{console.error("Notification subscription error:",x),c(x.message),a(!1)})):(r([]),s(0),a(!1)),()=>{_&&_()}},[e==null?void 0:e.uid]);const d=g.useCallback(async _=>{try{await yR(_),r(x=>x.map(R=>R.id===_?{...R,read:!0}:R)),s(x=>Math.max(0,x-1))}catch(x){console.error("Error marking notification as read:",x),rn.error("Failed to mark notification as read")}},[]),h=g.useCallback(async _=>{try{await D6(_),r(x=>x.filter(R=>R.id!==_)),s(x=>{const R=n.find(b=>b.id===_);return R&&!R.read?x-1:x})}catch(x){console.error("Error removing notification:",x),rn.error("Failed to remove notification")}},[n]),m=g.useCallback(async()=>{if(!(!(e!=null&&e.uid)||n.length===0))try{const _=n.filter(x=>!x.read);if(_.length===0)return;await N6(_.map(x=>x.id),e.uid),r(x=>x.map(R=>({...R,read:!0}))),s(0),rn.success("All notifications marked as read")}catch(_){console.error("Error marking all notifications as read:",_),rn.error("Failed to mark all notifications as read")}},[e==null?void 0:e.uid,n]),y={notifications:n,unreadCount:i,loading:o,error:l,markAsRead:d,removeNotification:h,markAllAsRead:m};return f.jsx(TR.Provider,{value:y,children:t})};function k9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const Zm=g.forwardRef(k9);function N9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const mv=g.forwardRef(N9);function D9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const L9=g.forwardRef(D9);function M9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const ep=g.forwardRef(M9);function j9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const tp=g.forwardRef(j9);function V9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const Ah=g.forwardRef(V9);function O9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const pv=g.forwardRef(O9);function F9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const U9=g.forwardRef(F9);function B9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const Ff=g.forwardRef(B9);function $9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const CE=g.forwardRef($9);function z9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"}))}const W9=g.forwardRef(z9);function H9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const q9=g.forwardRef(H9);function G9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const K9=g.forwardRef(G9);function Q9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const IR=g.forwardRef(Q9);function Y9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"}))}const X9=g.forwardRef(Y9);function J9({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Z9=g.forwardRef(J9);function eF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const tF=g.forwardRef(eF);function nF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const rF=g.forwardRef(nF);function iF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0 0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"}))}const Yu=g.forwardRef(iF);function sF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const Wg=g.forwardRef(sF);function oF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const aF=g.forwardRef(oF);function lF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const cF=g.forwardRef(lF);function uF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-2.25-1.313M21 7.5v2.25m0-2.25-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3 2.25-1.313M12 12.75l-2.25-1.313M12 12.75V15m0 6.75 2.25-1.313M12 21.75V19.5m0 2.25-2.25-1.313m0-16.875L12 2.25l2.25 1.313M21 14.25v2.25l-2.25 1.313m-13.5 0L3 16.5v-2.25"}))}const dF=g.forwardRef(uF);function hF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const fF=g.forwardRef(hF);function mF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const pF=g.forwardRef(mF);function gF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const SR=g.forwardRef(gF);function yF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const vF=g.forwardRef(yF);function wF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const _F=g.forwardRef(wF);function EF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const xF=g.forwardRef(EF);function TF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const Ql=g.forwardRef(TF);function bF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const RR=g.forwardRef(bF);function IF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 0 1-1.161.886l-.143.048a1.107 1.107 0 0 0-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 0 1-1.652.928l-.679-.906a1.125 1.125 0 0 0-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 0 0-8.862 12.872M12.75 3.031a9 9 0 0 1 6.69 14.036m0 0-.177-.529A2.25 2.25 0 0 0 17.128 15H16.5l-.324-.324a1.453 1.453 0 0 0-2.328.377l-.036.073a1.586 1.586 0 0 1-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 0 1-5.276 3.67m0 0a9 9 0 0 1-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"}))}const PE=g.forwardRef(IF);function SF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const AR=g.forwardRef(SF);function RF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const CR=g.forwardRef(RF);function AF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const CF=g.forwardRef(AF);function PF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const kF=g.forwardRef(PF);function NF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Hg=g.forwardRef(NF);function DF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const LF=g.forwardRef(DF);function MF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const Xu=g.forwardRef(MF);function jF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z"}))}const PR=g.forwardRef(jF);function VF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const kR=g.forwardRef(VF);function OF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const FF=g.forwardRef(OF);function UF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const BF=g.forwardRef(UF);function $F({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const NR=g.forwardRef($F);function zF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}const qg=g.forwardRef(zF);function WF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const HF=g.forwardRef(WF);function qF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const gv=g.forwardRef(qF);function GF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const kE=g.forwardRef(GF);function KF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const QF=g.forwardRef(KF);function YF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const XF=g.forwardRef(YF);function JF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const DR=g.forwardRef(JF);function ZF({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const LR=g.forwardRef(ZF);function e7({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const yv=g.forwardRef(e7);function t7({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const n7=g.forwardRef(t7);function r7({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Uf=g.forwardRef(r7);function i7({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const MR=g.forwardRef(i7);function s7({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Bf=g.forwardRef(s7),vv=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),$f=g.createContext({}),zf=g.createContext(null),Wf=typeof document<"u",Zc=Wf?g.useLayoutEffect:g.useEffect,jR=g.createContext({strict:!1}),wv=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o7="framerAppearId",VR="data-"+wv(o7);function a7(t,e,n,r){const{visualElement:i}=g.useContext($f),s=g.useContext(jR),o=g.useContext(zf),a=g.useContext(vv).reducedMotion,l=g.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;g.useInsertionEffect(()=>{c&&c.update(n,o)});const d=g.useRef(!!(n[VR]&&!window.HandoffComplete));return Zc(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),g.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function Ko(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function l7(t,e,n){return g.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ko(n)&&(n.current=r))},[e])}function Pc(t){return typeof t=="string"||Array.isArray(t)}function Hf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const _v=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ev=["initial",..._v];function qf(t){return Hf(t.animate)||Ev.some(e=>Pc(t[e]))}function OR(t){return!!(qf(t)||t.variants)}function c7(t,e){if(qf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Pc(n)?n:void 0,animate:Pc(r)?r:void 0}}return t.inherit!==!1?e:{}}function u7(t){const{initial:e,animate:n}=c7(t,g.useContext($f));return g.useMemo(()=>({initial:e,animate:n}),[NE(e),NE(n)])}function NE(t){return Array.isArray(t)?t.join(" "):t}const DE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kc={};for(const t in DE)kc[t]={isEnabled:e=>DE[t].some(n=>!!e[n])};function d7(t){for(const e in t)kc[e]={...kc[e],...t[e]}}const xv=g.createContext({}),FR=g.createContext({}),h7=Symbol.for("motionComponentSymbol");function f7({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&d7(t);function s(a,l){let c;const d={...g.useContext(vv),...a,layoutId:m7(a)},{isStatic:h}=d,m=u7(a),y=r(a,h);if(!h&&Wf){m.visualElement=a7(i,y,d,e);const _=g.useContext(FR),x=g.useContext(jR).strict;m.visualElement&&(c=m.visualElement.loadFeatures(d,x,t,_))}return g.createElement($f.Provider,{value:m},c&&m.visualElement?g.createElement(c,{visualElement:m.visualElement,...d}):null,n(i,a,l7(y,m.visualElement,l),y,h,m.visualElement))}const o=g.forwardRef(s);return o[h7]=i,o}function m7({layoutId:t}){const e=g.useContext(xv).id;return e&&t!==void 0?e+"-"+t:t}function p7(t){function e(r,i={}){return f7(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const g7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tv(t){return typeof t!="string"||t.includes("-")?!1:!!(g7.indexOf(t)>-1||/[A-Z]/.test(t))}const Ch={};function y7(t){Object.assign(Ch,t)}const eu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vo=new Set(eu);function UR(t,{layout:e,layoutId:n}){return vo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ch[t]||t==="opacity")}const xn=t=>!!(t&&t.getVelocity),v7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w7=eu.length;function _7(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<w7;o++){const a=eu[o];if(t[a]!==void 0){const l=v7[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const BR=t=>e=>typeof e=="string"&&e.startsWith(t),$R=BR("--"),Gg=BR("var(--"),E7=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,x7=(t,e)=>e&&typeof t=="number"?e.transform(t):t,os=(t,e,n)=>Math.min(Math.max(n,t),e),wo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Yl={...wo,transform:t=>os(0,1,t)},Ju={...wo,default:1},Xl=t=>Math.round(t*1e5)/1e5,Gf=/(-)?([\d]*\.?[\d])+/g,zR=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,T7=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function tu(t){return typeof t=="string"}const nu=t=>({test:e=>tu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ri=nu("deg"),Pr=nu("%"),he=nu("px"),b7=nu("vh"),I7=nu("vw"),LE={...Pr,parse:t=>Pr.parse(t)/100,transform:t=>Pr.transform(t*100)},ME={...wo,transform:Math.round},WR={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,size:he,top:he,right:he,bottom:he,left:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,rotate:Ri,rotateX:Ri,rotateY:Ri,rotateZ:Ri,scale:Ju,scaleX:Ju,scaleY:Ju,scaleZ:Ju,skew:Ri,skewX:Ri,skewY:Ri,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:Yl,originX:LE,originY:LE,originZ:he,zIndex:ME,fillOpacity:Yl,strokeOpacity:Yl,numOctaves:ME};function bv(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,d=!0;for(const h in e){const m=e[h];if($R(h)){s[h]=m;continue}const y=WR[h],_=x7(m,y);if(vo.has(h)){if(l=!0,o[h]=_,!d)continue;m!==(y.default||0)&&(d=!1)}else h.startsWith("origin")?(c=!0,a[h]=_):i[h]=_}if(e.transform||(l||r?i.transform=_7(t.transform,n,d,r):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:y=0}=a;i.transformOrigin=`${h} ${m} ${y}`}}const Iv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function HR(t,e,n){for(const r in e)!xn(e[r])&&!UR(r,n)&&(t[r]=e[r])}function S7({transformTemplate:t},e,n){return g.useMemo(()=>{const r=Iv();return bv(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function R7(t,e,n){const r=t.style||{},i={};return HR(i,r,t),Object.assign(i,S7(t,e,n)),t.transformValues?t.transformValues(i):i}function A7(t,e,n){const r={},i=R7(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const C7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ph(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||C7.has(t)}let qR=t=>!Ph(t);function P7(t){t&&(qR=e=>e.startsWith("on")?!Ph(e):t(e))}try{P7(require("@emotion/is-prop-valid").default)}catch{}function k7(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(qR(i)||n===!0&&Ph(i)||!e&&!Ph(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function jE(t,e,n){return typeof t=="string"?t:he.transform(e+n*t)}function N7(t,e,n){const r=jE(e,t.x,t.width),i=jE(n,t.y,t.height);return`${r} ${i}`}const D7={offset:"stroke-dashoffset",array:"stroke-dasharray"},L7={offset:"strokeDashoffset",array:"strokeDasharray"};function M7(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?D7:L7;t[s.offset]=he.transform(-r);const o=he.transform(e),a=he.transform(n);t[s.array]=`${o} ${a}`}function Sv(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h,m){if(bv(t,c,d,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:_,dimensions:x}=t;y.transform&&(x&&(_.transform=y.transform),delete y.transform),x&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=N7(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&M7(y,o,a,l,!1)}const GR=()=>({...Iv(),attrs:{}}),Rv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function j7(t,e,n,r){const i=g.useMemo(()=>{const s=GR();return Sv(s,e,{enableHardwareAcceleration:!1},Rv(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};HR(s,t.style,t),i.style={...s,...i.style}}return i}function V7(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Tv(n)?j7:A7)(r,s,o,n),d={...k7(r,typeof n=="string",t),...l,ref:i},{children:h}=r,m=g.useMemo(()=>xn(h)?h.get():h,[h]);return g.createElement(n,{...d,children:m})}}function KR(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const QR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YR(t,e,n,r){KR(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(QR.has(i)?i:wv(i),e.attrs[i])}function Av(t,e){const{style:n}=t,r={};for(const i in n)(xn(n[i])||e.style&&xn(e.style[i])||UR(i,t))&&(r[i]=n[i]);return r}function XR(t,e){const n=Av(t,e);for(const r in t)if(xn(t[r])||xn(e[r])){const i=eu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Cv(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function ru(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const kh=t=>Array.isArray(t),O7=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),F7=t=>kh(t)?t[t.length-1]||0:t;function Cd(t){const e=xn(t)?t.get():t;return O7(e)?e.toValue():e}function U7({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:B7(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const JR=t=>(e,n)=>{const r=g.useContext($f),i=g.useContext(zf),s=()=>U7(t,e,r,i);return n?s():ru(s)};function B7(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Cd(s[m]);let{initial:o,animate:a}=t;const l=qf(t),c=OR(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!Hf(h)&&(Array.isArray(h)?h:[h]).forEach(y=>{const _=Cv(t,y);if(!_)return;const{transitionEnd:x,transition:R,...b}=_;for(const w in b){let E=b[w];if(Array.isArray(E)){const P=d?E.length-1:0;E=E[P]}E!==null&&(i[w]=E)}for(const w in x)i[w]=x[w]}),i}const gt=t=>t;class VE{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function $7(t){let e=new VE,n=new VE,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const h=d&&i,m=h?e:n;return c&&o.add(l),m.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(l),o.has(d)&&(a.schedule(d),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const Zu=["prepare","read","update","preRender","render","postRender"],z7=40;function W7(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Zu.reduce((h,m)=>(h[m]=$7(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,z7),1),i.timestamp=h,i.isProcessing=!0,Zu.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Zu.reduce((h,m)=>{const y=s[m];return h[m]=(_,x=!1,R=!1)=>(n||l(),y.schedule(_,x,R)),h},{}),cancel:h=>Zu.forEach(m=>s[m].cancel(h)),state:i,steps:s}}const{schedule:Be,cancel:Lr,state:Gt,steps:np}=W7(typeof requestAnimationFrame<"u"?requestAnimationFrame:gt,!0),H7={useVisualState:JR({scrapeMotionValuesFromProps:XR,createRenderState:GR,onMount:(t,e,{renderState:n,latestValues:r})=>{Be.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Be.render(()=>{Sv(n,r,{enableHardwareAcceleration:!1},Rv(e.tagName),t.transformTemplate),YR(e,n)})}})},q7={useVisualState:JR({scrapeMotionValuesFromProps:Av,createRenderState:Iv})};function G7(t,{forwardMotionProps:e=!1},n,r){return{...Tv(t)?H7:q7,preloadedFeatures:n,useRender:V7(e),createVisualElement:r,Component:t}}function Zr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const ZR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Kf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const K7=t=>e=>ZR(e)&&t(e,Kf(e));function ii(t,e,n,r){return Zr(t,e,K7(n),r)}const Q7=(t,e)=>n=>e(t(n)),Ji=(...t)=>t.reduce(Q7);function eA(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const OE=eA("dragHorizontal"),FE=eA("dragVertical");function tA(t){let e=!1;if(t==="y")e=FE();else if(t==="x")e=OE();else{const n=OE(),r=FE();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function nA(){const t=tA(!0);return t?(t(),!1):!0}class ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}function UE(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||nA())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Be.update(()=>a[r](s,o))};return ii(t.current,n,i,{passive:!t.getProps()[r]})}class Y7 extends ws{mount(){this.unmount=Ji(UE(this.node,!0),UE(this.node,!1))}unmount(){}}class X7 extends ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ji(Zr(this.node.current,"focus",()=>this.onFocus()),Zr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const rA=(t,e)=>e?t===e?!0:rA(t,e.parentElement):!1;function rp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Kf(n))}class J7 extends ws{constructor(){super(...arguments),this.removeStartListeners=gt,this.removeEndListeners=gt,this.removeAccessibleListeners=gt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=ii(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Be.update(()=>{!h&&!rA(this.node.current,a.target)?d&&d(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=ii(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ji(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||rp("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Be.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=Zr(this.node.current,"keyup",o),rp("down",(a,l)=>{this.startPress(a,l)})},n=Zr(this.node.current,"keydown",e),r=()=>{this.isPressing&&rp("cancel",(s,o)=>this.cancelPress(s,o))},i=Zr(this.node.current,"blur",r);this.removeAccessibleListeners=Ji(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Be.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!nA()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Be.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ii(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Zr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ji(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Kg=new WeakMap,ip=new WeakMap,Z7=t=>{const e=Kg.get(t.target);e&&e(t)},eU=t=>{t.forEach(Z7)};function tU({root:t,...e}){const n=t||document;ip.has(n)||ip.set(n,{});const r=ip.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(eU,{root:t,...e})),r[i]}function nU(t,e,n){const r=tU(e);return Kg.set(t,n),r.observe(t),()=>{Kg.delete(t),r.unobserve(t)}}const rU={some:0,all:1};class iU extends ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:rU[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=c?d:h;m&&m(l)};return nU(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sU(e,n))&&this.startObserver()}unmount(){}}function sU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oU={inView:{Feature:iU},tap:{Feature:J7},focus:{Feature:X7},hover:{Feature:Y7}};function iA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function aU(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function lU(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Qf(t,e,n){const r=t.getProps();return Cv(r,e,n!==void 0?n:r.custom,aU(t),lU(t))}let Nh=gt;const Hs=t=>t*1e3,si=t=>t/1e3,cU={current:!1},sA=t=>Array.isArray(t)&&typeof t[0]=="number";function oA(t){return!!(!t||typeof t=="string"&&aA[t]||sA(t)||Array.isArray(t)&&t.every(oA))}const Ll=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,aA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ll([0,.65,.55,1]),circOut:Ll([.55,0,1,.45]),backIn:Ll([.31,.01,.66,-.59]),backOut:Ll([.33,1.53,.69,.99])};function lA(t){if(t)return sA(t)?Ll(t):Array.isArray(t)?t.map(lA):aA[t]}function uU(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=lA(a);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function dU(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const cA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,hU=1e-7,fU=12;function mU(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=cA(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>hU&&++a<fU);return o}function iu(t,e,n,r){if(t===e&&n===r)return gt;const i=s=>mU(s,0,1,t,n);return s=>s===0||s===1?s:cA(i(s),e,r)}const pU=iu(.42,0,1,1),gU=iu(0,0,.58,1),uA=iu(.42,0,.58,1),yU=t=>Array.isArray(t)&&typeof t[0]!="number",dA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hA=t=>e=>1-t(1-e),Pv=t=>1-Math.sin(Math.acos(t)),fA=hA(Pv),vU=dA(Pv),mA=iu(.33,1.53,.69,.99),kv=hA(mA),wU=dA(kv),_U=t=>(t*=2)<1?.5*kv(t):.5*(2-Math.pow(2,-10*(t-1))),BE={linear:gt,easeIn:pU,easeInOut:uA,easeOut:gU,circIn:Pv,circInOut:vU,circOut:fA,backIn:kv,backInOut:wU,backOut:mA,anticipate:_U},$E=t=>{if(Array.isArray(t)){Nh(t.length===4);const[e,n,r,i]=t;return iu(e,n,r,i)}else if(typeof t=="string")return Nh(BE[t]!==void 0),BE[t];return t},Nv=(t,e)=>n=>!!(tu(n)&&T7.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),pA=(t,e,n)=>r=>{if(!tu(r))return r;const[i,s,o,a]=r.match(Gf);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},EU=t=>os(0,255,t),sp={...wo,transform:t=>Math.round(EU(t))},Bs={test:Nv("rgb","red"),parse:pA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+sp.transform(t)+", "+sp.transform(e)+", "+sp.transform(n)+", "+Xl(Yl.transform(r))+")"};function xU(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Qg={test:Nv("#"),parse:xU,transform:Bs.transform},Qo={test:Nv("hsl","hue"),parse:pA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pr.transform(Xl(e))+", "+Pr.transform(Xl(n))+", "+Xl(Yl.transform(r))+")"},tn={test:t=>Bs.test(t)||Qg.test(t)||Qo.test(t),parse:t=>Bs.test(t)?Bs.parse(t):Qo.test(t)?Qo.parse(t):Qg.parse(t),transform:t=>tu(t)?t:t.hasOwnProperty("red")?Bs.transform(t):Qo.transform(t)},ot=(t,e,n)=>-n*t+n*e+t;function op(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function TU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=op(l,a,t+1/3),s=op(l,a,t),o=op(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const ap=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},bU=[Qg,Bs,Qo],IU=t=>bU.find(e=>e.test(t));function zE(t){const e=IU(t);let n=e.parse(t);return e===Qo&&(n=TU(n)),n}const gA=(t,e)=>{const n=zE(t),r=zE(e),i={...n};return s=>(i.red=ap(n.red,r.red,s),i.green=ap(n.green,r.green,s),i.blue=ap(n.blue,r.blue,s),i.alpha=ot(n.alpha,r.alpha,s),Bs.transform(i))};function SU(t){var e,n;return isNaN(t)&&tu(t)&&(((e=t.match(Gf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(zR))===null||n===void 0?void 0:n.length)||0)>0}const yA={regex:E7,countKey:"Vars",token:"${v}",parse:gt},vA={regex:zR,countKey:"Colors",token:"${c}",parse:tn.parse},wA={regex:Gf,countKey:"Numbers",token:"${n}",parse:wo.parse};function lp(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Dh(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&lp(n,yA),lp(n,vA),lp(n,wA),n}function _A(t){return Dh(t).values}function EA(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Dh(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(yA.token,o[l]):l<r+n?a=a.replace(vA.token,tn.transform(o[l])):a=a.replace(wA.token,Xl(o[l]));return a}}const RU=t=>typeof t=="number"?0:t;function AU(t){const e=_A(t);return EA(t)(e.map(RU))}const as={test:SU,parse:_A,createTransformer:EA,getAnimatableNone:AU},xA=(t,e)=>n=>`${n>0?e:t}`;function TA(t,e){return typeof t=="number"?n=>ot(t,e,n):tn.test(t)?gA(t,e):t.startsWith("var(")?xA(t,e):IA(t,e)}const bA=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>TA(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},CU=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=TA(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},IA=(t,e)=>{const n=as.createTransformer(e),r=Dh(t),i=Dh(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Ji(bA(r.values,i.values),n):xA(t,e)},Nc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},WE=(t,e)=>n=>ot(t,e,n);function PU(t){return typeof t=="number"?WE:typeof t=="string"?tn.test(t)?gA:IA:Array.isArray(t)?bA:typeof t=="object"?CU:WE}function kU(t,e,n){const r=[],i=n||PU(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||gt:e;a=Ji(l,a)}r.push(a)}return r}function Dv(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Nh(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=kU(e,r,i),a=o.length,l=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const h=Nc(t[d],t[d+1],c);return o[d](h)};return n?c=>l(os(t[0],t[s-1],c)):l}function NU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Nc(0,e,r);t.push(ot(n,1,i))}}function DU(t){const e=[0];return NU(e,t.length-1),e}function LU(t,e){return t.map(n=>n*e)}function MU(t,e){return t.map(()=>e||uA).splice(0,t.length-1)}function Lh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=yU(r)?r.map($E):$E(r),s={done:!1,value:e[0]},o=LU(n&&n.length===e.length?n:DU(e),t),a=Dv(o,e,{ease:Array.isArray(i)?i:MU(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function SA(t,e){return e?t*(1e3/e):0}const jU=5;function RA(t,e,n){const r=Math.max(e-jU,0);return SA(n-t(r),e-r)}const cp=.001,VU=.01,OU=10,FU=.05,UU=1;function BU({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=os(FU,UU,o),t=os(VU,OU,si(t)),o<1?(i=c=>{const d=c*o,h=d*t,m=d-n,y=Yg(c,o),_=Math.exp(-h);return cp-m/y*_},s=c=>{const h=c*o*t,m=h*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,_=Math.exp(-h),x=Yg(Math.pow(c,2),o);return(-i(c)+cp>0?-1:1)*((m-y)*_)/x}):(i=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-cp+d*h},s=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=zU(i,s,a);if(t=Hs(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const $U=12;function zU(t,e,n){let r=n;for(let i=1;i<$U;i++)r=r-t(r)/e(r);return r}function Yg(t,e){return t*Math.sqrt(1-e*e)}const WU=["duration","bounce"],HU=["stiffness","damping","mass"];function HE(t,e){return e.some(n=>t[n]!==void 0)}function qU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!HE(t,HU)&&HE(t,WU)){const n=BU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function AA({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:d,velocity:h,isResolvedFromDuration:m}=qU({...r,velocity:-si(r.velocity||0)}),y=h||0,_=l/(2*Math.sqrt(a*c)),x=s-i,R=si(Math.sqrt(a/c)),b=Math.abs(x)<5;n||(n=b?.01:2),e||(e=b?.005:.5);let w;if(_<1){const E=Yg(R,_);w=P=>{const j=Math.exp(-_*R*P);return s-j*((y+_*R*x)/E*Math.sin(E*P)+x*Math.cos(E*P))}}else if(_===1)w=E=>s-Math.exp(-R*E)*(x+(y+R*x)*E);else{const E=R*Math.sqrt(_*_-1);w=P=>{const j=Math.exp(-_*R*P),k=Math.min(E*P,300);return s-j*((y+_*R*x)*Math.sinh(k)+E*x*Math.cosh(k))/E}}return{calculatedDuration:m&&d||null,next:E=>{const P=w(E);if(m)o.done=E>=d;else{let j=y;E!==0&&(_<1?j=RA(w,E,P):j=0);const k=Math.abs(j)<=n,S=Math.abs(s-P)<=e;o.done=k&&S}return o.value=o.done?s:P,o}}}function qE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},y=T=>a!==void 0&&T<a||l!==void 0&&T>l,_=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let x=n*e;const R=h+x,b=o===void 0?R:o(R);b!==R&&(x=b-h);const w=T=>-x*Math.exp(-T/r),E=T=>b+w(T),P=T=>{const I=w(T),C=E(T);m.done=Math.abs(I)<=c,m.value=m.done?b:C};let j,k;const S=T=>{y(m.value)&&(j=T,k=AA({keyframes:[m.value,_(m.value)],velocity:RA(E,T,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return S(0),{calculatedDuration:null,next:T=>{let I=!1;return!k&&j===void 0&&(I=!0,P(T),S(T)),j!==void 0&&T>j?k.next(T-j):(!I&&P(T),m)}}}const GU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Be.update(e,!0),stop:()=>Lr(e),now:()=>Gt.isProcessing?Gt.timestamp:performance.now()}},GE=2e4;function KE(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<GE;)e+=n,r=t.next(e);return e>=GE?1/0:e}const KU={decay:qE,inertia:qE,tween:Lh,keyframes:Lh,spring:AA};function Mh({autoplay:t=!0,delay:e=0,driver:n=GU,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:h,...m}){let y=1,_=!1,x,R;const b=()=>{R=new Promise(ne=>{x=ne})};b();let w;const E=KU[i]||Lh;let P;E!==Lh&&typeof r[0]!="number"&&(P=Dv([0,100],r,{clamp:!1}),r=[0,100]);const j=E({...m,keyframes:r});let k;a==="mirror"&&(k=E({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let S="idle",T=null,I=null,C=null;j.calculatedDuration===null&&s&&(j.calculatedDuration=KE(j));const{calculatedDuration:D}=j;let L=1/0,N=1/0;D!==null&&(L=D+o,N=L*(s+1)-o);let X=0;const we=ne=>{if(I===null)return;y>0&&(I=Math.min(I,ne)),y<0&&(I=Math.min(ne-N/y,I)),T!==null?X=T:X=Math.round(ne-I)*y;const pe=X-e*(y>=0?1:-1),Ee=y>=0?pe<0:pe>N;X=Math.max(pe,0),S==="finished"&&T===null&&(X=N);let Le=X,Ye=j;if(s){const _s=Math.min(X,N)/L;let Qn=Math.floor(_s),Ve=_s%1;!Ve&&_s>=1&&(Ve=1),Ve===1&&Qn--,Qn=Math.min(Qn,s+1),!!(Qn%2)&&(a==="reverse"?(Ve=1-Ve,o&&(Ve-=o/L)):a==="mirror"&&(Ye=k)),Le=os(0,1,Ve)*L}const rt=Ee?{done:!1,value:r[0]}:Ye.next(Le);P&&(rt.value=P(rt.value));let{done:Dt}=rt;!Ee&&D!==null&&(Dt=y>=0?X>=N:X<=0);const Ha=T===null&&(S==="finished"||S==="running"&&Dt);return h&&h(rt.value),Ha&&$(),rt},G=()=>{w&&w.stop(),w=void 0},J=()=>{S="idle",G(),x(),b(),I=C=null},$=()=>{S="finished",d&&d(),G(),x()},Q=()=>{if(_)return;w||(w=n(we));const ne=w.now();l&&l(),T!==null?I=ne-T:(!I||S==="finished")&&(I=ne),S==="finished"&&b(),C=I,T=null,S="running",w.start()};t&&Q();const ie={then(ne,pe){return R.then(ne,pe)},get time(){return si(X)},set time(ne){ne=Hs(ne),X=ne,T!==null||!w||y===0?T=ne:I=w.now()-ne/y},get duration(){const ne=j.calculatedDuration===null?KE(j):j.calculatedDuration;return si(ne)},get speed(){return y},set speed(ne){ne===y||!w||(y=ne,ie.time=si(X))},get state(){return S},play:Q,pause:()=>{S="paused",T=X},stop:()=>{_=!0,S!=="idle"&&(S="idle",c&&c(),J())},cancel:()=>{C!==null&&we(C),J()},complete:()=>{S="finished"},sample:ne=>(I=0,we(ne))};return ie}function QU(t){let e;return()=>(e===void 0&&(e=t()),e)}const YU=QU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),XU=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ed=10,JU=2e4,ZU=(t,e)=>e.type==="spring"||t==="backgroundColor"||!oA(e.ease);function e8(t,e,{onUpdate:n,onComplete:r,...i}){if(!(YU()&&XU.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const d=()=>{l=new Promise(E=>{a=E})};d();let{keyframes:h,duration:m=300,ease:y,times:_}=i;if(ZU(e,i)){const E=Mh({...i,repeat:0,delay:0});let P={done:!1,value:h[0]};const j=[];let k=0;for(;!P.done&&k<JU;)P=E.sample(k),j.push(P.value),k+=ed;_=void 0,h=j,m=k-ed,y="linear"}const x=uU(t.owner.current,e,h,{...i,duration:m,ease:y,times:_}),R=()=>{c=!1,x.cancel()},b=()=>{c=!0,Be.update(R),a(),d()};return x.onfinish=()=>{c||(t.set(dU(h,i)),r&&r(),b())},{then(E,P){return l.then(E,P)},attachTimeline(E){return x.timeline=E,x.onfinish=null,gt},get time(){return si(x.currentTime||0)},set time(E){x.currentTime=Hs(E)},get speed(){return x.playbackRate},set speed(E){x.playbackRate=E},get duration(){return si(m)},play:()=>{o||(x.play(),Lr(R))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:E}=x;if(E){const P=Mh({...i,autoplay:!1});t.setWithVelocity(P.sample(E-ed).value,P.sample(E).value,ed)}b()},complete:()=>{c||x.finish()},cancel:b}}function t8({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:gt,pause:gt,stop:gt,then:s=>(s(),Promise.resolve()),cancel:gt,complete:gt});return e?Mh({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const n8={type:"spring",stiffness:500,damping:25,restSpeed:10},r8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),i8={type:"keyframes",duration:.8},s8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},o8=(t,{keyframes:e})=>e.length>2?i8:vo.has(t)?t.startsWith("scale")?r8(e[1]):n8:s8,Xg=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(as.test(e)||e==="0")&&!e.startsWith("url(")),a8=new Set(["brightness","contrast","saturate","opacity"]);function l8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Gf)||[];if(!r)return t;const i=n.replace(r,"");let s=a8.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const c8=/([a-z-]*)\(.*?\)/g,Jg={...as,getAnimatableNone:t=>{const e=t.match(c8);return e?e.map(l8).join(" "):t}},u8={...WR,color:tn,backgroundColor:tn,outlineColor:tn,fill:tn,stroke:tn,borderColor:tn,borderTopColor:tn,borderRightColor:tn,borderBottomColor:tn,borderLeftColor:tn,filter:Jg,WebkitFilter:Jg},Lv=t=>u8[t];function CA(t,e){let n=Lv(t);return n!==Jg&&(n=as),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const PA=t=>/^0[^.\s]+$/.test(t);function d8(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||PA(t)}function h8(t,e,n,r){const i=Xg(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),d8(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const d=l[c];s[d]=CA(e,a)}return s}function f8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function Mv(t,e){return t[e]||t.default||t}const m8={skipAnimations:!1},jv=(t,e,n,r={})=>i=>{const s=Mv(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Hs(o);const l=h8(e,t,n,s),c=l[0],d=l[l.length-1],h=Xg(t,c),m=Xg(t,d);let y={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:_=>{e.set(_),s.onUpdate&&s.onUpdate(_)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(f8(s)||(y={...y,...o8(t,y)}),y.duration&&(y.duration=Hs(y.duration)),y.repeatDelay&&(y.repeatDelay=Hs(y.repeatDelay)),!h||!m||cU.current||s.type===!1||m8.skipAnimations)return t8(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=e8(e,t,y);if(_)return _}return Mh(y)};function jh(t){return!!(xn(t)&&t.add)}const kA=t=>/^\-?\d*\.?\d+$/.test(t);function Vv(t,e){t.indexOf(e)===-1&&t.push(e)}function Ov(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fv{constructor(){this.subscriptions=[]}add(e){return Vv(this.subscriptions,e),()=>Ov(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const p8=t=>!isNaN(parseFloat(t)),Jl={current:void 0};class g8{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Gt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Be.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Be.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=p8(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Fv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Be.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Jl.current&&Jl.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?SA(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function so(t,e){return new g8(t,e)}const NA=t=>e=>e.test(t),y8={test:t=>t==="auto",parse:t=>t},DA=[wo,he,Pr,Ri,I7,b7,y8],wl=t=>DA.find(NA(t)),v8=[...DA,tn,as],w8=t=>v8.find(NA(t));function _8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,so(n))}function Uv(t,e){const n=Qf(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=F7(s[o]);_8(t,o,a)}}function Zg(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&Uv(t,i),t.variantChildren&&t.variantChildren.forEach(s=>{Zg(s,e)})})}function E8(t,e){if(Array.isArray(e))return Zg(t,e);if(typeof e=="string")return Zg(t,[e]);Uv(t,e)}function x8(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),d!=null&&(typeof d=="string"&&(kA(d)||PA(d))?d=parseFloat(d):!w8(d)&&as.test(c)&&(d=CA(l,c)),t.addValue(l,so(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function T8(t,e){return e?(e[t]||e.default||e).from:void 0}function b8(t,e,n){const r={};for(const i in t){const s=T8(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function I8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function S8(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function LA(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const m=t.getValue(h),y=a[h];if(!m||y===void 0||d&&I8(d,h))continue;const _={delay:n,elapsed:0,...Mv(s||{},h)};if(window.HandoffAppearAnimations){const b=t.getProps()[VR];if(b){const w=window.HandoffAppearAnimations(b,h,m,Be);w!==null&&(_.elapsed=w,_.isHandoff=!0)}}let x=!_.isHandoff&&!S8(m,y);if(_.type==="spring"&&(m.getVelocity()||_.velocity)&&(x=!1),m.animation&&(x=!1),x)continue;m.start(jv(h,m,y,t.shouldReduceMotion&&vo.has(h)?{type:!1}:_));const R=m.animation;jh(l)&&(l.add(h),R.then(()=>l.remove(h))),c.push(R)}return o&&Promise.all(c).then(()=>{o&&Uv(t,o)}),c}function e0(t,e,n={}){const r=Qf(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(LA(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=i;return R8(t,e,c+l,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function R8(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(A8).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(e0(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function A8(t,e){return t.sortNodePosition(e)}function MA(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>e0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=e0(t,e,n);else{const i=typeof e=="function"?Qf(t,e,n.custom):e;r=Promise.all(LA(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const C8=[..._v].reverse(),P8=_v.length;function k8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>MA(t,n,r)))}function N8(t){let e=k8(t);const n=L8();let r=!0;const i=(l,c)=>{const d=Qf(t,c);if(d){const{transition:h,transitionEnd:m,...y}=d;l={...l,...y,...m}}return l};function s(l){e=l(t)}function o(l,c){const d=t.getProps(),h=t.getVariantContext(!0)||{},m=[],y=new Set;let _={},x=1/0;for(let b=0;b<P8;b++){const w=C8[b],E=n[w],P=d[w]!==void 0?d[w]:h[w],j=Pc(P),k=w===c?E.isActive:null;k===!1&&(x=b);let S=P===h[w]&&P!==d[w]&&j;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),E.protectedKeys={..._},!E.isActive&&k===null||!P&&!E.prevProp||Hf(P)||typeof P=="boolean")continue;let I=D8(E.prevProp,P)||w===c&&E.isActive&&!S&&j||b>x&&j,C=!1;const D=Array.isArray(P)?P:[P];let L=D.reduce(i,{});k===!1&&(L={});const{prevResolvedValues:N={}}=E,X={...N,...L},we=G=>{I=!0,y.has(G)&&(C=!0,y.delete(G)),E.needsAnimating[G]=!0};for(const G in X){const J=L[G],$=N[G];if(_.hasOwnProperty(G))continue;let Q=!1;kh(J)&&kh($)?Q=!iA(J,$):Q=J!==$,Q?J!==void 0?we(G):y.add(G):J!==void 0&&y.has(G)?we(G):E.protectedKeys[G]=!0}E.prevProp=P,E.prevResolvedValues=L,E.isActive&&(_={..._,...L}),r&&t.blockInitialAnimation&&(I=!1),I&&(!S||C)&&m.push(...D.map(G=>({animation:G,options:{type:w,...l}})))}if(y.size){const b={};y.forEach(w=>{const E=t.getBaseTarget(w);E!==void 0&&(b[w]=E)}),m.push({animation:b})}let R=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(m):Promise.resolve()}function a(l,c,d){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(y=>{var _;return(_=y.animationState)===null||_===void 0?void 0:_.setActive(l,c)}),n[l].isActive=c;const m=o(d,l);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function D8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!iA(e,t):!1}function Ss(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function L8(){return{animate:Ss(!0),whileInView:Ss(),whileHover:Ss(),whileTap:Ss(),whileDrag:Ss(),whileFocus:Ss(),exit:Ss()}}class M8 extends ws{constructor(e){super(e),e.animationState||(e.animationState=N8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Hf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let j8=0;class V8 extends ws{constructor(){super(...arguments),this.id=j8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const O8={animation:{Feature:M8},exit:{Feature:V8}},QE=(t,e)=>Math.abs(t-e);function F8(t,e){const n=QE(t.x,e.x),r=QE(t.y,e.y);return Math.sqrt(n**2+r**2)}class jA{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=dp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=F8(h.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:_}=h,{timestamp:x}=Gt;this.history.push({..._,timestamp:x});const{onStart:R,onMove:b}=this.handlers;m||(R&&R(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=up(m,this.transformPagePoint),Be.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:y,onSessionEnd:_,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=dp(h.type==="pointercancel"?this.lastMoveEventInfo:up(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,R),_&&_(h,R)},!ZR(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Kf(e),a=up(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Gt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,dp(a,this.history)),this.removeListeners=Ji(ii(this.contextWindow,"pointermove",this.handlePointerMove),ii(this.contextWindow,"pointerup",this.handlePointerUp),ii(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Lr(this.updatePoint)}}function up(t,e){return e?{point:e(t.point)}:t}function YE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function dp({point:t},e){return{point:t,delta:YE(t,VA(e)),offset:YE(t,U8(e)),velocity:B8(e,.1)}}function U8(t){return t[0]}function VA(t){return t[t.length-1]}function B8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=VA(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Hs(e)));)n--;if(!r)return{x:0,y:0};const s=si(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Dn(t){return t.max-t.min}function t0(t,e=0,n=.01){return Math.abs(t-e)<=n}function XE(t,e,n,r=.5){t.origin=r,t.originPoint=ot(e.min,e.max,t.origin),t.scale=Dn(n)/Dn(e),(t0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ot(n.min,n.max,t.origin)-t.originPoint,(t0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Zl(t,e,n,r){XE(t.x,e.x,n.x,r?r.originX:void 0),XE(t.y,e.y,n.y,r?r.originY:void 0)}function JE(t,e,n){t.min=n.min+e.min,t.max=t.min+Dn(e)}function $8(t,e,n){JE(t.x,e.x,n.x),JE(t.y,e.y,n.y)}function ZE(t,e,n){t.min=e.min-n.min,t.max=t.min+Dn(e)}function ec(t,e,n){ZE(t.x,e.x,n.x),ZE(t.y,e.y,n.y)}function z8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ot(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ot(n,t,r.max):Math.min(t,n)),t}function e2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function W8(t,{top:e,left:n,bottom:r,right:i}){return{x:e2(t.x,n,i),y:e2(t.y,e,r)}}function t2(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function H8(t,e){return{x:t2(t.x,e.x),y:t2(t.y,e.y)}}function q8(t,e){let n=.5;const r=Dn(t),i=Dn(e);return i>r?n=Nc(e.min,e.max-r,t.min):r>i&&(n=Nc(t.min,t.max-i,e.min)),os(0,1,n)}function G8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const n0=.35;function K8(t=n0){return t===!1?t=0:t===!0&&(t=n0),{x:n2(t,"left","right"),y:n2(t,"top","bottom")}}function n2(t,e,n){return{min:r2(t,e),max:r2(t,n)}}function r2(t,e){return typeof t=="number"?t:t[e]||0}const i2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yo=()=>({x:i2(),y:i2()}),s2=()=>({min:0,max:0}),_t=()=>({x:s2(),y:s2()});function Un(t){return[t("x"),t("y")]}function OA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Q8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Y8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hp(t){return t===void 0||t===1}function r0({scale:t,scaleX:e,scaleY:n}){return!hp(t)||!hp(e)||!hp(n)}function Ps(t){return r0(t)||FA(t)||t.z||t.rotate||t.rotateX||t.rotateY}function FA(t){return o2(t.x)||o2(t.y)}function o2(t){return t&&t!=="0%"}function Vh(t,e,n){const r=t-n,i=e*r;return n+i}function a2(t,e,n,r,i){return i!==void 0&&(t=Vh(t,i,r)),Vh(t,n,r)+e}function i0(t,e=0,n=1,r,i){t.min=a2(t.min,e,n,r,i),t.max=a2(t.max,e,n,r,i)}function UA(t,{x:e,y:n}){i0(t.x,e.translate,e.scale,e.originPoint),i0(t.y,n.translate,n.scale,n.originPoint)}function X8(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,UA(t,o)),r&&Ps(s.latestValues)&&Xo(t,s.latestValues))}e.x=l2(e.x),e.y=l2(e.y)}function l2(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Pi(t,e){t.min=t.min+e,t.max=t.max+e}function c2(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=ot(t.min,t.max,s);i0(t,e[n],e[r],o,e.scale)}const J8=["x","scaleX","originX"],Z8=["y","scaleY","originY"];function Xo(t,e){c2(t.x,e,J8),c2(t.y,e,Z8)}function BA(t,e){return OA(Y8(t.getBoundingClientRect(),e))}function eB(t,e,n){const r=BA(t,n),{scroll:i}=e;return i&&(Pi(r.x,i.offset.x),Pi(r.y,i.offset.y)),r}const $A=({current:t})=>t?t.ownerDocument.defaultView:null,tB=new WeakMap;class nB{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_t(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kf(d,"page").point)},s=(d,h)=>{const{drag:m,dragPropagation:y,onDragStart:_}=this.getProps();if(m&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=tA(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Un(R=>{let b=this.getAxisMotionValue(R).get()||0;if(Pr.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const E=w.layout.layoutBox[R];E&&(b=Dn(E)*(parseFloat(b)/100))}}this.originPoint[R]=b}),_&&Be.update(()=>_(d,h),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:_,onDrag:x}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:R}=h;if(y&&this.currentDirection===null){this.currentDirection=rB(R),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,R),this.updateAxis("y",h.point,R),this.visualElement.render(),x&&x(d,h)},a=(d,h)=>this.stop(d,h),l=()=>Un(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jA(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:$A(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Be.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!td(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=z8(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ko(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=W8(i.layoutBox,n):this.constraints=!1,this.elastic=K8(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Un(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=G8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ko(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=eB(r,i.root,this.visualElement.getTransformPagePoint());let o=H8(i.layout.layoutBox,s);if(n){const a=n(Q8(o));this.hasMutatedConstraints=!!a,a&&(o=OA(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Un(d=>{if(!td(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,_={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,_)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(jv(e,r,0,n))}stopAnimation(){Un(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Un(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Un(n=>{const{drag:r}=this.getProps();if(!td(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ot(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ko(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Un(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=q8({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Un(o=>{if(!td(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ot(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;tB.set(this.visualElement,this);const e=this.visualElement.current,n=ii(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ko(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Zr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Un(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=n0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function td(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function rB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iB extends ws{constructor(e){super(e),this.removeGroupControls=gt,this.removeListeners=gt,this.controls=new nB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gt}unmount(){this.removeGroupControls(),this.removeListeners()}}const u2=t=>(e,n)=>{t&&Be.update(()=>t(e,n))};class sB extends ws{constructor(){super(...arguments),this.removePointerDownListener=gt}onPointerDown(e){this.session=new jA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$A(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:u2(e),onStart:u2(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Be.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=ii(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function oB(){const t=g.useContext(zf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=g.useId();return g.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Pd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function d2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _l={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(he.test(t))t=parseFloat(t);else return t;const n=d2(t,e.target.x),r=d2(t,e.target.y);return`${n}% ${r}%`}},aB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=as.parse(t);if(i.length>5)return r;const s=as.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ot(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class lB extends ca.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;y7(cB),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Pd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Be.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zA(t){const[e,n]=oB(),r=g.useContext(xv);return ca.createElement(lB,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(FR),isPresent:e,safeToRemove:n})}const cB={borderRadius:{..._l,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_l,borderTopRightRadius:_l,borderBottomLeftRadius:_l,borderBottomRightRadius:_l,boxShadow:aB},WA=["TopLeft","TopRight","BottomLeft","BottomRight"],uB=WA.length,h2=t=>typeof t=="string"?parseFloat(t):t,f2=t=>typeof t=="number"||he.test(t);function dB(t,e,n,r,i,s){i?(t.opacity=ot(0,n.opacity!==void 0?n.opacity:1,hB(r)),t.opacityExit=ot(e.opacity!==void 0?e.opacity:1,0,fB(r))):s&&(t.opacity=ot(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<uB;o++){const a=`border${WA[o]}Radius`;let l=m2(e,a),c=m2(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||f2(l)===f2(c)?(t[a]=Math.max(ot(h2(l),h2(c),r),0),(Pr.test(c)||Pr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ot(e.rotate||0,n.rotate||0,r))}function m2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const hB=HA(0,.5,fA),fB=HA(.5,.95,gt);function HA(t,e,n){return r=>r<t?0:r>e?1:n(Nc(t,e,r))}function p2(t,e){t.min=e.min,t.max=e.max}function Fn(t,e){p2(t.x,e.x),p2(t.y,e.y)}function g2(t,e,n,r,i){return t-=e,t=Vh(t,1/n,r),i!==void 0&&(t=Vh(t,1/i,r)),t}function mB(t,e=0,n=1,r=.5,i,s=t,o=t){if(Pr.test(e)&&(e=parseFloat(e),e=ot(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ot(s.min,s.max,r);t===s&&(a-=e),t.min=g2(t.min,e,n,a,i),t.max=g2(t.max,e,n,a,i)}function y2(t,e,[n,r,i],s,o){mB(t,e[n],e[r],e[i],e.scale,s,o)}const pB=["x","scaleX","originX"],gB=["y","scaleY","originY"];function v2(t,e,n,r){y2(t.x,e,pB,n?n.x:void 0,r?r.x:void 0),y2(t.y,e,gB,n?n.y:void 0,r?r.y:void 0)}function w2(t){return t.translate===0&&t.scale===1}function qA(t){return w2(t.x)&&w2(t.y)}function yB(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function GA(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function _2(t){return Dn(t.x)/Dn(t.y)}class vB{constructor(){this.members=[]}add(e){Vv(this.members,e),e.scheduleRender()}remove(e){if(Ov(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function E2(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const wB=(t,e)=>t.depth-e.depth;class _B{constructor(){this.children=[],this.isDirty=!1}add(e){Vv(this.children,e),this.isDirty=!0}remove(e){Ov(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wB),this.isDirty=!1,this.children.forEach(e)}}function EB(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Lr(r),t(s-e))};return Be.read(r,!0),()=>Lr(r)}function xB(t){window.MotionDebug&&window.MotionDebug.record(t)}function TB(t){return t instanceof SVGElement&&t.tagName!=="svg"}function bB(t,e,n){const r=xn(t)?t:so(t);return r.start(jv("",r,e,n)),r.animation}const x2=["","X","Y","Z"],IB={visibility:"hidden"},T2=1e3;let SB=0;const ks={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function KA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=SB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ks.totalNodes=ks.resolvedTargetDeltas=ks.recalculatedProjection=0,this.nodes.forEach(CB),this.nodes.forEach(LB),this.nodes.forEach(MB),this.nodes.forEach(PB),xB(ks)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _B)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Fv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=TB(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=EB(m,250),Pd.hasAnimatedSinceResize&&(Pd.hasAnimatedSinceResize=!1,this.nodes.forEach(I2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||UB,{onLayoutAnimationStart:R,onLayoutAnimationComplete:b}=d.getProps(),w=!this.targetLayout||!GA(this.targetLayout,_)||y,E=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,E);const P={...Mv(x,"layout"),onPlay:R,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else m||I2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(b2);return}this.isUpdating||this.nodes.forEach(NB),this.isUpdating=!1,this.nodes.forEach(DB),this.nodes.forEach(RB),this.nodes.forEach(AB),this.clearAllSnapshots();const a=performance.now();Gt.delta=os(0,1e3/60,a-Gt.timestamp),Gt.timestamp=a,Gt.isProcessing=!0,np.update.process(Gt),np.preRender.process(Gt),np.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(kB),this.sharedNodes.forEach(VB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Be.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Be.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!qA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Ps(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),BB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return _t();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Pi(a.x,l.offset.x),Pi(a.y,l.offset.y)),a}removeElementScroll(o){const a=_t();Fn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;if(c!==this.root&&d&&h.layoutScroll){if(d.isRoot){Fn(a,o);const{scroll:m}=this.root;m&&(Pi(a.x,-m.offset.x),Pi(a.y,-m.offset.y))}Pi(a.x,d.offset.x),Pi(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=_t();Fn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Xo(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ps(d.latestValues)&&Xo(l,d.latestValues)}return Ps(this.latestValues)&&Xo(l,this.latestValues),l}removeTransform(o){const a=_t();Fn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ps(c.latestValues))continue;r0(c.latestValues)&&c.updateSnapshot();const d=_t(),h=c.measurePageBox();Fn(d,h),v2(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Ps(this.latestValues)&&v2(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),ec(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_t(),this.targetWithTransforms=_t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fn(this.target,this.layout.layoutBox),UA(this.target,this.targetDelta)):Fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),ec(this.relativeTargetOrigin,this.target,y.target),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ks.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||r0(this.parent.latestValues)||FA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Fn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;X8(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=Yo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Yo(),this.projectionDeltaWithTransform=Yo());const x=this.projectionTransform;Zl(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=E2(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==m||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),ks.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Yo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=_t(),y=l?l.source:void 0,_=this.layout?this.layout.source:void 0,x=y!==_,R=this.getStack(),b=!R||R.members.length<=1,w=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(FB));this.animationProgress=0;let E;this.mixTargetDelta=P=>{const j=P/1e3;S2(h.x,o.x,j),S2(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ec(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OB(this.relativeTarget,this.relativeTargetOrigin,m,j),E&&yB(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=_t()),Fn(E,this.relativeTarget)),x&&(this.animationValues=d,dB(d,c,this.latestValues,j,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Be.update(()=>{Pd.hasAnimatedSinceResize=!0,this.currentAnimation=bB(0,T2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(T2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&QA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||_t();const h=Dn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Dn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Fn(a,l),Xo(a,d),Zl(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new vB),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<x2.length;d++){const h="rotate"+x2[d];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return IB;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Cd(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Cd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ps(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=E2(this.projectionDeltaWithTransform,this.treeScale,m),d&&(c.transform=d(m,c.transform));const{x:y,y:_}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in Ch){if(m[x]===void 0)continue;const{correct:R,applyTo:b}=Ch[x],w=c.transform==="none"?m[x]:R(m[x],h);if(b){const E=b.length;for(let P=0;P<E;P++)c[b[P]]=w}else c[x]=w}return this.options.layoutId&&(c.pointerEvents=h===this?Cd(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(b2),this.root.sharedNodes.clear()}}}function RB(t){t.updateLayout()}function AB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Un(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],y=Dn(m);m.min=r[h].min,m.max=m.min+y}):QA(s,n.layoutBox,r)&&Un(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],y=Dn(r[h]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+y)});const a=Yo();Zl(a,r,n.layoutBox);const l=Yo();o?Zl(l,t.applyTransform(i,!0),n.measuredBox):Zl(l,r,n.layoutBox);const c=!qA(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:y}=h;if(m&&y){const _=_t();ec(_,n.layoutBox,m.layoutBox);const x=_t();ec(x,r,y.layoutBox),GA(_,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function CB(t){ks.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function PB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kB(t){t.clearSnapshot()}function b2(t){t.clearMeasurements()}function NB(t){t.isLayoutDirty=!1}function DB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function I2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function LB(t){t.resolveTargetDelta()}function MB(t){t.calcProjection()}function jB(t){t.resetRotation()}function VB(t){t.removeLeadSnapshot()}function S2(t,e,n){t.translate=ot(e.translate,0,n),t.scale=ot(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function R2(t,e,n,r){t.min=ot(e.min,n.min,r),t.max=ot(e.max,n.max,r)}function OB(t,e,n,r){R2(t.x,e.x,n.x,r),R2(t.y,e.y,n.y,r)}function FB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const UB={duration:.45,ease:[.4,0,.1,1]},A2=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),C2=A2("applewebkit/")&&!A2("chrome/")?Math.round:gt;function P2(t){t.min=C2(t.min),t.max=C2(t.max)}function BB(t){P2(t.x),P2(t.y)}function QA(t,e,n){return t==="position"||t==="preserve-aspect"&&!t0(_2(e),_2(n),.2)}const $B=KA({attachResizeListener:(t,e)=>Zr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fp={current:void 0},YA=KA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fp.current){const t=new $B({});t.mount(window),t.setOptions({layoutScroll:!0}),fp.current=t}return fp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),zB={pan:{Feature:sB},drag:{Feature:iB,ProjectionNode:YA,MeasureLayout:zA}},WB=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function HB(t){const e=WB.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function s0(t,e,n=1){const[r,i]=HB(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return kA(o)?parseFloat(o):o}else return Gg(i)?s0(i,e,n+1):i}function qB(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Gg(s))return;const o=s0(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Gg(s))continue;const o=s0(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const GB=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),XA=t=>GB.has(t),KB=t=>Object.keys(t).some(XA),k2=t=>t===wo||t===he,N2=(t,e)=>parseFloat(t.split(", ")[e]),D2=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return N2(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?N2(s[1],t):0}},QB=new Set(["x","y","z"]),YB=eu.filter(t=>!QB.has(t));function XB(t){const e=[];return YB.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Na={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:D2(4,13),y:D2(5,14)};Na.translateX=Na.x;Na.translateY=Na.y;const JB=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Na[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),t[c]=Na[c](l,s)}),t},ZB=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(XA);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],h=wl(d);const m=e[l];let y;if(kh(m)){const _=m.length,x=m[0]===null?1:0;d=m[x],h=wl(d);for(let R=x;R<_&&m[R]!==null;R++)y?Nh(wl(m[R])===y):y=wl(m[R])}else y=wl(m);if(h!==y)if(k2(h)&&k2(y)){const _=c.get();typeof _=="string"&&c.set(parseFloat(_)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&y===he&&(e[l]=m.map(parseFloat))}else h!=null&&h.transform&&(y!=null&&y.transform)&&(d===0||m===0)?d===0?c.set(y.transform(d)):e[l]=h.transform(m):(o||(s=XB(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=JB(e,t,a);return s.length&&s.forEach(([d,h])=>{t.getValue(d).set(h)}),t.render(),Wf&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function e$(t,e,n,r){return KB(e)?ZB(t,e,n,r):{target:e,transitionEnd:r}}const t$=(t,e,n,r)=>{const i=qB(t,e,r);return e=i.target,r=i.transitionEnd,e$(t,e,n,r)},o0={current:null},JA={current:!1};function n$(){if(JA.current=!0,!!Wf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>o0.current=t.matches;t.addListener(e),e()}else o0.current=!1}function r$(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(xn(s))t.addValue(i,s),jh(r)&&r.add(i);else if(xn(o))t.addValue(i,so(s,{owner:t})),jh(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,so(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const L2=new WeakMap,ZA=Object.keys(kc),i$=ZA.length,M2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],s$=Ev.length;class o${constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Be.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=qf(n),this.isVariantNode=OR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const m=d[h];a[h]!==void 0&&xn(m)&&(m.set(a[h],!1),jh(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,L2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),JA.current||n$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){L2.delete(this.current),this.projection&&this.projection.unmount(),Lr(this.notifyUpdate),Lr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=vo.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Be.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<i$;l++){const c=ZA[l],{isEnabled:d,Feature:h,ProjectionNode:m,MeasureLayout:y}=kc[c];m&&(o=m),d(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:h,layoutScroll:m,layoutRoot:y}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||h&&Ko(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:m,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<M2.length;r++){const i=M2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=r$(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<s$;r++){const i=Ev[r],s=this.props[i];(Pc(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=so(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Cv(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!xn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Fv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class eC extends o${sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=b8(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){x8(this,r,o);const a=t$(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function a$(t){return window.getComputedStyle(t)}class l$ extends eC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(vo.has(n)){const r=Lv(n);return r&&r.default||0}else{const r=a$(e),i=($R(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return BA(e,n)}build(e,n,r,i){bv(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Av(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){KR(e,n,r,i)}}class c$ extends eC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(vo.has(n)){const r=Lv(n);return r&&r.default||0}return n=QR.has(n)?n:wv(n),e.getAttribute(n)}measureInstanceViewportBox(){return _t()}scrapeMotionValuesFromProps(e,n){return XR(e,n)}build(e,n,r,i){Sv(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){YR(e,n,r,i)}mount(e){this.isSVGTag=Rv(e.tagName),super.mount(e)}}const u$=(t,e)=>Tv(t)?new c$(e,{enableHardwareAcceleration:!1}):new l$(e,{enableHardwareAcceleration:!0}),d$={layout:{ProjectionNode:YA,MeasureLayout:zA}},h$={...O8,...oU,...zB,...d$},H=p7((t,e)=>G7(t,e,h$,u$));function tC(){const t=g.useRef(!1);return Zc(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function f$(){const t=tC(),[e,n]=g.useState(0),r=g.useCallback(()=>{t.current&&n(e+1)},[e]);return[g.useCallback(()=>Be.postRender(r),[r]),e]}class m$ extends g.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function p$({children:t,isPresent:e}){const n=g.useId(),r=g.useRef(null),i=g.useRef({width:0,height:0,top:0,left:0});return g.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),g.createElement(m$,{isPresent:e,childRef:r,sizeRef:i},g.cloneElement(t,{ref:r}))}const mp=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=ru(g$),l=g.useId(),c=g.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),s?void 0:[n]);return g.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),g.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=g.createElement(p$,{isPresent:n},t)),g.createElement(zf.Provider,{value:c},t)};function g$(){return new Map}function y$(t){return g.useEffect(()=>()=>t(),[])}const Ns=t=>t.key||"";function v$(t,e){t.forEach(n=>{const r=Ns(n);e.set(r,n)})}function w$(t){const e=[];return g.Children.forEach(t,n=>{g.isValidElement(n)&&e.push(n)}),e}const nt=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=g.useContext(xv).forceRender||f$()[0],l=tC(),c=w$(t);let d=c;const h=g.useRef(new Map).current,m=g.useRef(d),y=g.useRef(new Map).current,_=g.useRef(!0);if(Zc(()=>{_.current=!1,v$(c,y),m.current=d}),y$(()=>{_.current=!0,y.clear(),h.clear()}),_.current)return g.createElement(g.Fragment,null,d.map(w=>g.createElement(mp,{key:Ns(w),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},w)));d=[...d];const x=m.current.map(Ns),R=c.map(Ns),b=x.length;for(let w=0;w<b;w++){const E=x[w];R.indexOf(E)===-1&&!h.has(E)&&h.set(E,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((w,E)=>{if(R.indexOf(E)!==-1)return;const P=y.get(E);if(!P)return;const j=x.indexOf(E);let k=w;if(!k){const S=()=>{h.delete(E);const T=Array.from(y.keys()).filter(I=>!R.includes(I));if(T.forEach(I=>y.delete(I)),m.current=c.filter(I=>{const C=Ns(I);return C===E||T.includes(C)}),!h.size){if(l.current===!1)return;a(),r&&r()}};k=g.createElement(mp,{key:Ns(P),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:s,mode:o},P),h.set(E,k)}d.splice(j,0,k)}),d=d.map(w=>{const E=w.key;return h.has(E)?w:g.createElement(mp,{key:Ns(w),isPresent:!0,presenceAffectsLayout:s,mode:o},w)}),g.createElement(g.Fragment,null,h.size?d:d.map(w=>g.cloneElement(w)))};function a0(t){const e=ru(()=>so(t)),{isStatic:n}=g.useContext(vv);if(n){const[,r]=g.useState(t);g.useEffect(()=>e.on("change",r),[])}return e}const _$=t=>t&&typeof t=="object"&&t.mix,E$=t=>_$(t)?t.mix:void 0;function x$(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],o=t[3+n],a=Dv(i,s,{mixer:E$(s[0]),...o});return e?a(r):a}function nC(t,e){const n=a0(e()),r=()=>n.set(e());return r(),Zc(()=>{const i=()=>Be.update(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),Lr(r)}}),n}function T$(t){Jl.current=[],t();const e=nC(Jl.current,t);return Jl.current=void 0,e}function j2(t,e,n,r){if(typeof t=="function")return T$(t);const i=typeof e=="function"?e:x$(e,n,r);return Array.isArray(t)?V2(t,i):V2([t],([s])=>i(s))}function V2(t,e){const n=ru(()=>[]);return nC(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function b$(t){t.values.forEach(e=>e.stop())}function I$(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(s=>{i.push(MA(s,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{E8(r,n)})},stop(){t.forEach(n=>{b$(n)})},mount(){return()=>{e.stop()}}};return e}function S$(){const t=ru(I$);return Zc(t.mount,[]),t}const R$=S$;function O2(){return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 border border-primary/30 flex items-center justify-center",children:f.jsx("span",{className:"text-xl font-bold text-primary",children:"U"})}),f.jsx("span",{className:"font-semibold text-lg",children:"Unreaddit"})]})}const A$=t=>{const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59),i=new Date(e.getTime()-24*60*60*1e3);console.log("Setting up real-time stats listeners...");const s=Ue(Z,"posts"),o=tt(s,or("createdAt","desc")),a=tt(Ue(Z,"posts"),ft("createdAt",">=",ht.fromDate(n)),ft("createdAt","<=",ht.fromDate(r))),l=tt(Ue(Z,"posts"),ft("createdAt",">=",ht.fromDate(i))),c=Ue(Z,"users"),d=tt(c);let h=0,m=0,y=0,_=new Set,x=new Set;const R=An(o,j=>{h=j.size,P()}),b=An(a,j=>{m=j.size,_=new Set,j.forEach(k=>{const S=k.data(),T=S.userId||S.authorId;T&&_.add(T)}),P()}),w=An(l,j=>{x=new Set,j.forEach(k=>{const S=k.data(),T=S.userId||S.authorId;T&&x.add(T)}),P()}),E=An(d,j=>{y=j.size,P()});function P(){const j=h>0?(m/h*100).toFixed(1):0,k=y>0?(_.size/y*100).toFixed(1):0,S=y>0?(x.size/y*100).toFixed(1):0,T={posts:{total:Number(h),monthly:Number(m),percentage:Number(j),trend:m>h/12?"up":m<h/12?"down":"neutral"},users:{total:Number(y),monthly:Number(_.size),percentage:Number(k),trend:_.size>y/12?"up":_.size<y/12?"down":"neutral"},active:{total:Number(x.size),percentage:Number(S),trend:x.size>y/30?"up":x.size<y/30?"down":"neutral"}};console.log("Real-time stats update:",T),t(T)}return()=>{console.log("Unsubscribing from real-time stats..."),R(),b(),w(),E()}},pp=({value:t=0,className:e=""})=>{const n=g.useRef(t),[r,i]=g.useState(t),[s,o]=g.useState(!1);g.useEffect(()=>{const l=Number(t)||0,c=Number(n.current)||0;if(l!==c){o(!0);const d=2e3,h=Date.now(),m=()=>{const y=Date.now()-h,_=Math.min(y/d,1),x=1-Math.pow(1-_,4),R=Math.round(c+(l-c)*x);i(R),_<1?requestAnimationFrame(m):(o(!1),n.current=l)};requestAnimationFrame(m)}},[t]);const a=Number(r).toLocaleString()||"0";return f.jsxs("div",{className:`${e} relative overflow-hidden h-[1.5em]`,children:[f.jsx(nt,{mode:"wait",children:f.jsx(H.div,{initial:{y:t>n.current?20:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:t>n.current?-20:20,opacity:0},transition:{y:{type:"spring",stiffness:100,damping:15,duration:.5},opacity:{duration:.2}},className:"absolute w-full text-center",children:a},r)}),f.jsx("div",{className:"invisible",children:a})]})};function l0(t){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l0(t)}function gr(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Xt(t){gr(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||l0(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var C$={};function P$(){return C$}function F2(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function kd(t,e){gr(2,arguments);var n=Xt(t),r=Xt(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function k$(t,e){gr(2,arguments);var n=Xt(t),r=Xt(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function N$(t,e){return gr(2,arguments),Xt(t).getTime()-Xt(e).getTime()}var U2={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},D$="trunc";function L$(t){return t?U2[t]:U2[D$]}function M$(t){gr(1,arguments);var e=Xt(t);return e.setHours(23,59,59,999),e}function j$(t){gr(1,arguments);var e=Xt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function V$(t){gr(1,arguments);var e=Xt(t);return M$(e).getTime()===j$(e).getTime()}function O$(t,e){gr(2,arguments);var n=Xt(t),r=Xt(e),i=kd(n,r),s=Math.abs(k$(n,r)),o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);var a=kd(n,r)===-i;V$(Xt(t))&&s===1&&kd(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function F$(t,e,n){gr(2,arguments);var r=N$(t,e)/1e3;return L$(void 0)(r)}var U$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},B$=function(e,n,r){var i,s=U$[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function gp(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var $$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},z$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H$={date:gp({formats:$$,defaultWidth:"full"}),time:gp({formats:z$,defaultWidth:"full"}),dateTime:gp({formats:W$,defaultWidth:"full"})},q$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},G$=function(e,n,r,i){return q$[e]};function El(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}var K$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Q$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Y$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},X$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},J$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ez=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},tz={ordinalNumber:ez,era:El({values:K$,defaultWidth:"wide"}),quarter:El({values:Q$,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:El({values:Y$,defaultWidth:"wide"}),day:El({values:X$,defaultWidth:"wide"}),dayPeriod:El({values:J$,defaultWidth:"wide",formattingValues:Z$,defaultFormattingWidth:"wide"})};function xl(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?rz(a,function(h){return h.test(o)}):nz(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var d=e.slice(o.length);return{value:c,rest:d}}}function nz(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function rz(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function iz(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var sz=/^(\d+)(th|st|nd|rd)?/i,oz=/\d+/i,az={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lz={any:[/^b/i,/^(a|c)/i]},cz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uz={any:[/1/i,/2/i,/3/i,/4/i]},dz={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yz={ordinalNumber:iz({matchPattern:sz,parsePattern:oz,valueCallback:function(e){return parseInt(e,10)}}),era:xl({matchPatterns:az,defaultMatchWidth:"wide",parsePatterns:lz,defaultParseWidth:"any"}),quarter:xl({matchPatterns:cz,defaultMatchWidth:"wide",parsePatterns:uz,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:xl({matchPatterns:dz,defaultMatchWidth:"wide",parsePatterns:hz,defaultParseWidth:"any"}),day:xl({matchPatterns:fz,defaultMatchWidth:"wide",parsePatterns:mz,defaultParseWidth:"any"}),dayPeriod:xl({matchPatterns:pz,defaultMatchWidth:"any",parsePatterns:gz,defaultParseWidth:"any"})},vz={code:"en-US",formatDistance:B$,formatLong:H$,formatRelative:G$,localize:tz,match:yz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rC(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function wz(t){return rC({},t)}var B2=1440,_z=2520,yp=43200,Ez=86400;function xz(t,e,n){var r,i;gr(2,arguments);var s=P$(),o=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:s.locale)!==null&&r!==void 0?r:vz;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=kd(t,e);if(isNaN(a))throw new RangeError("Invalid time value");var l=rC(wz(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:a}),c,d;a>0?(c=Xt(e),d=Xt(t)):(c=Xt(t),d=Xt(e));var h=F$(d,c),m=(F2(d)-F2(c))/1e3,y=Math.round((h-m)/60),_;if(y<2)return n!=null&&n.includeSeconds?h<5?o.formatDistance("lessThanXSeconds",5,l):h<10?o.formatDistance("lessThanXSeconds",10,l):h<20?o.formatDistance("lessThanXSeconds",20,l):h<40?o.formatDistance("halfAMinute",0,l):h<60?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",1,l):y===0?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",y,l);if(y<45)return o.formatDistance("xMinutes",y,l);if(y<90)return o.formatDistance("aboutXHours",1,l);if(y<B2){var x=Math.round(y/60);return o.formatDistance("aboutXHours",x,l)}else{if(y<_z)return o.formatDistance("xDays",1,l);if(y<yp){var R=Math.round(y/B2);return o.formatDistance("xDays",R,l)}else if(y<Ez)return _=Math.round(y/yp),o.formatDistance("aboutXMonths",_,l)}if(_=O$(d,c),_<12){var b=Math.round(y/yp);return o.formatDistance("xMonths",b,l)}else{var w=_%12,E=Math.floor(_/12);return w<3?o.formatDistance("aboutXYears",E,l):w<9?o.formatDistance("overXYears",E,l):o.formatDistance("almostXYears",E+1,l)}}function qs(t,e){return gr(1,arguments),xz(t,Date.now(),e)}function iC({size:t="md",photoURL:e,seed:n,className:r=""}){const i={xs:"w-5 h-5",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-14 h-14"},s=o=>`https://api.dicebear.com/6.x/avataaars/svg?seed=${o}`;return f.jsx(H.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`avatar ${r}`,children:f.jsx("div",{className:`rounded-full ${i[t]}`,children:f.jsx("img",{src:e||s(n),alt:"Avatar",className:"object-cover rounded-full"})})})}const sC=g.forwardRef(({notification:t,onClose:e},n)=>{var h,m;const r=lo(),{markAsRead:i,removeNotification:s}=bR(),o=async()=>{switch(t.read||await i(t.id),t.type){case"follow":r(`/user/${t.senderId}`);break;case"new_post":t.postId&&r(`/post/${t.postId}`);break}e==null||e()},a=async y=>{y.stopPropagation(),await s(t.id)},c=(()=>{switch(t.type){case"new_post":return{message:t.message||`New post from ${t.senderName}`,icon:"",avatar:{seed:t.senderEmail,photoURL:t.senderPhotoURL}};case"follow":return{message:t.message||`${t.senderName} started following you`,icon:"",avatar:{seed:t.senderEmail,photoURL:t.senderPhotoURL}};case"mention":return{message:t.message||`${t.senderName} mentioned you`,icon:"@",avatar:{seed:t.senderEmail,photoURL:t.senderPhotoURL}};default:return{message:t.message||"New notification",icon:"",avatar:null}}})(),d=t.createdAt?qs(t.createdAt instanceof Date?t.createdAt:((m=(h=t.createdAt).toDate)==null?void 0:m.call(h))||new Date(t.createdAt),{addSuffix:!0}):"";return f.jsxs(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:`flex items-start gap-3 p-3 cursor-pointer hover:bg-base-200 ${t.read?"":"bg-base-200"}`,onClick:o,children:[c.avatar&&f.jsx(iC,{size:"sm",photoURL:c.avatar.photoURL,seed:c.avatar.seed}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm text-base-content/90 mb-1",children:c.message}),f.jsx("span",{className:"text-xs text-base-content/60",children:d})]}),f.jsx("button",{onClick:a,className:"btn btn-ghost btn-xs p-1 h-auto min-h-0 hover:bg-base-300",title:"Remove notification",children:f.jsx(Bf,{className:"w-4 h-4"})})]})});sC.displayName="NotificationItem";function Tz(){const[t,e]=g.useState(!1),{notifications:n,unreadCount:r,loading:i,markAllRead:s}=bR(),o=()=>{e(!t)},a=()=>{e(!1)};return f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:o,className:"btn btn-ghost btn-circle relative",children:[f.jsx(pv,{className:"w-6 h-6"}),r>0&&f.jsx("div",{className:"absolute -top-1 -right-1",children:f.jsx("div",{className:"bg-primary text-primary-content text-xs rounded-full w-5 h-5 flex items-center justify-center",children:r})})]}),f.jsx(nt,{children:t&&f.jsxs(f.Fragment,{children:[f.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/20 z-40",onClick:a}),f.jsxs(H.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"absolute right-0 mt-2 w-80 max-h-[32rem] overflow-hidden rounded-box bg-base-100 shadow-lg z-50",children:[f.jsx("div",{className:"p-4 border-b border-base-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"}),n.length>0&&f.jsxs("button",{onClick:s,className:"btn btn-ghost btn-sm gap-2",children:[f.jsx(Z9,{className:"w-4 h-4"}),"Mark all read"]})]})}),f.jsx("div",{className:"overflow-y-auto max-h-[calc(32rem-4rem)]",children:i?f.jsx("div",{className:"p-4 text-center",children:f.jsx("span",{className:"loading loading-spinner loading-md"})}):n.length>0?f.jsx(nt,{mode:"popLayout",children:n.map(l=>f.jsx(sC,{notification:l,onClose:a},l.id))}):f.jsx("div",{className:"p-8 text-center text-base-content/60",children:f.jsx("p",{children:"No notifications yet"})})})]})]})})]})}const bz=[{icon:CF,label:"Home",path:"/"},{icon:AR,label:"Explore",path:"/explore"},{icon:pv,label:"Notifications",path:"/notifications"},{icon:Uf,label:"Profile",path:"/profile"}],nd={light:{icon:QF,color:"text-yellow-500"},dark:{icon:Xu,color:"text-slate-800"},cupcake:{icon:W9,color:"text-pink-300"},bumblebee:{icon:U9,color:"text-yellow-400"},emerald:{icon:gv,color:"text-emerald-500"},corporate:{icon:CE,color:"text-blue-800"},synthwave:{icon:PR,color:"text-purple-500"},retro:{icon:cF,color:"text-amber-500"},cyberpunk:{icon:qg,color:"text-yellow-400"},valentine:{icon:CR,color:"text-pink-500"},halloween:{icon:Ql,color:"text-orange-500"},garden:{icon:Yu,color:"text-green-500"},forest:{icon:PE,color:"text-green-700"},aqua:{icon:Ah,color:"text-cyan-500"},lofi:{icon:kR,color:"text-gray-600"},pastel:{icon:XF,color:"text-pink-200"},fantasy:{icon:kE,color:"text-purple-400"},wireframe:{icon:Wg,color:"text-gray-700"},black:{icon:Xu,color:"text-gray-900"},luxury:{icon:kE,color:"text-yellow-600"},dracula:{icon:Ql,color:"text-purple-600"},cmyk:{icon:dF,color:"text-blue-400"},autumn:{icon:PE,color:"text-orange-500"},business:{icon:CE,color:"text-gray-700"},acid:{icon:Ah,color:"text-green-400"},lemonade:{icon:Yu,color:"text-yellow-200"},night:{icon:Xu,color:"text-indigo-500"},coffee:{icon:Ql,color:"text-amber-700"},winter:{icon:Yu,color:"text-blue-200"},dim:{icon:Xu,color:"text-gray-400"},nord:{icon:Yu,color:"text-blue-300"}};function rd({children:t}){const e=Oa(),n=lo(),{currentUser:r,logout:i}=At(),[s,o]=g.useState(localStorage.getItem("theme")||"light"),[a,l]=g.useState(!1);g.useState(3);const[c,d]=g.useState({posts:{total:0,monthly:0,percentage:0,trend:"neutral"},users:{total:0,monthly:0,percentage:0,trend:"neutral"},active:{total:0,percentage:0,trend:"neutral"}}),[h,m]=g.useState(!0);g.useEffect(()=>{const b=w=>{var E;w.key==="/"&&w.target.tagName!=="INPUT"&&(w.preventDefault(),(E=document.getElementById("search-input"))==null||E.focus())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[]),g.useEffect(()=>{document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s)},[s]),g.useEffect(()=>{console.log("Setting up stats subscription...");const b=A$(w=>{var E,P,j,k,S,T,I,C,D,L,N;if(console.log("Received real-time stats update:",w),w){const X={posts:{total:Number((E=w.posts)==null?void 0:E.total)||0,monthly:Number((P=w.posts)==null?void 0:P.monthly)||0,percentage:Number((j=w.posts)==null?void 0:j.percentage)||0,trend:((k=w.posts)==null?void 0:k.trend)||"neutral"},users:{total:Number((S=w.users)==null?void 0:S.total)||0,monthly:Number((T=w.users)==null?void 0:T.monthly)||0,percentage:Number((I=w.users)==null?void 0:I.percentage)||0,trend:((C=w.users)==null?void 0:C.trend)||"neutral"},active:{total:Number((D=w.active)==null?void 0:D.total)||0,percentage:Number((L=w.active)==null?void 0:L.percentage)||0,trend:((N=w.active)==null?void 0:N.trend)||"neutral"}};console.log("Validated stats:",X),d(X),m(!1)}});return()=>{console.log("Cleaning up stats subscription..."),b()}},[]);const y={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},_=()=>{var j;const[b,w]=g.useState(!1),E={hidden:{opacity:0,scale:.95,transition:{scale:{duration:.2},opacity:{duration:.2}}},show:{opacity:1,scale:1,transition:{scale:{duration:.2},opacity:{duration:.2},staggerChildren:.02}},exit:{opacity:0,scale:.95,transition:{scale:{duration:.2},opacity:{duration:.2}}}},P={hidden:{opacity:0,y:10},show:{opacity:1,y:0},exit:{opacity:0,y:10}};return f.jsxs("div",{className:"dropdown dropdown-end",children:[f.jsx(H.div,{whileHover:{scale:1.1},whileTap:{scale:.9},tabIndex:0,role:"button",className:"btn btn-ghost btn-circle",onClick:()=>w(!b),children:((j=nd[s])==null?void 0:j.icon)&&f.jsx("div",{className:nd[s].color,children:ca.createElement(nd[s].icon,{className:"w-5 h-5"})})}),f.jsx(nt,{children:b&&f.jsx(H.div,{tabIndex:0,initial:"hidden",animate:"show",exit:"exit",variants:E,className:"dropdown-content z-[1] shadow-lg bg-base-200 rounded-box fixed mt-2",style:{width:"250px",right:"0"},children:f.jsx("div",{className:"h-96 overflow-y-auto overflow-x-hidden",children:f.jsx(H.ul,{className:"menu menu-sm p-2",children:Object.entries(nd).map(([k,{icon:S,color:T}])=>f.jsx(H.li,{variants:P,className:"w-full",children:f.jsxs(H.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{o(k),w(!1)},className:`flex items-center gap-2 capitalize w-full ${s===k?"active bg-base-300":""}`,children:[f.jsx("div",{className:T,children:ca.createElement(S,{className:"w-4 h-4"})}),f.jsx("span",{className:"flex-1 text-left",children:k})]})},k))})})})})]})},x=()=>f.jsx("div",{className:"relative w-full max-w-md",children:f.jsxs(H.div,{className:`relative flex items-center ${a?"w-full":"w-48"}`,animate:{width:a?"100%":"12rem"},transition:{duration:.2},children:[f.jsx("input",{id:"search-input",type:"text",placeholder:"Search Unreddit... /",className:"input input-bordered w-full pr-10",onFocus:()=>l(!0),onBlur:()=>l(!1)}),f.jsx(LF,{className:"w-5 h-5 absolute right-3 text-base-content/50"})]})}),R=()=>{const b=async()=>{try{(await i()).success&&n("/login")}catch(w){console.error("Failed to sign out:",w)}};return f.jsxs("div",{className:"dropdown dropdown-end",children:[f.jsx(H.div,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"btn btn-ghost btn-circle avatar",children:f.jsx("div",{className:"w-10 rounded-full",children:f.jsx("img",{src:(r==null?void 0:r.photoURL)||`https://api.dicebear.com/6.x/avataaars/svg?seed=${r==null?void 0:r.email}`,alt:"User avatar"})})}),f.jsxs("div",{className:"dropdown-content z-[1] menu shadow-lg bg-base-200 rounded-box w-52",children:[f.jsxs("div",{className:"px-4 py-3 text-sm border-b border-base-300",children:[f.jsx("div",{className:"font-semibold",children:(r==null?void 0:r.displayName)||"Anonymous User"}),f.jsx("div",{className:"text-base-content/60",children:r==null?void 0:r.email})]}),f.jsxs("ul",{className:"menu menu-sm",children:[f.jsx("li",{children:f.jsxs(kt,{to:"/profile",className:"flex items-center gap-3 py-3",children:[f.jsx(Uf,{className:"w-4 h-4"}),"Profile"]})}),f.jsx("li",{children:f.jsxs(kt,{to:"/settings",className:"flex items-center gap-3 py-3",children:[f.jsx(aF,{className:"w-4 h-4"}),"Settings"]})}),f.jsx("li",{children:f.jsxs(kt,{to:"/saved",className:"flex items-center gap-3 py-3",children:[f.jsx(Ff,{className:"w-4 h-4"}),"Saved Posts"]})}),f.jsx("li",{children:f.jsxs("button",{onClick:b,className:"flex items-center gap-3 py-3 text-error",children:[f.jsx(L9,{className:"w-4 h-4"}),"Sign Out"]})})]})]})]})};return f.jsxs("div",{className:"drawer lg:drawer-open",children:[f.jsx("input",{id:"my-drawer",type:"checkbox",className:"drawer-toggle"}),f.jsxs("div",{className:"drawer-content flex flex-col",children:[f.jsxs("div",{className:"navbar bg-base-100/80 backdrop-blur-md sticky top-0 z-50 border-b border-base-300",children:[f.jsx("div",{className:"flex-none lg:hidden",children:f.jsx("label",{htmlFor:"my-drawer",className:"btn btn-square btn-ghost",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})}),f.jsx("div",{className:"flex-1 lg:hidden",children:f.jsx(kt,{to:"/",className:"px-2",children:f.jsx(O2,{})})}),f.jsx("div",{className:"flex-1 px-2 hidden lg:flex justify-center",children:f.jsx(x,{})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(x,{}),r&&f.jsx(Tz,{}),f.jsx(_,{}),f.jsx(R,{})]})]}),f.jsx("div",{className:"p-4 lg:hidden",children:f.jsx(x,{})}),f.jsx("main",{className:"flex-1 min-h-screen p-4",children:f.jsx(nt,{mode:"wait",children:f.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:t},e.pathname)})})]}),f.jsxs("div",{className:"drawer-side z-40",children:[f.jsx("label",{htmlFor:"my-drawer",className:"drawer-overlay"}),f.jsxs("div",{className:"menu p-4 w-80 min-h-full bg-base-200",children:[f.jsx("div",{className:"flex justify-between items-center mb-8",children:f.jsx(kt,{to:"/",className:"px-2",children:f.jsx(O2,{})})}),f.jsx("ul",{className:"space-y-2",children:bz.map((b,w)=>f.jsx(H.li,{variants:y,initial:"hidden",animate:"visible",transition:{delay:w*.1},children:f.jsxs(kt,{to:b.path,className:`flex items-center space-x-4 p-3 rounded-lg hover:bg-base-300 transition-colors ${e.pathname===b.path?"bg-primary text-primary-content":""}`,children:[f.jsx(b.icon,{className:"w-6 h-6"}),f.jsx("span",{children:b.label})]})},b.path))}),f.jsx(H.div,{className:"mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:f.jsxs("div",{className:"stats stats-vertical shadow bg-base-200 w-full",children:[f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-figure text-primary",children:f.jsx(fF,{className:"w-8 h-8"})}),f.jsx("div",{className:"stat-title",children:"Total Posts"}),f.jsx("div",{className:"stat-value",children:f.jsx(pp,{value:c.posts.total})}),f.jsxs("div",{className:"stat-desc flex items-center gap-1",children:[f.jsxs("span",{children:[c.posts.percentage,"% this month"]}),c.posts.trend==="up"&&f.jsx(tp,{className:"w-4 h-4 text-success"}),c.posts.trend==="down"&&f.jsx(Zm,{className:"w-4 h-4 text-error"}),c.posts.trend==="neutral"&&f.jsx(ep,{className:"w-4 h-4"})]})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-figure text-secondary",children:f.jsx(MR,{className:"w-8 h-8"})}),f.jsx("div",{className:"stat-title",children:"Total Users"}),f.jsx("div",{className:"stat-value",children:f.jsx(pp,{value:c.users.total})}),f.jsxs("div",{className:"stat-desc flex items-center gap-1",children:[f.jsxs("span",{children:[c.users.percentage,"% active this month"]}),c.users.trend==="up"&&f.jsx(tp,{className:"w-4 h-4 text-success"}),c.users.trend==="down"&&f.jsx(Zm,{className:"w-4 h-4 text-error"}),c.users.trend==="neutral"&&f.jsx(ep,{className:"w-4 h-4"})]})]}),f.jsxs("div",{className:"stat",children:[f.jsx("div",{className:"stat-figure text-accent",children:f.jsx(yv,{className:"w-8 h-8"})}),f.jsx("div",{className:"stat-title",children:"Currently Active"}),f.jsx("div",{className:"stat-value",children:f.jsx(pp,{value:c.active.total})}),f.jsxs("div",{className:"stat-desc flex items-center gap-1",children:[f.jsxs("span",{children:[c.active.percentage,"% of users"]}),c.active.trend==="up"&&f.jsx(tp,{className:"w-4 h-4 text-success"}),c.active.trend==="down"&&f.jsx(Zm,{className:"w-4 h-4 text-error"}),c.active.trend==="neutral"&&f.jsx(ep,{className:"w-4 h-4"})]})]})]})})]})]})]})}function oC(){const t=R$(),[e,n]=g.useState(!1),r=a0(0),i=a0(0),s=j2(i,[-100,100],[30,-30]),o=j2(r,[-100,100],[-30,30]);g.useEffect(()=>{t.start({scale:[1,1.02,1],transition:{duration:2,repeat:1/0}})},[]);const a=l=>{const c=l.currentTarget.getBoundingClientRect(),d=c.left+c.width/2,h=c.top+c.height/2;r.set(l.clientX-d),i.set(l.clientY-h)};return f.jsx(H.div,{className:"flex items-center justify-center w-full h-full select-none",onMouseMove:a,style:{perspective:1e3},children:f.jsxs(H.div,{className:"relative w-32 h-32",animate:t,whileHover:"hover",style:{rotateX:s,rotateY:o},onHoverStart:()=>n(!0),onHoverEnd:()=>n(!1),children:[f.jsx(H.div,{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-primary via-secondary to-primary blur-xl opacity-50",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:8,repeat:1/0,ease:"linear"}}),f.jsxs(H.div,{className:"absolute inset-0 rounded-2xl bg-base-100 backdrop-blur-sm border border-primary/30",style:{transformStyle:"preserve-3d",boxShadow:"0 0 20px rgba(var(--p), 0.3)"},children:[[...Array(3)].map((l,c)=>f.jsx(H.div,{className:"absolute inset-0 rounded-2xl border-2 border-primary/30",animate:{rotate:[0,360],scale:[1-c*.1,1.1-c*.1,1-c*.1]},transition:{duration:8-c*2,repeat:1/0,ease:"linear"}},c)),f.jsx(H.div,{className:"absolute inset-0 flex items-center justify-center",style:{transform:"translateZ(20px)"},children:f.jsx(H.span,{className:"text-5xl font-black bg-gradient-to-br from-primary to-secondary bg-clip-text text-transparent",animate:{textShadow:e?"0 0 20px rgba(var(--p), 0.5)":"0 0 10px rgba(var(--p), 0.3)"},children:"U"})}),[...Array(8)].map((l,c)=>f.jsx(H.div,{className:"absolute w-1 h-1 rounded-full bg-primary",style:{left:`${50+35*Math.cos(c*Math.PI/4)}%`,top:`${50+35*Math.sin(c*Math.PI/4)}%`},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:c*.25,ease:"easeInOut"}},c))]})]})})}const aC=({isVisible:t=!0})=>{const e={hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.2}},exit:{opacity:0,transition:{when:"afterChildren",staggerChildren:.1,staggerDirection:-1}}},n={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{repeat:1/0,repeatType:"reverse",duration:.8,ease:"easeInOut"}},exit:{y:-20,opacity:0}},r={initial:{scale:1,opacity:.5},animate:{scale:[1,1.2,1],opacity:[.5,1,.5],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}};return f.jsx(nt,{children:t&&f.jsxs(H.div,{className:"fixed inset-0 flex items-center justify-center z-50",initial:"hidden",animate:"visible",exit:"exit",variants:e,children:[f.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm"}),f.jsxs(H.div,{className:"relative flex flex-col items-center space-y-4",initial:"hidden",animate:"visible",exit:"exit",children:[f.jsx(H.div,{className:"absolute inset-0 bg-blue-100 rounded-full -z-10",initial:"initial",animate:"animate",variants:r,style:{width:"120px",height:"120px"}}),f.jsx("div",{className:"flex items-center space-x-3",children:[...Array(3)].map((i,s)=>f.jsx(H.div,{className:"w-4 h-4 bg-blue-600 rounded-full",variants:n,style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"}},s))}),f.jsx(H.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-blue-600 font-medium",children:"Loading..."})]})]})})};function Iz(){const[t,e]=g.useState(""),[n,r]=g.useState(""),[i,s]=g.useState(""),[o,a]=g.useState(!1),{login:l,loginWithGoogle:c}=At(),d=lo(),h=async y=>{var _;if(y.preventDefault(),!t||!n){s("Please fill in all fields");return}try{s(""),a(!0);const x=await l(t,n);if(x.success)d("/");else{const R=(_=x.error)!=null&&_.includes("auth/invalid-credential")?"Invalid email or password. Please try again.":x.error||"Failed to log in";s(R)}}catch{s("An error occurred while logging in. Please try again.")}finally{a(!1)}},m=async()=>{var y;try{s(""),a(!0);const _=await c();if(_.success)d("/");else{const x=(y=_.error)!=null&&y.includes("popup-closed-by-user")?"Google sign-in was cancelled":_.error||"Failed to sign in with Google";s(x)}}catch{s("An error occurred while signing in with Google. Please try again.")}finally{a(!1)}};return f.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row",children:[f.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1},className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary to-secondary relative overflow-hidden",children:f.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1},className:"absolute inset-0 w-full h-full",children:[f.jsx(H.div,{animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/10 rounded-full backdrop-blur-sm"}),f.jsx(H.div,{animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute top-1/2 right-1/4 w-48 h-48 bg-white/20 rounded-full backdrop-blur-sm"}),f.jsx(H.div,{animate:{y:[0,-30,0],x:[0,20,0]},transition:{duration:10,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-1/4 left-1/3 w-24 h-24 bg-white/15 rounded-full backdrop-blur-sm"}),f.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-white p-8",children:[f.jsx(H.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2},className:"text-4xl font-bold mb-4",children:"Welcome Back!"}),f.jsxs(H.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.4},className:"text-center max-w-md",children:[f.jsx("p",{className:"text-lg mb-6",children:"Discover the best of Reddit without distractions"}),f.jsx("div",{className:"space-y-4",children:["Clean and focused reading experience","Save your favorite content","Customizable themes","Efficient content management"].map((y,_)=>f.jsxs(H.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.6+_*.1},className:"flex items-center space-x-2",children:[f.jsx("span",{className:"w-2 h-2 bg-white rounded-full"}),f.jsx("span",{children:y})]},_))})]})]})]})}),f.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex-1 flex items-center justify-center p-8 bg-base-100",children:[f.jsx(aC,{isVisible:o}),f.jsxs("div",{className:"w-full max-w-md space-y-8",children:[f.jsx(H.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"flex flex-col items-center mb-12",children:f.jsxs(H.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"relative w-48 h-48 mb-8",children:[f.jsx(oC,{className:"w-full h-full text-primary"}),f.jsx(H.div,{animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-primary/10 rounded-full -z-10"})]})}),f.jsxs("div",{className:"card bg-base-100 shadow-xl p-8 space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h2",{className:"text-2xl font-bold text-base-content hidden md:block",children:"Sign in to your account"}),f.jsx("p",{className:"text-base-content/70",children:"Enter your details to continue"})]}),f.jsxs("form",{onSubmit:h,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"form-control w-full",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Email"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(SR,{className:"h-5 w-5 text-base-content/50"})}),f.jsx("input",{type:"email",value:t,onChange:y=>e(y.target.value),className:"input input-bordered w-full pl-10",placeholder:"you@example.com"})]})]}),f.jsxs("div",{className:"form-control w-full",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Password"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Hg,{className:"h-5 w-5 text-base-content/50"})}),f.jsx("input",{type:"password",value:n,onChange:y=>r(y.target.value),className:"input input-bordered w-full pl-10",placeholder:""})]})]})]}),f.jsx(nt,{mode:"wait",children:i&&f.jsx(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"alert alert-error",children:i})}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:o,className:"btn btn-primary w-full",children:"Sign in"})}),f.jsx("div",{className:"divider",children:"Or continue with"}),f.jsxs("button",{type:"button",onClick:m,className:"btn btn-outline w-full gap-2",children:[f.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),f.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),f.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),f.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]})]}),f.jsxs("p",{className:"text-center text-sm text-base-content/70",children:["Don't have an account?"," ",f.jsx(kt,{to:"/signup",className:"link link-primary font-medium",children:"Sign up for free"})]})]})]})]})}function Sz(){const[t,e]=g.useState(""),[n,r]=g.useState(""),[i,s]=g.useState(""),[o,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(!1),m=lo(),{signup:y,signInWithGoogle:_}=At(),x=async b=>{if(b.preventDefault(),n!==i)return c("Passwords do not match");try{c(""),h(!0),await y(t,n,o),m("/")}catch(w){c("Failed to create an account: "+w.message)}finally{h(!1)}},R=async()=>{try{c(""),h(!0),await _(),m("/")}catch(b){c("Failed to sign in with Google: "+b.message)}finally{h(!1)}};return f.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row",children:[f.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1},className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-secondary to-primary relative overflow-hidden",children:f.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1},className:"absolute inset-0 w-full h-full",children:[f.jsx(H.div,{animate:{y:[0,-40,0],rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute top-1/4 left-1/4 w-40 h-40 bg-white/10 rounded-lg backdrop-blur-sm transform rotate-45"}),f.jsx(H.div,{animate:{scale:[1,1.2,1],rotate:[45,225,45]},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute top-1/2 right-1/4 w-32 h-32 bg-white/20 rounded-lg backdrop-blur-sm transform rotate-12"}),f.jsx(H.div,{animate:{x:[0,30,0],y:[0,-20,0],rotate:[0,180,360]},transition:{duration:18,repeat:1/0,ease:"linear"},className:"absolute bottom-1/4 left-1/3 w-36 h-36 bg-white/15 rounded-lg backdrop-blur-sm transform -rotate-12"}),f.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-white p-8",children:[f.jsx(H.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"w-24 h-24 mb-8 bg-white/20 rounded-full backdrop-blur-md flex items-center justify-center",children:f.jsx(H.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-white rounded-full"})}),f.jsx(H.h1,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.3},className:"text-4xl font-bold mb-6 text-center",children:"Join Unreaddit Today"}),f.jsx(H.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.5},className:"text-center max-w-md space-y-6",children:[{title:"Discover",desc:"Find the best Reddit content"},{title:"Organize",desc:"Keep your favorite posts in one place"},{title:"Customize",desc:"Make it yours with themes"}].map((b,w)=>f.jsxs(H.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.7+w*.2},className:"text-center",children:[f.jsx("h3",{className:"text-xl font-semibold mb-1",children:b.title}),f.jsx("p",{className:"text-white/80",children:b.desc})]},w))})]})]})}),f.jsxs(H.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex-1 flex items-center justify-center p-8 bg-base-100",children:[f.jsx(aC,{isVisible:d}),f.jsxs("div",{className:"w-full max-w-md space-y-8",children:[f.jsx(H.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"flex flex-col items-center mb-12",children:f.jsxs(H.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"relative w-48 h-48 mb-8",children:[f.jsx(oC,{className:"w-full h-full text-primary"}),f.jsx(H.div,{animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-primary/10 rounded-full -z-10"})]})}),f.jsxs("div",{className:"card bg-base-100 shadow-xl p-8 space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h2",{className:"text-2xl font-bold text-base-content hidden md:block",children:"Create your account"}),f.jsx("p",{className:"text-base-content/70",children:"Join Unreaddit in just a few steps"})]}),f.jsxs("form",{onSubmit:x,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"form-control w-full",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Username"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Uf,{className:"h-5 w-5 text-base-content/50"})}),f.jsx("input",{type:"text",value:o,onChange:b=>a(b.target.value),className:"input input-bordered w-full pl-10",placeholder:"johndoe"})]})]}),f.jsxs("div",{className:"form-control w-full",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Email"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(SR,{className:"h-5 w-5 text-base-content/50"})}),f.jsx("input",{type:"email",value:t,onChange:b=>e(b.target.value),className:"input input-bordered w-full pl-10",placeholder:"you@example.com"})]})]}),f.jsxs("div",{className:"form-control w-full",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Password"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Hg,{className:"h-5 w-5 text-base-content/50"})}),f.jsx("input",{type:"password",value:n,onChange:b=>r(b.target.value),className:"input input-bordered w-full pl-10",placeholder:""})]})]}),f.jsxs("div",{className:"form-control w-full",children:[f.jsx("label",{className:"label",children:f.jsx("span",{className:"label-text",children:"Confirm Password"})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Hg,{className:"h-5 w-5 text-base-content/50"})}),f.jsx("input",{type:"password",value:i,onChange:b=>s(b.target.value),className:"input input-bordered w-full pl-10",placeholder:""})]})]})]}),f.jsx(nt,{mode:"wait",children:l&&f.jsx(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"alert alert-error",children:l})}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary w-full",children:"Create account"})}),f.jsx("div",{className:"divider",children:"Or continue with"}),f.jsxs("button",{type:"button",onClick:R,className:"btn btn-outline w-full gap-2",children:[f.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),f.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),f.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),f.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})]})]}),f.jsxs("p",{className:"text-center text-sm text-base-content/70",children:["Already have an account?"," ",f.jsx(kt,{to:"/login",className:"link link-primary font-medium",children:"Sign in"})]})]})]})]})}function Rz({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{fillRule:"evenodd",d:"M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z",clipRule:"evenodd"}))}const Az=g.forwardRef(Rz);function Cz({title:t,titleId:e,...n},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?g.createElement("title",{id:e},t):null,g.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const Pz=g.forwardRef(Cz),kz=async t=>{var e,n,r,i;if(!t)return console.log("getUserProfile: No userId provided"),{success:!1,error:"User ID is required"};try{console.log("getUserProfile: Fetching profile for userId:",t);const s=ve(Z,"users",t),o=await Rt(s);if(!o.exists()){console.log("getUserProfile: User document does not exist, attempting to create");const l={uid:t,displayName:"Anonymous",createdAt:yt(),lastLogin:yt(),followersCount:0,followingCount:0,postsCount:0,bio:""};try{await Pa(s,l),console.log("getUserProfile: Created new user profile");const c=await Rt(s);if(c.exists()){const d=c.data();return console.log("getUserProfile: Successfully retrieved new profile:",d),{success:!0,data:{...d,id:c.id,createdAt:((e=d.createdAt)==null?void 0:e.toDate())||null,lastLogin:((n=d.lastLogin)==null?void 0:n.toDate())||null}}}}catch(c){console.error("getUserProfile: Error creating user profile:",c)}return{success:!1,error:"User not found and could not create profile"}}const a=o.data();return console.log("getUserProfile: Successfully retrieved existing profile:",a),{success:!0,data:{...a,id:o.id,createdAt:((r=a.createdAt)==null?void 0:r.toDate())||null,lastLogin:((i=a.lastLogin)==null?void 0:i.toDate())||null}}}catch(s){return console.error("getUserProfile: Error fetching user profile:",s),{success:!1,error:s.message}}},Bv=async t=>{if(!t)return console.log("getUserPhoto: No userId provided"),null;if(typeof t!="string")return console.error("getUserPhoto: Invalid userId type:",typeof t),null;try{console.log("getUserPhoto: Starting fetch for userId:",t);const e=ve(Z,"users",t),n=await Rt(e);if(!n.exists())return console.log("getUserPhoto: User document does not exist for userId:",t),null;const r=n.data();return console.log("getUserPhoto: User data found:",{userId:t,hasPhotoURL:!!r.photoURL,photoURL:r.photoURL}),r.photoURL?r.photoURL:(console.log("getUserPhoto: No photoURL found for user:",t),null)}catch(e){return console.error("getUserPhoto: Error fetching user photo:",e),null}};function lC({targetUserId:t,className:e="",onFollowStateChange:n}){const{currentUser:r,isFollowing:i}=At(),[s,o]=g.useState(!1),a=async()=>{if(!(!r||!t||s)){o(!0);try{i(t)?await wR(r.uid,t):await vR(r.uid,t),n&&n()}catch(l){console.error("Error following/unfollowing user:",l)}finally{o(!1)}}};return!r||r.uid===t?null:f.jsx(H.button,{whileTap:{scale:.95},onClick:a,disabled:s,className:`btn btn-xs min-w-[80px] ${i(t)?"btn-outline btn-primary hover:btn-error":"btn-primary"} ${s?"loading":""} ${e}`,children:s?"":i(t)?"Following":"Follow"})}function Nz({userId:t,username:e,trigger:n}){const[r,i]=g.useState(!1),[s,o]=g.useState(null),[a,l]=g.useState(!1),[c,d]=g.useState(null),{currentUser:h}=At(),[m,y]=g.useState(null),[_,x]=g.useState(null);g.useEffect(()=>()=>{m&&clearTimeout(m)},[m]),g.useEffect(()=>{o(null),l(!1),d(null),x(null)},[t]),g.useEffect(()=>{r&&!c&&(async()=>{if(t)try{console.log("UserHoverCard: Fetching photo for userId:",t);const E=await Bv(t);console.log("UserHoverCard: Received photoURL:",E),d(E)}catch(E){console.error("UserHoverCard: Error fetching user photo:",E)}})()},[t,r,c]),g.useEffect(()=>{if(!t||!r)return;const w=ve(Z,"users",t),E=An(w,P=>{if(P.exists()){const j=P.data();o(k=>({...k,...j,followersCount:j.followersCount||0,followingCount:j.followingCount||0}))}},P=>{console.error("Error in user profile subscription:",P),x("Failed to load user profile")});return()=>E()},[t,r]);const R=async()=>{if(console.log("UserHoverCard: Mouse enter for userId:",t),m&&(clearTimeout(m),y(null)),!t){console.log("UserHoverCard: No userId provided, not showing card"),x("User profile not available");return}if(i(!0),x(null),!s){l(!0);try{console.log("UserHoverCard: Fetching user profile");const w=await kz(t);console.log("UserHoverCard: Profile fetch result:",w),w.success?o(w.data):(x(w.error||"Failed to load user profile"),console.error("UserHoverCard: Failed to fetch profile:",w.error))}catch(w){x("Failed to load user profile"),console.error("UserHoverCard: Error fetching profile:",w)}finally{l(!1)}}},b=()=>{const w=setTimeout(()=>{i(!1)},300);y(w)};return f.jsxs("div",{className:"relative inline-block",onMouseEnter:R,onMouseLeave:b,children:[n,f.jsx(nt,{children:r&&f.jsx(H.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},className:"absolute z-50 w-72 bg-base-100 shadow-xl rounded-xl p-4 mt-2",children:a?f.jsx("div",{className:"flex items-center justify-center h-32",children:f.jsx("span",{className:"loading loading-spinner loading-md"})}):_?f.jsx("div",{className:"text-error text-center p-4",children:_}):s?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"avatar",children:f.jsx("div",{className:"w-16 h-16 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:f.jsx("img",{src:c||"/default-avatar.png",alt:s.displayName||"User avatar",className:"w-full h-full object-cover"})})}),f.jsxs("div",{className:"flex-1",children:[f.jsx(kt,{to:`/profile/${t}`,className:"text-lg font-semibold hover:text-primary transition-colors",children:s.displayName||"Anonymous User"}),f.jsx("p",{className:"text-sm text-base-content/70",children:s.email}),h&&h.uid!==t&&f.jsx("div",{className:"mt-2",children:f.jsx(lC,{targetUserId:t})})]})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[f.jsx(kt,{to:`/profile/${t}`,className:"stats shadow stats-vertical cursor-pointer hover:bg-base-200 transition-colors",children:f.jsxs("div",{className:"stat p-2",children:[f.jsx("div",{className:"stat-title text-xs",children:"Posts"}),f.jsx("div",{className:"stat-value text-lg",children:s.postsCount||0})]})}),f.jsx(kt,{to:`/profile/${t}?tab=followers`,className:"stats shadow stats-vertical cursor-pointer hover:bg-base-200 transition-colors",children:f.jsxs("div",{className:"stat p-2",children:[f.jsx("div",{className:"stat-title text-xs",children:"Followers"}),f.jsx("div",{className:"stat-value text-lg",children:s.followersCount||0})]})}),f.jsx(kt,{to:`/profile/${t}?tab=following`,className:"stats shadow stats-vertical cursor-pointer hover:bg-base-200 transition-colors",children:f.jsxs("div",{className:"stat p-2",children:[f.jsx("div",{className:"stat-title text-xs",children:"Following"}),f.jsx("div",{className:"stat-value text-lg",children:s.followingCount||0})]})})]})]}):null})})]})}const cC=(t,e,n)=>{try{const r=Ue(Z,"posts",t,"comments"),i=tt(r,or("createdAt","desc"));return An(i,o=>{const a=o.docs.map(c=>({id:c.id,...c.data()})),l=ve(Z,"posts",t);mr(l,{commentCount:a.length}),e(a)},o=>{console.error("Error in comments subscription:",o),n&&n(o)})}catch(r){return console.error("Error setting up comments subscription:",r),n&&n(r),()=>{}}},Dz=async(t,e)=>{try{const n=Ue(Z,"posts",t,"comments"),r={...e,createdAt:yt()};return{success:!0,data:{id:(await ka(n,r)).id,...r}}}catch(n){return console.error("Error adding comment:",n),{error:n.message}}},Lz=async(t,e)=>{try{const n=ve(Z,"posts",t,"comments",e);return await Df(n),{success:!0}}catch(n){return console.error("Error deleting comment:",n),{error:n.message}}};function Mz({postId:t,onClose:e}){const{currentUser:n}=At(),[r,i]=g.useState([]),[s,o]=g.useState(""),[a,l]=g.useState(!1),[c,d]=g.useState(null),[h,m]=g.useState(!0),[y,_]=g.useState({});g.useEffect(()=>{const w=cC(t,E=>{i(E),m(!1)},E=>{console.error("Error in comments subscription:",E),d("Failed to load comments"),m(!1)});return()=>w()},[t]),g.useEffect(()=>{const w=async()=>{console.log("CommentSection: Fetching photos for comments:",r);const E=r.map(async k=>{console.log("CommentSection: Fetching photo for comment userId:",k.userId);const S=await Bv(k.userId);return console.log("CommentSection: Received photoURL for comment:",S),[k.userId,S]}),P=await Promise.all(E),j=Object.fromEntries(P.filter(([k,S])=>S!==null));console.log("CommentSection: Final photo map:",j),_(j)};r.length>0&&w()},[r]);const x=w=>w?w.toDate?qs(w.toDate(),{addSuffix:!0}):w instanceof Date?qs(w,{addSuffix:!0}):qs(new Date(w),{addSuffix:!0}):"Just now",R=async w=>{if(w.preventDefault(),!(!s.trim()||a)){l(!0),d(null);try{const E=await Dz(t,{content:s.trim(),userId:n.uid,authorName:n.displayName||"Anonymous",authorEmail:n.email});E.success?o(""):d(E.error)}catch(E){console.error("Error adding comment:",E),d("Failed to add comment")}finally{l(!1)}}},b=async w=>{try{const E=await Lz(t,w);E.success||console.error("Failed to delete comment:",E.error)}catch(E){console.error("Error deleting comment:",E)}};return f.jsx(H.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-base-300 bg-base-200/50",children:f.jsxs("div",{className:"px-3 py-2",children:[n&&f.jsx("form",{onSubmit:R,className:"mb-3",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("div",{className:"avatar",children:f.jsx("div",{className:"w-6 h-6 rounded-full",children:f.jsx("img",{src:(n==null?void 0:n.photoURL)||"/default-avatar.png",alt:"Your avatar",className:"object-cover w-full h-full",onError:w=>{console.log("CommentSection: Current user image load error, falling back to default"),w.target.src="/default-avatar.png"}})})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"form-control",children:f.jsx("textarea",{className:"textarea textarea-bordered textarea-sm w-full min-h-[2.5rem] text-sm",placeholder:"Write a comment...",value:s,onChange:w=>o(w.target.value),disabled:a})}),c&&f.jsx("div",{className:"text-error text-xs mt-1",children:c}),f.jsx("div",{className:"flex justify-end mt-1",children:f.jsx(H.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`btn btn-primary btn-xs ${a?"loading":""}`,type:"submit",disabled:!s.trim()||a,children:a?"Commenting...":"Comment"})})]})]})}),f.jsx(nt,{children:f.jsx("div",{className:"space-y-2",children:h?f.jsx("div",{className:"flex justify-center py-4",children:f.jsx("span",{className:"loading loading-spinner loading-sm"})}):r.length>0?r.map(w=>f.jsxs(H.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex gap-2",children:[f.jsx("div",{className:"avatar",children:f.jsx("div",{className:"w-6 h-6 rounded-full",children:f.jsx("img",{src:y[w.userId]||"/default-avatar.png",alt:w.authorName,className:"object-cover w-full h-full",onError:E=>{console.log("CommentSection: Comment image load error, falling back to default"),E.target.src="/default-avatar.png"}})})}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-medium hover:underline cursor-pointer",children:w.authorName}),f.jsx("span",{className:"text-xs text-base-content/60",children:x(w.createdAt)}),(n==null?void 0:n.uid)===w.userId&&f.jsx(H.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>b(w.id),className:"ml-auto p-1 hover:bg-base-300 rounded transition-colors",children:f.jsx(LR,{className:"w-3 h-3"})})]}),f.jsx("div",{className:"text-base-content/80",children:w.content})]})})]},w.id)):f.jsx("div",{className:"text-center py-4 text-base-content/60",children:"No comments yet. Be the first to comment!"})})})]})})}const $2=async(t,e,n)=>{const r=Yc(Z);try{const i=Ue(Z,"shareAnalytics"),s={postId:t,userId:e,platform:n,timestamp:yt()},o=ve(Z,"posts",t);r.update(o,{shareCount:pr(1),[`sharePlatformCounts.${n}`]:pr(1)});const a=Ue(Z,"users",e,"shares"),l={...s,id:t};return await r.commit(),await ka(i,s),await ka(a,l),{success:!0}}catch(i){throw console.error("Error tracking share:",i),i}},jz=({post:t})=>{const[e,n]=g.useState(!1),[r,i]=g.useState(!1),[s,o]=g.useState(""),{currentUser:a}=At(),l=()=>n(!0),c=()=>n(!1),d=()=>`${window.location.origin}/post/${t.id}`,h=async()=>{try{await navigator.clipboard.writeText(d()),o("Link copied to clipboard!"),i(!0),c(),a&&await $2(t.id,a.uid,"copy"),setTimeout(()=>i(!1),3e3)}catch(_){console.error("Failed to copy:",_),o("Failed to copy link"),i(!0),setTimeout(()=>i(!1),3e3)}},m=async _=>{const x=d(),R=`Check out this post: ${t.title}`;let b;switch(_){case"twitter":b=`https://twitter.com/intent/tweet?text=${encodeURIComponent(R)}&url=${encodeURIComponent(x)}`;break;case"facebook":b=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(x)}`;break;case"whatsapp":b=`https://wa.me/?text=${encodeURIComponent(R+" "+x)}`;break;case"telegram":b=`https://t.me/share/url?url=${encodeURIComponent(x)}&text=${encodeURIComponent(R)}`;break;default:return}window.open(b,"_blank","width=600,height=400"),c(),a&&await $2(t.id,a.uid,_)},y=[{id:"copy",icon:kF,label:"Copy Link",action:h},{id:"twitter",icon:()=>f.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"})}),label:"Twitter",action:()=>m("twitter")},{id:"facebook",icon:()=>f.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),label:"Facebook",action:()=>m("facebook")},{id:"whatsapp",icon:()=>f.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),label:"WhatsApp",action:()=>m("whatsapp")},{id:"telegram",icon:()=>f.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:f.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),label:"Telegram",action:()=>m("telegram")}];return f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:l,className:"btn btn-ghost btn-xs gap-1 min-h-0 h-6 px-1.5","aria-label":"share",children:[f.jsx(HF,{className:"w-3.5 h-3.5"}),f.jsx("span",{className:"text-xs",children:"Share"})]}),f.jsx(nt,{children:e&&f.jsxs(f.Fragment,{children:[f.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:c,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),f.jsxs(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-base-100 rounded-box p-4 shadow-lg z-50 w-full max-w-sm",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"font-medium",children:"Share Post"}),f.jsx("button",{onClick:c,className:"btn btn-ghost btn-sm btn-square",children:f.jsx(Bf,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"space-y-2",children:y.map((_,x)=>f.jsxs(H.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},onClick:_.action,className:"w-full btn btn-ghost justify-start gap-3 normal-case",children:[f.jsx(_.icon,{className:"w-5 h-5"}),_.label]},_.id))})]})]})}),f.jsx(nt,{children:r&&f.jsx(H.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-4 left-1/2 -translate-x-1/2 bg-neutral text-neutral-content px-4 py-2 rounded-box shadow-lg z-50",children:s})})]})},Vz=async(t,e)=>{try{const n=Ue(Z,"bookmarks"),r=tt(n,ft("userId","==",t),ft("postId","==",e));if(!(await Nn(r)).empty)throw new Error("Post already bookmarked");const s={userId:t,postId:e,createdAt:yt()};return{success:!0,id:(await ka(n,s)).id}}catch(n){throw console.error("Error adding bookmark:",n),n}},Oz=async(t,e)=>{try{const n=Ue(Z,"bookmarks"),r=tt(n,ft("userId","==",t),ft("postId","==",e)),i=await Nn(r);if(i.empty)throw new Error("Bookmark not found");return await Df(ve(Z,"bookmarks",i.docs[0].id)),{success:!0}}catch(n){throw console.error("Error removing bookmark:",n),n}},Fz=async(t,e)=>{try{const n=Ue(Z,"bookmarks"),r=tt(n,ft("userId","==",t),ft("postId","==",e));return!(await Nn(r)).empty}catch(n){throw console.error("Error checking bookmark status:",n),n}},tc={LIKE:{type:"like",emoji:"",label:"Like"},LOVE:{type:"love",emoji:"",label:"Love"},LAUGH:{type:"laugh",emoji:"",label:"Laugh"},WOW:{type:"wow",emoji:"",label:"Wow"},SAD:{type:"sad",emoji:"",label:"Sad"},ANGRY:{type:"angry",emoji:"",label:"Angry"}},Uz=async(t,e,n)=>{try{const r=ve(Z,"posts",t,"reactions",e);return await Pa(r,{type:n,timestamp:yt()}),{success:!0}}catch(r){return console.error("Error adding reaction:",r),{error:r.message}}},Bz=async(t,e)=>{try{const n=ve(Z,"posts",t,"reactions",e);return await Df(n),{success:!0}}catch(n){return console.error("Error removing reaction:",n),{error:n.message}}},$z=(t,e)=>{const n=Ue(Z,"posts",t,"reactions");return An(n,i=>{const s={};i.forEach(o=>{const a=o.data();s[a.type]||(s[a.type]=0),s[a.type]++}),e(s)},i=>{console.error("Error in reactions subscription:",i)})};function zz({onSelect:t,currentReaction:e,position:n="top"}){var o;const[r,i]=g.useState(!1),s=a=>{t(a),i(!1)};return f.jsxs("div",{className:"relative",children:[f.jsx("button",{type:"button",className:"btn btn-ghost btn-sm p-0",onClick:()=>i(!r),children:f.jsx("span",{className:"text-xl",children:e?(o=tc[e.toUpperCase()])==null?void 0:o.emoji:tc.LIKE.emoji})}),f.jsx(nt,{children:r&&f.jsx(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1},className:`absolute ${n==="top"?"bottom-full mb-2":"top-full mt-2"} left-0 z-50`,children:f.jsx("div",{className:"bg-base-200 rounded-full shadow-lg p-1 flex gap-1",children:Object.values(tc).map(a=>f.jsx(H.button,{type:"button",className:"btn btn-ghost btn-sm btn-circle",whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>s(a.type),title:a.label,children:f.jsx("span",{className:"text-xl",children:a.emoji})},a.type))})})})]})}function Wz({reactions:t}){const e=Object.entries(t||{}).sort(([,n],[,r])=>r-n).filter(([,n])=>n>0);return e.length===0?null:f.jsxs(H.div,{className:"flex items-center gap-1 text-sm text-base-content/70",initial:{opacity:0},animate:{opacity:1},children:[f.jsx("div",{className:"flex -space-x-1",children:e.slice(0,3).map(([n])=>{var r,i;return f.jsx("div",{className:"w-5 h-5 flex items-center justify-center bg-base-200 rounded-full",title:(r=tc[n.toUpperCase()])==null?void 0:r.label,children:f.jsx("span",{className:"text-sm",children:(i=tc[n.toUpperCase()])==null?void 0:i.emoji})},n)})}),f.jsx("span",{className:"text-xs",children:e.reduce((n,[,r])=>n+r,0)})]})}function Yf({post:t,onLike:e}){var we;const[n,r]=g.useState(!1),[i,s]=g.useState(!1),[o,a]=g.useState(!1),[l,c]=g.useState(!1),[d,h]=g.useState(null),[m,y]=g.useState(0),[_,x]=g.useState(!1),[R,b]=g.useState({}),[w,E]=g.useState(null),{currentUser:P}=At(),{deletePost:j}=Xc();g.useEffect(()=>{console.log("PostCard: Post data:",{authorId:t==null?void 0:t.authorId,userId:t==null?void 0:t.userId,authorEmail:t==null?void 0:t.authorEmail,authorDisplayName:t==null?void 0:t.authorDisplayName})},[t]),g.useEffect(()=>{(async()=>{if(P&&t.id&&t.authorId)try{console.log("PostCard: Checking follow and bookmark status for post:",t.id);const[J,$]=await Promise.all([W6(P.uid,t.authorId),Fz(P.uid,t.id)]);console.log("PostCard: Received follow and bookmark status:",J,$),s(J),a($)}catch(J){console.error("PostCard: Error checking status:",J)}})()},[P,t.id,t.authorId]),g.useEffect(()=>{(async()=>{console.log("PostCard: Starting photo fetch for post:",t==null?void 0:t.id);const J=t==null?void 0:t.userId;if(!J){console.log("PostCard: No userId available for post:",t==null?void 0:t.id);return}try{console.log("PostCard: Fetching photo for userId:",J);const $=await Bv(J);console.log("PostCard: Received photoURL:",$,"for userId:",J),h($)}catch($){console.error("PostCard: Error fetching author photo:",$)}})()},[t==null?void 0:t.userId,t==null?void 0:t.id]),g.useEffect(()=>{const G=cC(t.id,J=>{y(J.length)},J=>{console.error("Error subscribing to comments:",J)});return()=>G()},[t.id]),g.useEffect(()=>{if(!t.id)return;const G=$z(t.id,J=>{b(J)});return()=>G()},[t.id]);const k=async G=>{if(G.stopPropagation(),!(!P||P.uid===t.authorId)){c(!0);try{console.log("PostCard: Handling follow/unfollow for post:",t.id),i?(await wR(P.uid,t.authorId),s(!1)):(await vR(P.uid,t.authorId),s(!0))}catch(J){console.error("PostCard: Error following/unfollowing user:",J)}finally{c(!1)}}},S=async G=>{if(G.stopPropagation(),!!P){c(!0);try{console.log("PostCard: Handling bookmark for post:",t.id),o?(await Oz(P.uid,t.id),a(!1)):(await Vz(P.uid,t.id),a(!0))}catch(J){console.error("PostCard: Error bookmarking post:",J)}finally{c(!1)}}},T=G=>{G.stopPropagation(),x(!0)},I=async()=>{if(!(!P||P.uid!==t.userId)){c(!0);try{const G=await j(t.id,P.uid);G.success||console.error("Error deleting post:",G.error),x(!1)}catch(G){console.error("Error deleting post:",G)}finally{c(!1)}}},C=()=>{x(!1)},D=async G=>{if(P)try{G===w?(await Bz(t.id,P.uid),E(null)):(await Uz(t.id,P.uid,G),E(G))}catch(J){console.error("Error handling reaction:",J)}},L=G=>{if(!G)return"Just now";try{return G.toDate?qs(G.toDate(),{addSuffix:!0}):G instanceof Date?qs(G,{addSuffix:!0}):qs(new Date(G),{addSuffix:!0})}catch(J){return console.error("PostCard: Error formatting date:",J),"Just now"}},N={technology:Ah,tech:Ah,coding:Wg,programming:Wg,music:PR,art:kR,gaming:qg,game:qg,news:RR,trending:Ql,featured:gv,default:DR},X=G=>N[G.toLowerCase()]||N.default;return f.jsxs(f.Fragment,{children:[f.jsx(H.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"card bg-base-100 shadow-xl mb-6 max-w-3xl mx-auto w-full",children:f.jsxs("div",{className:"card-body py-4 px-8",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(Nz,{userId:t==null?void 0:t.userId,username:(((t==null?void 0:t.authorEmail)||(t==null?void 0:t.authorDisplayName)||"anonymous").split("@")[0]||"anonymous").toLowerCase().replace(/\s+/g,""),trigger:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:d||"/default-avatar.png",alt:`${(t==null?void 0:t.authorDisplayName)||"User"}'s avatar`,className:"w-8 h-8 rounded-full object-cover cursor-pointer",onError:G=>{console.log("PostCard: Image load error, falling back to default"),G.target.src="/default-avatar.png"}}),f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("span",{className:"font-medium hover:underline cursor-pointer",children:["u/",(((t==null?void 0:t.authorEmail)||(t==null?void 0:t.authorDisplayName)||"anonymous").split("@")[0]||"anonymous").toLowerCase().replace(/\s+/g,"")]}),f.jsx("span",{className:"text-xs text-base-content/70",children:L(t.createdAt)})]})]})}),f.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[((we=t.tags)==null?void 0:we.length)>0&&f.jsx("div",{className:"flex gap-2 flex-wrap",children:t.tags.map((G,J)=>{const $=X(G);return f.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-colors duration-200 cursor-pointer",onClick:Q=>{Q.stopPropagation(),window.location.href=`/explore?tag=${G}`},children:[f.jsx($,{className:"w-4 h-4 mr-1"}),G]},J)})}),P&&P.uid!==t.authorId&&f.jsx("button",{onClick:k,disabled:l,className:`btn btn-ghost btn-sm gap-2 min-h-0 h-7 px-2 ${l?"loading":""}`,title:i?"Unfollow user":"Follow user",children:i?f.jsx(Pz,{className:"w-4 h-4 text-primary"}):f.jsx(Uf,{className:"w-4 h-4"})}),(P==null?void 0:P.uid)===t.userId&&f.jsx(H.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:T,className:"btn btn-ghost btn-sm text-error",disabled:l,children:f.jsx(LR,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h2",{className:"post-title",children:t.title}),f.jsx("div",{className:"break-words whitespace-pre-wrap",children:f.jsx("p",{className:"post-content",children:t.content})})]}),t.imageUrl&&f.jsx("div",{className:"relative group cursor-zoom-in w-full mt-4",children:f.jsxs("div",{className:"aspect-square w-full overflow-hidden",children:[f.jsx("img",{src:t.imageUrl,alt:"Post image",className:"w-full h-full object-cover",onClick:()=>window.open(t.imageUrl,"_blank"),onError:G=>{console.error("Image load error:",G),G.target.style.display="none"}}),f.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:f.jsx("span",{className:"text-white text-sm",children:"Click to view full size"})})]})}),f.jsxs("div",{className:"post-actions",children:[f.jsx(zz,{onSelect:D,currentReaction:w}),f.jsx(Wz,{reactions:R}),f.jsxs("button",{onClick:G=>{G.stopPropagation(),r(!n)},className:"btn btn-ghost btn-sm gap-2",children:[f.jsx(X9,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm",children:m})]}),f.jsx(jz,{postId:t.id}),f.jsx("button",{onClick:S,className:"btn btn-ghost btn-sm",children:o?f.jsx(Az,{className:"w-5 h-5"}):f.jsx(Ff,{className:"w-5 h-5"})})]})]}),f.jsx(nt,{children:n&&f.jsx(H.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:f.jsx(Mz,{postId:t.id})})})]})}),_&&f.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:f.jsxs(H.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-base-100 p-6 rounded-lg w-full max-w-sm border border-base-300",children:[f.jsxs("div",{className:"flex items-start gap-3 text-error mb-6",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-base-content",children:"Delete Post"}),f.jsx("div",{className:"text-sm text-base-content/80 mt-1",children:"Are you sure you want to delete this post? This action cannot be undone."})]})]}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx("button",{className:"btn btn-ghost btn-sm px-4 hover:bg-base-200 normal-case",onClick:C,disabled:l,children:"Cancel"}),f.jsx("button",{className:"btn btn-error btn-sm px-4 normal-case border-0",onClick:I,disabled:l,children:l?f.jsx("span",{className:"loading loading-spinner loading-sm"}):"Delete"})]})]})})]})}function Hz(t){if(!t)return null;const e=/(https?:\/\/[^\s]+(\.jpg|\.jpeg|\.png|\.gif|\.webp))/i,n=t.match(e);return n?n[0]:null}function z2(t){return t?/\.(jpg|jpeg|png|gif|webp)$/i.test(t):!1}function uC({onSuccess:t}){const{createNewPost:e}=Xc(),[n,r]=g.useState(!1),[i,s]=g.useState(null),o=g.useRef(null),[a,l]=g.useState({title:"",content:"",tags:[],media:[],imageUrl:"",visibility:"public",draft:!1,nsfw:!1,currentTag:""}),c=R=>{if(R.key==="Enter"||R.key===","){R.preventDefault();const b=a.currentTag.toLowerCase().trim().replace(/[^a-z0-9]/g,"");b&&!a.tags.includes(b)&&a.tags.length<5&&l(w=>({...w,tags:[...w.tags,b],currentTag:""}))}},d=R=>{l(b=>({...b,tags:b.tags.filter(w=>w!==R)}))},h=async R=>{const w=Array.from(R.target.files).filter(P=>P.type.startsWith("image/")&&P.size<=5*1024*1024);if(w.length+a.media.length>4){s("Maximum 4 images allowed");return}const E=w.map(P=>({file:P,type:P.type,preview:URL.createObjectURL(P),alt:""}));l(P=>({...P,media:[...P.media,...E]}))},m=R=>{l(b=>({...b,media:b.media.filter((w,E)=>E!==R)}))},y=(R,b)=>{l(w=>({...w,media:w.media.map((E,P)=>P===R?{...E,alt:b}:E)}))},_=R=>{const b=R.target.value;l(E=>({...E,content:b}));const w=Hz(b);w&&z2(w)&&l(E=>({...E,content:b.replace(w,"").trim(),imageUrl:w}))},x=async R=>{if(R.preventDefault(),!n){r(!0),s(null);try{if(a.imageUrl&&!z2(a.imageUrl)){s("Invalid image URL format"),r(!1);return}const b=await e(a.title,a.content,{media:a.media,imageUrl:a.imageUrl,tags:a.tags,visibility:a.visibility,draft:a.draft,nsfw:a.nsfw});b.error?s(b.error):(l({title:"",content:"",tags:[],media:[],imageUrl:"",visibility:"public",draft:!1,nsfw:!1,currentTag:""}),t&&t())}catch(b){s(b.message)}finally{r(!1)}}};return f.jsx(H.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"card bg-base-100 shadow-xl mb-6",children:f.jsx("div",{className:"card-body",children:f.jsxs("form",{onSubmit:x,children:[f.jsx("div",{className:"form-control mb-4",children:f.jsx("input",{type:"text",placeholder:"Post title",value:a.title,onChange:R=>l(b=>({...b,title:R.target.value})),className:"input input-bordered w-full",maxLength:300})}),f.jsx("div",{className:"form-control mb-4",children:f.jsx("textarea",{placeholder:"What's on your mind? Paste an image URL and it will be automatically detected!",value:a.content,onChange:_,className:"textarea textarea-bordered w-full",rows:4,maxLength:4e4})}),a.imageUrl&&f.jsxs("div",{className:"mb-4 space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-success",children:"Image URL detected!"}),f.jsx("button",{type:"button",className:"btn btn-ghost btn-xs",onClick:()=>l(R=>({...R,imageUrl:""})),children:"Remove"})]}),f.jsx("div",{className:"aspect-square w-full max-w-sm mx-auto overflow-hidden rounded-lg bg-base-200",children:f.jsx("img",{src:a.imageUrl,alt:"Preview",className:"w-full h-full object-cover",onError:R=>{console.error("Image load error:",R),l(b=>({...b,imageUrl:""}))}})})]}),f.jsxs("div",{className:"form-control mb-4",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:a.tags.map((R,b)=>f.jsxs(H.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"badge badge-primary gap-2",children:[R,f.jsx("button",{type:"button",className:"btn btn-ghost btn-xs px-1",onClick:()=>d(R),children:""})]},b))}),f.jsx("input",{type:"text",placeholder:"Add tags (max 5) - Press Enter or comma to add",value:a.currentTag,onChange:R=>l(b=>({...b,currentTag:R.target.value})),onKeyDown:c,className:"input input-bordered w-full",disabled:a.tags.length>=5})]}),f.jsx(nt,{children:a.media.length>0&&f.jsx(H.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-2 gap-4 mb-4",children:a.media.map((R,b)=>f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:R.preview,alt:R.alt,className:"w-full h-48 object-cover rounded-lg"}),f.jsx("button",{type:"button",className:"btn btn-circle btn-sm absolute top-2 right-2",onClick:()=>m(b),children:""}),f.jsx("input",{type:"text",placeholder:"Add alt text",value:R.alt,onChange:w=>y(b,w.target.value),className:"input input-bordered input-sm w-full mt-2"})]},b))})}),f.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[f.jsxs("button",{type:"button",className:"btn btn-ghost btn-sm gap-2",onClick:()=>{var R;return(R=o.current)==null?void 0:R.click()},disabled:a.media.length>=4,children:[f.jsx(NR,{className:"w-5 h-5"}),"Add Images"]}),f.jsx("input",{ref:o,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:h}),f.jsxs("button",{type:"button",className:`btn btn-sm gap-2 ${a.visibility==="private"?"btn-primary":"btn-ghost"}`,onClick:()=>l(R=>({...R,visibility:R.visibility==="public"?"private":"public"})),children:[a.visibility==="public"?f.jsx(xF,{className:"w-5 h-5"}):f.jsx(_F,{className:"w-5 h-5"}),a.visibility==="public"?"Public":"Private"]}),f.jsx("button",{type:"button",className:`btn btn-sm gap-2 ${a.draft?"btn-primary":"btn-ghost"}`,onClick:()=>l(R=>({...R,draft:!R.draft})),children:a.draft?"Draft":"Publish"}),f.jsxs("button",{type:"button",className:`btn btn-sm gap-2 ${a.nsfw?"btn-error":"btn-ghost"}`,onClick:()=>l(R=>({...R,nsfw:!R.nsfw})),children:[f.jsx(vF,{className:"w-5 h-5"}),"NSFW"]})]}),f.jsx(nt,{children:i&&f.jsx(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"alert alert-error mb-4",children:i})}),f.jsx("div",{className:"card-actions justify-end",children:f.jsx(H.button,{type:"submit",disabled:n||!a.title.trim()||!a.content.trim(),className:`btn btn-primary ${n?"loading":""}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:n?"Posting...":a.draft?"Save Draft":"Post"})})]})})})}function qz({activeTab:t,onTabChange:e}){const n=[{id:"all",label:"All Posts",icon:RR},{id:"followed",label:"Following",icon:MR},{id:"bookmarked",label:"Bookmarked",icon:Ff}];return f.jsx("div",{className:"flex gap-2 p-4 border-b border-base-300",children:n.map(r=>{const i=r.icon;return f.jsxs(H.button,{whileTap:{scale:.95},onClick:()=>e(r.id),className:`btn btn-sm gap-2 ${t===r.id?"btn-primary":"btn-ghost"}`,children:[f.jsx(i,{className:"w-4 h-4"}),r.label]},r.id)})})}function Gz(){const{currentUser:t}=At(),[e,n]=g.useState([]),[r,i]=g.useState(!0),[s,o]=g.useState(null),[a,l]=g.useState(0),c=()=>{l(d=>d+1)};return g.useEffect(()=>{(async()=>{if(t)try{i(!0);const h=await q6(t.uid);n(h.slice(0,5))}catch(h){console.error("Error fetching suggestions:",h),o("Failed to load suggestions")}finally{i(!1)}})()},[t,a]),!t||s||e.length===0?null:f.jsxs(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-base-100 border border-base-300 rounded-box p-4 mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(yv,{className:"w-5 h-5"}),f.jsx("h2",{className:"font-medium",children:"Suggested Users"})]}),f.jsx(nt,{mode:"popLayout",children:r?f.jsx("div",{className:"flex justify-center py-4",children:f.jsx("span",{className:"loading loading-spinner loading-sm"})}):f.jsx("div",{className:"space-y-3",children:e.map(d=>f.jsxs(H.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between",children:[f.jsxs(kt,{to:`/profile/${d.id}`,className:"flex items-center gap-2 flex-1 min-w-0",children:[f.jsx(iC,{size:"sm",photoURL:d.photoURL,seed:d.email}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-medium truncate",children:d.displayName||"Anonymous"}),f.jsx("div",{className:"text-xs text-base-content/60 truncate",children:d.bio||"No bio yet"})]})]}),f.jsx(lC,{targetUserId:d.id,className:"ml-2",onFollowStateChange:c})]},d.id))})})]})}const Kz=async t=>{if(!t)return[];try{const e=tt(Ue(Z,"postFollows"),ft("userId","==",t));return(await Nn(e)).docs.map(r=>r.data().postId)}catch(e){return console.error("Error getting followed posts:",e),[]}};function Qz(){const{currentUser:t}=At(),{posts:e,loading:n,error:r,hasMore:i,fetchPosts:s}=Xc(),[o,a]=g.useState("all"),[l,c]=g.useState([]),[d,h]=g.useState([]),[m,y]=g.useState([]),[_,x]=g.useState([]),[R,b]=g.useState(!1),[w,E]=g.useState(!1);g.useEffect(()=>{const S=()=>{if(!i||n)return;window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-1e3&&(console.log("Home: Loading more posts..."),s(!0))};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[i,n,s]),g.useEffect(()=>{s()},[]),g.useEffect(()=>{(async()=>{if(t){if(o==="followed"){b(!0);try{const[T,I]=await Promise.all([H6(t.uid),Kz(t.uid)]);c(T),h(I)}catch(T){console.error("Error fetching following:",T)}finally{b(!1)}}if(o==="bookmarked"){E(!0);try{const T=Ue(Z,"bookmarks"),I=tt(T,ft("userId","==",t.uid)),D=(await Nn(I)).docs.map(L=>L.data().postId);y(D)}catch(T){console.error("Error fetching bookmarks:",T)}finally{E(!1)}}}})()},[t,o]),g.useEffect(()=>{if(!t){x(e);return}switch(o){case"followed":x(e.filter(S=>l.includes(S.userId)||d.includes(S.id)));break;case"bookmarked":x(e.filter(S=>m.includes(S.id)));break;default:x(e)}},[e,o,l,d,m,t]);const P=S=>{a(S)},j=n||R||w,k=_;return f.jsxs("div",{children:[f.jsx("header",{className:"sticky top-0 z-10 bg-base-100/80 backdrop-blur-md border-b border-base-300",children:f.jsxs("div",{className:"max-w-[680px] ml-20",children:[f.jsx("div",{className:"p-4",children:f.jsx("h1",{className:"text-xl font-bold",children:"Home"})}),t&&f.jsx(qz,{activeTab:o,onTabChange:P})]})}),f.jsxs("div",{className:"max-w-[680px] ml-20 pt-4",children:[t&&f.jsx(uC,{}),t&&o==="all"&&f.jsx(Gz,{}),r&&f.jsxs("div",{className:"p-4 text-error text-center",children:["Error loading posts: ",r]}),j&&k.length===0&&f.jsx("div",{className:"p-4 text-center",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}),!j&&k.length===0&&f.jsx("div",{className:"p-8 text-center text-base-content/60",children:o==="bookmarked"?f.jsx("p",{children:"No bookmarked posts yet. Save posts to see them here!"}):o==="followed"?f.jsx("p",{children:"No posts from followed users yet. Follow more users to see their posts!"}):f.jsx("p",{children:"No posts available. Be the first to create one!"})}),f.jsx(nt,{children:k.map(S=>f.jsx(Yf,{post:S,className:"mb-4"},S.id))})]})]})}const W2=[{id:"trending",icon:Ql,label:"Trending"},{id:"latest",icon:rF,label:"Latest"},{id:"discussed",icon:K9,label:"Most Discussed"},{id:"featured",icon:gv,label:"Featured"}];function Yz(){var w;At();const[t,e]=g.useState([]),[n,r]=g.useState(!1),[i,s]=g.useState(null),[o,a]=g.useState("trending"),[l,c]=g.useState(["technology","gaming","news","art","music"]),[d,h]=g.useState([]),[m,y]=g.useState(null),[_,x]=g.useState(!0),R=async(E=!1)=>{if(!(E&&!_)){r(!0),s(null);try{const P=Ue(Z,"posts");let j;const k=[Ca(10)];switch(d.length>0&&k.push(ft("tags","array-contains-any",d)),o){case"latest":j=tt(P,...k,or("createdAt","desc"));break;case"discussed":j=tt(P,...k,or("commentCount","desc"));break;case"featured":j=tt(P,...k,ft("featured","==",!0),or("createdAt","desc"));break;case"trending":default:j=tt(P,...k,or("likesCount","desc"));break}E&&m&&(j=tt(j,xh(m)));const S=await Nn(j),T=S.docs.map(I=>{var C,D;return{id:I.id,...I.data(),createdAt:((C=I.data().createdAt)==null?void 0:C.toDate())||new Date,lastActivityAt:((D=I.data().lastActivityAt)==null?void 0:D.toDate())||new Date}});e(I=>E?[...I,...T]:T),y(S.docs[S.docs.length-1]||null),x(!S.empty&&S.docs.length===10)}catch(P){console.error("Error fetching posts:",P),s(P.message)}finally{r(!1)}}};g.useEffect(()=>{e([]),y(null),x(!0),R()},[o,d]);const b=E=>{h(P=>P.includes(E)?P.filter(j=>j!==E):[...P,E])};return f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4",children:[f.jsxs("div",{className:"md:col-span-1 space-y-4",children:[f.jsxs("div",{className:"bg-base-200 rounded-lg p-4",children:[f.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Categories"}),f.jsx("ul",{className:"space-y-2",children:W2.map(E=>f.jsx(H.li,{whileHover:{x:4},whileTap:{scale:.98},children:f.jsxs("button",{onClick:()=>a(E.id),className:`w-full flex items-center gap-2 p-2 rounded-lg transition-colors
                    ${o===E.id?"bg-primary text-primary-content":"hover:bg-base-300"}`,children:[f.jsx(E.icon,{className:"w-5 h-5"}),f.jsx("span",{children:E.label})]})},E.id))})]}),f.jsxs("div",{className:"bg-base-200 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(AR,{className:"w-5 h-5"}),f.jsx("h2",{className:"text-lg font-semibold",children:"Trending Tags"})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(E=>f.jsxs(H.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(E),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm
                  ${d.includes(E)?"bg-primary text-primary-content":"bg-base-300 hover:bg-base-300/80"}`,children:[f.jsx(DR,{className:"w-4 h-4"}),E]},E))})]})]}),f.jsxs("div",{className:"md:col-span-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h1",{className:"text-2xl font-bold",children:((w=W2.find(E=>E.id===o))==null?void 0:w.label)||"Explore"}),d.length>0&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm text-base-content/60",children:"Filtered by tags:"}),f.jsx("button",{onClick:()=>h([]),className:"text-sm text-primary hover:underline",children:"Clear all"})]})]}),i&&f.jsxs("div",{className:"text-error text-center p-4",children:["Error loading posts: ",i]}),f.jsx(nt,{children:f.jsxs("div",{className:"space-y-4",children:[t.map(E=>f.jsx(Yf,{post:E},E.id)),t.length===0&&!n&&f.jsx("div",{className:"text-center text-base-content/60 p-8",children:"No posts found. Try different filters or tags."})]})}),n&&f.jsx("div",{className:"flex justify-center items-center p-8",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}),!n&&_&&t.length>0&&f.jsx("div",{className:"flex justify-center mt-8",children:f.jsx("button",{onClick:()=>R(!0),className:"btn btn-primary",children:"Load More"})})]})]})}function Xz(){const{currentUser:t}=At(),[e,n]=g.useState([]),[r,i]=g.useState(!0),[s,o]=g.useState(null),[a,l]=g.useState({});g.useEffect(()=>{if(!t)return;const h=gR(t.uid,async m=>{n(m);const y=m.filter(_=>_.type==="follow");for(const _ of y)if(!a[_.senderId])try{const x=Ue(Z,"posts"),R=tt(x,ft("userId","==",_.senderId),ft("draft","==",!1),ft("visibility","==","public"),or("createdAt","desc"),Ca(1)),b=await Nn(R);b.empty||l(w=>({...w,[_.senderId]:{id:b.docs[0].id,...b.docs[0].data()}}))}catch(x){console.error("Error fetching user posts:",x)}i(!1)},m=>{console.error("Error in notifications subscription:",m),o("Failed to load notifications"),i(!1)});return()=>h()},[t]);const c=async h=>{h.read||await yR(h.id)},d=h=>{switch(h.type){case"follow":return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(n7,{className:"w-5 h-5 text-primary"}),f.jsx(kt,{to:`/profile/${h.senderId}`,className:"font-semibold hover:text-primary",children:h.senderName}),f.jsx("span",{children:"started following you"})]}),a[h.senderId]&&f.jsx("div",{className:"pl-8",children:f.jsx(Yf,{post:a[h.senderId]})})]});case"like":return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(CR,{className:"w-5 h-5 text-red-500"}),f.jsx(kt,{to:`/profile/${h.senderId}`,className:"font-semibold hover:text-primary",children:h.senderName}),f.jsx("span",{children:"liked your post"})]});case"comment":return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(IR,{className:"w-5 h-5 text-blue-500"}),f.jsx(kt,{to:`/profile/${h.senderId}`,className:"font-semibold hover:text-primary",children:h.senderName}),f.jsx("span",{children:"commented on your post"})]});case"newPost":return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(pF,{className:"w-5 h-5 text-primary"}),f.jsx(kt,{to:`/profile/${h.senderId}`,className:"font-semibold hover:text-primary",children:h.senderName}),f.jsx("span",{children:"created a new post"}),h.postId&&f.jsx(kt,{to:`/post/${h.postId}`,className:"text-primary hover:underline",children:"View Post"})]});default:return null}};return r?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}):s?f.jsx("div",{className:"p-4 text-error text-center",children:f.jsx("p",{children:s})}):f.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx(pv,{className:"w-6 h-6"}),f.jsx("h1",{className:"text-2xl font-bold",children:"Notifications"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(nt,{children:e.map(h=>f.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-4 rounded-lg ${h.read?"bg-base-200":"bg-base-300"}`,onClick:()=>c(h),children:d(h)},h.id))}),e.length===0&&f.jsx("div",{className:"text-center text-base-content/60 py-8",children:f.jsx("p",{children:"No notifications yet"})})]})]})}const c0=document.createElement("style");c0.textContent=`
  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
`;typeof document<"u"&&!document.getElementById("gradient-animation")&&(c0.id="gradient-animation",document.head.appendChild(c0));const vp=["adventurer","adventurer-neutral","avataaars","big-ears","big-ears-neutral","big-smile","bottts","croodles","croodles-neutral","fun-emoji","icons","identicon","initials","lorelei","lorelei-neutral","micah","miniavs","notionists","open-peeps","personas","pixel-art","pixel-art-neutral"];function Jz({size:t="md",editable:e=!0,className:n=""}){const{currentUser:r,updateUserProfile:i,updateUserPhotoInContent:s}=At(),{updatePhotoUrlInPosts:o}=Xc(),[a,l]=g.useState(!1),[c,d]=g.useState("adventurer"),[h,m]=g.useState(!1),[y,_]=g.useState((r==null?void 0:r.uid)||"default"),[x,R]=g.useState(!1),b={sm:"w-10 h-10",md:"w-16 h-16",lg:"w-24 h-24",xl:"w-32 h-32"},w=(j,k)=>`https://api.dicebear.com/7.x/${j}/svg?seed=${k}`,E=()=>{R(!0);const j=vp[Math.floor(Math.random()*vp.length)],k=Math.random().toString(36).substring(7);d(j),_(k),R(!1)},P=async j=>{try{R(!0);const k=w(j,y),S=await i({photoURL:k});S.success?(await s(r.uid,k),o(r.uid,k),d(j),l(!1)):console.error("Failed to update profile:",S.error)}catch(k){console.error("Error updating profile photo:",k)}finally{R(!1)}};return f.jsxs(f.Fragment,{children:[f.jsxs(H.div,{className:`relative group ${b[t]} ${n}`,onHoverStart:()=>e&&m(!0),onHoverEnd:()=>e&&m(!1),whileHover:{scale:1.02},whileTap:{scale:.98},children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-secondary/20 to-accent/20 rounded-full",style:{backgroundSize:"200% 200%",animation:"gradient 8s ease infinite"}}),f.jsx("div",{className:"absolute -inset-[3px] bg-gradient-to-r from-primary via-secondary to-accent rounded-full blur-sm opacity-40 group-hover:opacity-75 transition duration-500"}),f.jsx("div",{className:"absolute inset-[2px] rounded-full bg-gradient-to-r from-base-100 to-base-200",children:f.jsxs("div",{className:"relative rounded-full overflow-hidden w-full h-full ring-2 ring-base-content/10",children:[f.jsx("img",{src:(r==null?void 0:r.photoURL)||w("adventurer",r==null?void 0:r.uid),alt:"Profile",className:"w-full h-full object-cover"}),e&&h&&f.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-base-content/30 backdrop-blur-sm cursor-pointer",onClick:()=>l(!0),children:f.jsxs("div",{className:"flex items-center gap-2 text-base-100",children:[f.jsx(BF,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:"Edit"})]})})]})}),f.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-primary rounded-full ring-2 ring-base-100"}),f.jsx("div",{className:"absolute -bottom-0.5 -left-0.5 w-2 h-2 bg-secondary rounded-full ring-2 ring-base-100"})]}),f.jsx(nt,{children:a&&f.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:j=>j.target===j.currentTarget&&l(!1),children:f.jsxs(H.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"modal-box max-w-3xl w-full bg-base-100 p-6 rounded-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"font-bold text-lg",children:"Choose Your Avatar Style"}),f.jsx(H.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`btn btn-circle btn-ghost ${x?"loading":""}`,onClick:E,disabled:x,children:f.jsx(mv,{className:"w-6 h-6"})})]}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 max-h-[60vh] overflow-y-auto p-2",children:vp.map(j=>f.jsxs(H.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative cursor-pointer rounded-lg p-2 border-2 ${c===j?"border-primary":"border-transparent"}`,onClick:()=>P(j),children:[f.jsx("img",{src:w(j,y),alt:j,className:"w-full aspect-square rounded-lg"}),f.jsx("p",{className:"text-center text-sm mt-2",children:j.replace(/-/g," ")})]},j))}),f.jsx("div",{className:"modal-action",children:f.jsx("button",{className:"btn",onClick:()=>l(!1),children:"Close"})})]})})})]})}const H2="https://picsum.photos",Zz=async()=>{try{const t=await fetch(`${H2}/v2/list?page=${Math.floor(Math.random()*30)}&limit=1`);if(!t.ok)throw new Error(`Picsum API error: ${t.status} ${t.statusText}`);const[e]=await t.json();if(!e)throw new Error("No image data received");const r={url:`${H2}/id/${e.id}/1080/360`,id:e.id,photographer:e.author||"Unknown",photographerUrl:e.url||""};return console.log("Successfully fetched banner image:",{imageId:r.id,photographer:r.photographer}),{success:!0,data:{imageUrl:r.url,author:r.photographer,pageUrl:r.photographerUrl,tags:["picsum","photography"]}}}catch(t){return console.error("Error fetching random banner:",t),{success:!1,error:t.message||"Failed to fetch banner image"}}},eW=async(t,e)=>{try{if(!t||!(e!=null&&e.imageUrl))throw new Error("Invalid banner data or user ID");const n=ve(Z,"users",t);return await mr(n,{bannerImageURL:e.imageUrl,bannerAuthor:e.author||"Unknown",bannerSourceUrl:e.pageUrl||"",bannerTags:e.tags||["picsum","photography"],bannerUpdatedAt:new Date().toISOString()}),console.log("Successfully updated user banner:",{userId:t,imageUrl:e.imageUrl}),{success:!0}}catch(n){return console.error("Error updating banner:",n),{success:!1,error:n.message||"Failed to update banner"}}};function tW({previewUrl:t,onSave:e,onClose:n,loading:r,onGenerateRandom:i}){const s=()=>{t&&e({imageUrl:t,updatedAt:new Date().toISOString()})};return f.jsx(H.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-base-300/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:f.jsxs(H.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-base-100 rounded-box p-4 max-w-2xl w-full shadow-lg",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Edit Profile Banner"}),f.jsx("button",{className:"btn btn-ghost btn-circle btn-sm",onClick:n,disabled:r,children:f.jsx(Bf,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"relative w-full h-48 md:h-64 rounded-box overflow-hidden mb-4",children:t?f.jsx("img",{src:t,alt:"Banner Preview",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-base-200 flex items-center justify-center",children:f.jsx("span",{className:"text-base-content/50",children:"No image selected"})})}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsxs("button",{className:"btn btn-ghost gap-2",onClick:i,disabled:r,children:[f.jsx(mv,{className:"w-5 h-5"}),"Generate Random"]}),f.jsxs("button",{className:"btn btn-primary gap-2",onClick:s,disabled:r||!t,children:[r?f.jsx("span",{className:"loading loading-spinner loading-sm"}):f.jsx(tF,{className:"w-5 h-5"}),"Save Changes"]})]})]})})}function nW({profileUserId:t,bannerUrl:e,isEditable:n}){const{currentUser:r}=At(),[i,s]=g.useState(!1),[o,a]=g.useState(!1),[l,c]=g.useState(null),[d,h]=g.useState(null),m=async()=>{a(!0),c(null);try{const _=await Zz();_.success?(h(_.data.imageUrl),s(!0)):c(_.error)}catch(_){c("Failed to generate banner"),console.error("Error generating banner:",_)}finally{a(!1)}},y=async _=>{a(!0),c(null);try{const x=await eW(r.uid,_);x.success?(s(!1),h(null)):c(x.error)}catch(x){c("Failed to save banner"),console.error("Error saving banner:",x)}finally{a(!1)}};return f.jsxs("div",{className:"relative w-full",children:[f.jsxs("div",{className:"relative w-full h-48 md:h-64 overflow-hidden rounded-b-xl",children:[f.jsx(H.img,{src:e||"/default-banner.jpg",alt:"Profile Banner",className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-base-300/50 to-transparent"}),n&&(r==null?void 0:r.uid)===t&&f.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[f.jsx(H.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn btn-circle btn-sm bg-base-100/80 hover:bg-base-100",onClick:m,disabled:o,children:f.jsx(mv,{className:"w-4 h-4"})}),f.jsx(H.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn btn-circle btn-sm bg-base-100/80 hover:bg-base-100",onClick:()=>s(!0),disabled:o,children:f.jsx(NR,{className:"w-4 h-4"})})]})]}),f.jsx(nt,{children:l&&f.jsxs(H.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-4 left-4 bg-error text-error-content px-4 py-2 rounded-lg flex items-center gap-2",children:[f.jsx("span",{children:l}),f.jsx("button",{className:"btn btn-ghost btn-circle btn-xs",onClick:()=>c(null),children:f.jsx(Bf,{className:"w-4 h-4"})})]})}),f.jsx(nt,{children:i&&f.jsx(tW,{previewUrl:d,onSave:y,onClose:()=>{s(!1),h(null)},loading:o,onGenerateRandom:m})})]})}function rW(){var $;const t=lo(),{currentUser:e,loading:n,userStats:r}=At(),{posts:i,loading:s,hasMore:o,fetchUserPosts:a,createNewPost:l,togglePostLike:c}=Xc(),[d,h]=g.useState("posts"),[m,y]=g.useState(!1),[_,x]=g.useState(null),[R,b]=g.useState(!0),[w,E]=g.useState(""),[P,j]=g.useState(""),[k,S]=g.useState(!1),[T,I]=g.useState(null),[C,D]=g.useState(!1),[L,N]=g.useState({posts:0,followers:0,following:0,joined:"Recently"}),[X,we]=g.useState(null);g.useRef(null);const G=g.useRef(null);g.useEffect(()=>{(async()=>{if(!n&&!e){t("/login");return}if(e!=null&&e.uid){b(!0);try{we(e.uid);const ie=await M6(e.uid);ie.data?(x(ie.data),E(ie.data.displayName||e.displayName||""),j(ie.data.bio||"")):await L6(e.uid,{displayName:e.displayName||"",bio:"",email:e.email||"",followersCount:0,followingCount:0});const ne=ve(Z,"users",e.uid),pe=An(ne,Ee=>{if(Ee.exists()){const Le=Ee.data();N(Ye=>({...Ye,followers:Le.followersCount||0,following:Le.followingCount||0}))}});return()=>pe()}catch(ie){console.error("Error initializing profile:",ie)}finally{b(!1)}}})()},[e,n,t]),g.useEffect(()=>{X&&a(X)},[X]),g.useEffect(()=>{const Q=async ne=>{if(ne[0].isIntersecting&&o&&!C&&!s&&X){D(!0);try{await a(X,!0)}finally{D(!1)}}},ie=new IntersectionObserver(Q,{root:null,rootMargin:"20px",threshold:.1});return G.current&&o&&!C&&!s&&ie.observe(G.current),()=>ie.disconnect()},[o,C,s,i.length,X]),g.useEffect(()=>{_&&N(Q=>({...Q,posts:_.postCount||0,joined:_.createdAt?new Date(_.createdAt.seconds*1e3).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Recently"}))},[_]),g.useEffect(()=>{r&&N(Q=>({...Q,followers:r.followersCount||0,following:r.followingCount||0}))},[r]),g.useEffect(()=>{if(!(e!=null&&e.uid))return;const Q=ve(Z,"users",e.uid),ie=An(Q,ne=>{ne.exists()&&x(ne.data())});return()=>ie()},[e]);const J={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return n?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}):e?f.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[f.jsx(nW,{profileUserId:X,bannerUrl:_==null?void 0:_.bannerImageURL,isEditable:(e==null?void 0:e.uid)===X}),f.jsxs("div",{className:"relative px-4 pb-4",children:[f.jsxs("div",{className:"flex items-end gap-6 -mt-16 mb-6",children:[f.jsx("div",{className:"relative",children:f.jsx(Jz,{size:"xl",userId:X,editable:(e==null?void 0:e.uid)===X})}),f.jsx("div",{className:"flex-1 pb-2",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-base-content",children:(e==null?void 0:e.displayName)||"Anonymous User"}),f.jsxs("p",{className:"text-base-content/60",children:["@",(($=e==null?void 0:e.email)==null?void 0:$.split("@")[0])||"anonymous"]})]}),(e==null?void 0:e.uid)===X&&f.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline btn-sm gap-2",children:[f.jsx(FF,{className:"w-4 h-4"}),"Edit Profile"]})]})})]}),f.jsxs("div",{className:"stats shadow bg-base-200 w-full",children:[f.jsxs("div",{className:"stat place-items-center",children:[f.jsx("div",{className:"stat-title",children:"Posts"}),f.jsx("div",{className:"stat-value text-primary",children:L.posts})]}),f.jsxs("div",{className:"stat place-items-center",children:[f.jsx("div",{className:"stat-title",children:"Followers"}),f.jsx("div",{className:"stat-value text-secondary",children:L.followers})]}),f.jsxs("div",{className:"stat place-items-center",children:[f.jsx("div",{className:"stat-title",children:"Following"}),f.jsx("div",{className:"stat-value text-accent",children:L.following})]}),f.jsxs("div",{className:"stat place-items-center",children:[f.jsx("div",{className:"stat-title",children:"Joined"}),f.jsx("div",{className:"stat-value text-sm",children:L.joined}),f.jsx("div",{className:"stat-desc",children:f.jsx(q9,{className:"w-4 h-4 inline mr-1"})})]})]})]}),f.jsx(H.div,{variants:J,className:"card bg-base-100 shadow-xl",children:f.jsx("div",{className:"card-body",children:f.jsx(uC,{createNewPost:l,isPosting:k,postError:T})})}),f.jsxs(H.div,{variants:J,className:"tabs tabs-boxed justify-center",children:[f.jsx("a",{className:`tab ${d==="posts"?"tab-active":""}`,onClick:()=>h("posts"),children:"Posts"}),f.jsx("a",{className:`tab ${d==="comments"?"tab-active":""}`,onClick:()=>h("comments"),children:"Comments"}),f.jsx("a",{className:`tab ${d==="saved"?"tab-active":""}`,onClick:()=>h("saved"),children:"Saved"})]}),f.jsxs(H.div,{variants:J,className:"space-y-4",children:[d==="posts"&&f.jsx(f.Fragment,{children:s&&i.length===0?f.jsx("div",{className:"text-center py-8",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}):i.length>0?f.jsxs(f.Fragment,{children:[f.jsx(nt,{children:i.map(Q=>f.jsx(Yf,{post:Q,onLike:c},Q.id))}),f.jsxs("div",{ref:G,className:"h-10 mt-4",children:[C&&f.jsx("div",{className:"text-center",children:f.jsx("span",{className:"loading loading-spinner loading-md"})}),!C&&o&&i.length>0&&f.jsx("div",{className:"text-center text-base-content/60",children:f.jsx("p",{className:"text-sm",children:"Scroll to load more"})}),!o&&i.length>0&&f.jsxs("div",{className:"text-center text-base-content/60",children:[f.jsx("p",{className:"text-sm",children:"No more posts to load"}),f.jsx("div",{className:"divider"})]})]})]}):f.jsx("div",{className:"text-center py-8 card bg-base-100 shadow-xl",children:f.jsxs("div",{className:"card-body",children:[f.jsx(IR,{className:"w-16 h-16 mx-auto text-base-content/20"}),f.jsx("p",{className:"mt-4 text-base-content/60",children:"No posts yet"}),f.jsx("p",{className:"text-sm text-base-content/40",children:"Share your thoughts with the community!"})]})})}),d==="comments"&&f.jsxs("div",{className:"text-center py-8",children:[f.jsx(yv,{className:"w-16 h-16 mx-auto text-base-content/20"}),f.jsx("p",{className:"mt-4 text-base-content/60",children:"No comments yet"}),f.jsx("button",{className:"btn btn-primary mt-4",children:"Start Engaging"})]}),d==="saved"&&f.jsxs("div",{className:"text-center py-8",children:[f.jsx(Ff,{className:"w-16 h-16 mx-auto text-base-content/20"}),f.jsx("p",{className:"mt-4 text-base-content/60",children:"No saved items"}),f.jsx("button",{className:"btn btn-primary mt-4",children:"Explore Content"})]})]})]}):null}function id({children:t}){const{currentUser:e,loading:n}=At();return n?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}):e?t:f.jsx(xb,{to:"/login"})}function q2({children:t}){const{currentUser:e,loading:n}=At();return n?f.jsx("div",{className:"flex justify-center items-center min-h-screen",children:f.jsx("span",{className:"loading loading-spinner loading-lg"})}):e?f.jsx(xb,{to:"/"}):t}const iW=_N([{path:"/login",element:f.jsx(q2,{children:f.jsx(Iz,{})})},{path:"/signup",element:f.jsx(q2,{children:f.jsx(Sz,{})})},{path:"/",element:f.jsx(id,{children:f.jsx(rd,{children:f.jsx(Qz,{})})})},{path:"/explore",element:f.jsx(id,{children:f.jsx(rd,{children:f.jsx(Yz,{})})})},{path:"/notifications",element:f.jsx(id,{children:f.jsx(rd,{children:f.jsx(Xz,{})})})},{path:"/profile",element:f.jsx(id,{children:f.jsx(rd,{children:f.jsx(rW,{})})})}]);function sW(){return f.jsx(S6,{children:f.jsx(P9,{children:f.jsx(G6,{children:f.jsx(CN,{router:iW})})})})}wp.createRoot(document.getElementById("root")).render(f.jsx(ca.StrictMode,{children:f.jsx(sW,{})}));
